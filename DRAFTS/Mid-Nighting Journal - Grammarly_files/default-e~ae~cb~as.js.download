"use strict";(self.webpackChunk_grammarly_denali_app=self.webpackChunk_grammarly_denali_app||[]).push([[953,2350],{56488:(e,t,i)=>{i.d(t,{GN:()=>O,b3:()=>P});var n=i(10334),s=i(85886),r=i(22928),o=i(66202),a=i(84647),l=i(77205),c=i(20509),d=i(50583),h=i(63100),m=i(45012),p=i(80843),u=i(1224),g=i(65390),f=i(65160),y=i(86922),_=i(19967),v=i(65873),b=i(80159),C=i(51707),k=i(19772),S=i(99339),w=i(58260),x=i(93432),E=i(99010),T=i(5406),A=i(45653),M=i(92141),K=i(88219),B=i(72763);const I=({title:e,className:t})=>s.createElement("div",(0,n._)({className:t},C.mA(e.toLowerCase(),{allowedTags:["i","b"]}))),N=({title:e,explanation:t})=>s.createElement("div",null,s.createElement(I,{className:B.YI.bigTitle,title:e}),s.createElement("div",(0,n._)({className:B.YI.explanation},C.mA(t,{allowedTags:["i","b"]})))),$=({alert:e,hydrate:t,onApply:i,onAddToDictionary:n,onIgnore:r,onOpen:m,onMount:p})=>{const f=s.useContext(y.S.Context).inlineCard,v=e=>/Unknown/.test(e.patternName);return k.R.useEffectOnDidMount(p),s.createElement("div",{className:B.YI.card},(0,a.pipe)(e.getTransform(),g.chain((0,a.flow)(t,o.fold((t=>(u.Bx.Logging.getLogger("InlineCard.hydration").error("Failed to hydrate an inline card",t.error,{alertId:e.id}),g.none)),g.some))),g.fold((()=>!v(e)&&s.createElement(N,{title:e.title,explanation:e.explanation})),(t=>{return s.createElement(K.Vy,{key:"replacementsLabels",replacementsLabels:t,onClick:i,header:(n=e,r=t.tooltipText,/Unknown/.test(n.patternName)?"Unknown word":/Misspelled\/General/.test(n.patternName)?"":/Correctness\/FullSentence\/Fusion\/Rewrite/.test(n.patternName)?n.miniCardTitle:r),customStyle:B.YI,a11yContrast:!0,beta:e.extraProperties.isBeta});var n,r}))),v(e)&&s.createElement(N,{title:e.title,explanation:e.explanation}),s.createElement(_.$n.Group,{align:"vertical"},e.extraProperties.hasAddToDictionary&&s.createElement(_.$n.Tertiary,{name:"add-to-dictionary",textPosition:"right",className:v(e)?B.YI.footerButtonBig:B.YI.footerButtonShort,onClick:n},s.createElement(l.I,{icon:c.I,variant:"inherit",accessibilityLabel:""}),f.addToDictionary),s.createElement(_.$n.Tertiary,{name:"dismiss",className:B.YI.footerButtonShort,onClick:r},s.createElement(l.I,{icon:d.C,variant:"inherit",accessibilityLabel:""}),f.dismiss),s.createElement(_.$n.Tertiary,{name:"see_more",className:B.YI.footerButtonShort,onClick:m},s.createElement(l.I,{icon:h.$,variant:"inherit",accessibilityLabel:""}),f.seeMore)),s.createElement(R,{alert:e}))},R=({alert:e})=>(0,a.pipe)(e.extraProperties.freePremium,f.gR("unlocked"))?s.createElement(F,null):(0,a.pipe)(e.extraProperties.premiumYellowFooterVariant,g.isSome)?(0,a.pipe)(e.extraProperties.premiumYellowFooterVariant,g.fold((()=>null),(e=>s.createElement(L,{variant:e})))):s.createElement("div",{className:B.YI.emptyCardFooter}),L=({variant:e})=>{const t=s.useContext(y.S.Context).premiumFooter;return s.createElement(D,null,t[e])},F=()=>{const{beforeIcon:e,afterIcon:t}=s.useContext(y.S.Context).freePremiumAlertFooter;return s.createElement(D,null,e," ",t)},D=({children:e})=>s.createElement(v.Oc,{className:B.YI.premiumCardFooter},s.createElement(l.I,{icon:m.p,size:"medium",variant:"inherit",accessibilityLabel:""}),e),H=e=>{const t=s.useRef(null),[i,r]=s.useState(!1);k.R.useEffectOnDidMount((()=>{const e=t.current;e&&e.firstElementChild&&e.firstElementChild.clientWidth>=288&&r(!0)}));const{alert:o,hydrate:a,onApply:l,onIgnore:c,onAddToDictionary:d,onOpen:h,onMount:m}=e;return s.createElement("div",(0,n._)({role:"presentation",onClick:e=>e.stopPropagation(),key:o.id,ref:e=>t.current=e},(0,p.Ly)(i&&B.YI.maxWidthReached)),s.createElement($,{alert:o,hydrate:a,onApply:l,onIgnore:c,onAddToDictionary:d,onOpen:h,onMount:m}))},P=({alert:e,events:t,highlightIndex:i,hydrate:n})=>{const r=()=>t.next({type:b.G.Type.closed}),o=e=>()=>{e.type!==b.G.Type.looked&&r(),t.next(e)},a=A.A.isWritingExpertWithTeaser(e)?S.R(document,"mousedown").pipe(w.s(1),x.c(300),E.M(r)):T.w;return k.R.useSubscription(a.subscribe()),s.createElement(H,{alert:e,hydrate:n,onAddToDictionary:o({type:b.G.Type.addedToDictionary,alertId:e.id}),onApply:t=>o({type:b.G.Type.applied,alertId:e.id,alternativeIndex:t}),onIgnore:o({type:b.G.Type.ignored,alertId:e.id}),onOpen:o({type:b.G.Type.opened,alert:{alert:e,highlightIndex:i}}),onMount:o({type:b.G.Type.looked,alertId:e.id,kind:"card"})})},O=({item:e,highlightIndex:t,viewModel:i,events:n,designSystem:o})=>s.createElement("div",{className:B.YI.sduiCard},s.createElement(r.R,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:o,notify:(n,s,r)=>{i.handleSDUIAction({type:M.X9.Type.sduiCardAction,sourceId:n,cardId:e.id,actions:s,scope:r},t)},transitions:[],prevContent:g.none,onAnimationEnd:a.constVoid,onMount:()=>n.next({type:b.G.Type.looked,alertId:e.alertIds[0],kind:"card"})}))},72763:(e,t,i)=>{i.d(t,{YI:()=>U});var n=i(10334),s=i(17171),r=i(11864),o=i(4885),a=i(72747),l=i(27199);const c="inlineHeader",d="itemInsert",h="itemRemove",m="inline-card-diff",p="strike",u="inline-card-card",g="inline-transform",f=()=>({padding:`0 ${r.Ks.rem(1)}`}),y=()=>({paddingTop:r.Ks.rem(.5)}),_=r.Ks.keyframes({from:{opacity:0,transform:"scale(1, .8)"}}),v=r.Ks.keyframes({to:{opacity:0,transform:"scale(1, .8)"}}),b={position:"absolute",zIndex:a.ry,minWidth:r.Ks.rem(11),outline:"none",transformOrigin:"top",willChange:"opacity, transform",$nest:{"@media print":{visibility:"hidden"}}},C={marginTop:r.Ks.rem(.5),transformOrigin:"bottom"},k={animation:`${v} ${r.Ks.seconds(.1)} linear forwards`,pointerEvents:"none"},S={animation:`${_} ${r.Ks.seconds(.1)} linear forwards`},w={display:"flex",flexDirection:"column",overflow:"hidden",marginLeft:r.Ks.rem(-1),minWidth:r.Ks.rem(12),maxWidth:r.Ks.rem(18),borderRadius:r.Ks.rem(a.Am),background:l.Q1.CoreNeutral0,boxShadow:l.eu.Z300,color:o.y2,fontSize:r.Ks.rem(.8),"-webkit-font-smoothing":"antialiased",$nest:{"&:before":{position:"absolute",marginTop:r.Ks.px(-2),width:r.Ks.percent(100),height:r.Ks.px(2),border:"1px solid transparent",content:"''"}}},x=(0,s._)((0,n._)({},w),{maxWidth:void 0}),E={display:"flex",alignItems:"center",justifyContent:"start",padding:`${r.Ks.rem(.5)} ${r.Ks.rem(1)} ${r.Ks.rem(.5)} ${r.Ks.rem(.5)}`,background:l.Q1.CoreYellow20,color:l.Q1.CoreYellow80,$nest:{"& i":{margin:`0 ${r.Ks.rem(.5)} 0 ${r.Ks.rem(.25)}`,fill:l.Q1.CoreYellow80}}},T={paddingBottom:r.Ks.rem(.5)},A={$nest:{"&:first-letter":{textTransform:"capitalize"}}},M={paddingBottom:r.Ks.rem(.75),color:l.Q1.CoreNeutral90,fontSize:r.Ks.rem(.85),lineHeight:r.Ks.rem(1.2)},K={marginBottom:r.Ks.rem(.8),fontSize:r.Ks.rem(.7),lineHeight:r.Ks.rem(1.1),$nest:{"& b":{padding:r.Ks.rem(.25),borderRadius:a.OC,background:o.Hm,color:l.Q1.CoreNeutral90,fontWeight:600}}},B={color:o.V9,fontWeight:"normal",lineHeight:r.Ks.rem(2.1),paddingLeft:r.Ks.important(r.Ks.rem(.5)),justifyContent:"flex-start"},I={height:r.Ks.rem(2)},N={paddingBottom:r.Ks.rem(.5),color:o.V9,whiteSpace:"nowrap",fontWeight:"normal",fontSize:r.Ks.rem(1.25),lineHeight:r.Ks.rem(2),cursor:"pointer",textSizeAdjust:String(r.Ks.percent(100))},$={display:"flex",justifyContent:"space-between",marginBottom:r.Ks.rem(.25),paddingTop:r.Ks.rem(.1),color:o.V9,fontWeight:400,fontSize:r.Ks.rem(.8),lineHeight:r.Ks.rem(1.2)},R={color:l.Q1.CoreBlue50},L={color:r.Ks.important(o.YP),lineHeight:r.Ks.rem(2),$nest:{"&:after":{background:r.Ks.important(o.YP)}}},F={$nest:{[`& .${d}, .${h}`]:{paddingBottom:r.Ks.rem(.3),whiteSpace:"normal",lineHeight:r.Ks.rem(1.5)}}},D={maxWidth:r.Ks.rem(19)},H={padding:`${r.Ks.rem(.75)} ${r.Ks.rem(1)}`,color:l.Q1.CoreNeutral40},P={paddingLeft:r.Ks.rem(.4)},O={color:l.Q1.CoreNeutral40,fontWeight:500},Q={$nest:{"& svg":{stroke:l.Q1.CoreNeutral40}}},W={display:"block",width:r.Ks.percent(100),color:l.Q1.CoreNeutral90,textAlign:"left",whiteSpace:"pre-line",$nest:{"&:first-child":(0,n._)({},y()),"&:hover":{backgroundColor:l.Q1.CoreBlue50,color:l.Q1.CoreNeutral0,$nest:{[`& .${c}`]:{color:l.Q1.CoreNeutral0},[`& .${m}`]:{color:l.Q1.CoreNeutral0},[`& .${g}`]:{color:l.Q1.CoreNeutral0},[`& .${p}`]:{color:r.Ks.important(l.Q1.CoreNeutral0),$nest:{"&:after":{background:r.Ks.important(l.Q1.CoreNeutral0)}}}}}}},V={transform:"scale(.8)",marginRight:r.Ks.rem(.1)},U=(0,s._)((0,n._)({},r.Ks.stylesheet({container:[b],directionUp:[C],invisible:[k],visible:[S],bigTitle:[f(),y(),A,M],unknownWordTitle:[y(),A],explanation:[f(),K],footerButton:[B],footerButtonBig:[B],footerButtonShort:[B,I],inlineWrappedList:[N],maxWidthReached:[F],cardUphook:[D],title:[H],upgradeButton:[P],upgradeButtonText:[O],upgradeIcon:[Q]})),{card:r.Ks.joinClasses([u,r.Ks.style(w)]),sduiCard:r.Ks.style(x),premiumCardFooter:r.Ks.joinClasses([u,r.Ks.style(E)]),emptyCardFooter:r.Ks.joinClasses([u,r.Ks.style(T)]),diff:r.Ks.joinClasses([m,r.Ks.style(R)]),strike:r.Ks.joinClasses([p,r.Ks.style(L)]),inlineHeader:r.Ks.joinClasses([c,r.Ks.style(A,$)]),inlineHeaderOne:r.Ks.joinClasses([c,r.Ks.style(A,$,{marginBottom:0})]),itemInsert:r.Ks.joinClasses([d,r.Ks.style(f(),W)]),itemRemove:r.Ks.joinClasses([h,r.Ks.style(f(),W)]),transform:g,inlineCardUpdatedLogo:r.Ks.style(V)})},46953:(e,t,i)=>{i.d(t,{wY:()=>me});var n=i(10334),s=i(17171),r=i(85886),o=i(84647),a=i(56855),l=i(7149),c=i(11864),d=i(86922),h=i(64191),m=i(56122),p=i(77272),u=i(92954),g=i(78799),f=i(16624),y=i(35426),_=i(77205),v=i(45012),b=i(83683),C=i(13607),k=i(27199);const S={display:"flex",padding:`${c.Ks.rem(1)} ${c.Ks.rem(4)} ${c.Ks.rem(1)} ${c.Ks.rem(.75)}`,background:k.Q1.BackgroundNotification,color:k.Q1.CoreNeutral0,borderRadius:c.Ks.rem(C.H0),marginBottom:c.Ks.rem(.5)},w={alignSelf:"flex-start",backgroundColor:k.Q1.CoreYellow50,borderRadius:c.Ks.percent(50),minWidth:c.Ks.rem(1.75),minHeight:c.Ks.rem(1.75),padding:c.Ks.rem(.25),$nest:{"& path":{stroke:`${k.Q1.CoreNeutral0} !important`}}},x={padding:`0 ${c.Ks.rem(1)}`,lineHeight:c.Ks.rem(k.EY.BodyLineHeight),fontWeight:"bold"},E={marginTop:c.Ks.rem(1)},T={color:k.Q1.CoreYellow20},A=c.Ks.prefixedStylesheet("notifications-change-plan",{wrapper:[S],content:[{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}],icon:[{display:"none"}],iconPremium:[w],text:[x],changePlanBtn:[E],price:[T]});var M;!function(e){const t={content:{wrapper:A.wrapper,icon:A.icon}};e.View=({notification:e,savedPrice:i,onClose:o,onChangePlan:a})=>{const l=r.useContext(d.S.Context).changePlan.hook;return r.createElement(h.Rx.Wrapper,{notification:e,onClose:o,theme:t},r.createElement(h.Rx.Content,null,r.createElement("div",{className:A.content},r.createElement(_.I,{icon:v.p,className:A.iconPremium,accessibilityLabel:"",size:"small"}),r.createElement("div",{className:A.text},l.title,r.createElement(u.U,{onClick:a,name:"changePlanNotification",className:A.changePlanBtn},r.createElement("b",null,l.button.switchTo,r.createElement("span",{className:A.price},l.button.price(r.createElement(b.J9,(0,s._)((0,n._)({},i.pricePerYear),{periodInMonths:12}))))))))))}}(M||(M={}));var K=i(19967),B=i(65873),I=i(19772),N=i(72747);c.Ks.style({display:"flex",flexDirection:"column",width:"100vw",height:"var(--100vh)",background:k.Q1.CoreNeutral1,justifyContent:"center",alignItems:"center"});const $=c.Ks.style({padding:c.Ks.rem(1.5),width:c.Ks.rem(N.NE-N.PG),borderRadius:c.Ks.rem(N.Am),background:k.Q1.CoreNeutral0,boxShadow:k.eu.Z300,transform:`translateX(${c.Ks.rem(-1*(N.xS-N.xu+N.PG))})`,$nest:{[`@media (${N.P9})`]:{width:c.Ks.rem(N.rQ-N.PG)}}}),R=c.Ks.style({display:"flex",marginBottom:c.Ks.rem(1)}),L=(c.Ks.style({marginBottom:c.Ks.rem(1)}),c.Ks.style({marginBottom:c.Ks.rem(1),fontWeight:700})),F=(c.Ks.style({marginLeft:c.Ks.rem(.5)}),c.Ks.style({maxWidth:"100%"})),D=c.Ks.style({paddingRight:c.Ks.rem(.5),paddingLeft:c.Ks.rem(.5)}),H=c.Ks.joinClasses([c.Ks.style({marginRight:c.Ks.rem(.5),marginLeft:c.Ks.rem(-.5),textTransform:"none",letterSpacing:"normal",fontSize:c.Ks.rem(k.EY.BodySize)}),D]);var P;!function(e){e.View=({name:e,title:t,description:i,cta:n,dismiss:s,topPart:o,rightPart:a,onCTA:l,onDismiss:c,onShow:d})=>(I.R.useEffectOnDidMount((()=>d&&d())),r.createElement("section",{className:$},o,r.createElement("div",{className:R},r.createElement("div",null,r.createElement(B.C6,{className:L},t),r.createElement(B.C6,null,i)),a),r.createElement("div",{className:F},r.createElement(K.$n.Ghost,{name:e,className:H,onClick:l},n),r.createElement(K.$n.Flat,{name:`dismiss.${e}`,className:D,onClick:c},s))))}(P||(P={}));var O=i(71301),Q=i(90883);const W=({expiryDate:e,notification:t,onShow:i,onDismiss:n,onUpdateBilling:s})=>{const o=r.useContext(d.S.Context).gbBillingMigration,a=O.Yr.fullDate(O.Yr.Timestamp.toLocal(e.getTime()));return r.useEffect(i),r.createElement(h.Rx.Wrapper,{notification:t,onClose:n},r.createElement("div",null,r.createElement(B.H4,{className:V.title},o.title),r.createElement(Q.h,null),r.createElement(B.C6,{className:V.description},o.description(a)),r.createElement(Q.h,null),r.createElement(u.U,{name:"addBillingInformation",onClick:s,className:V.cta},o.cta)))},V=c.Ks.prefixedStylesheet("gb_billing_migration_notification",{title:[{color:k.Q1.CoreNeutral0,lineHeight:c.Ks.rem(1.5)}],description:[{color:k.Q1.CoreNeutral0}],cta:[{fontWeight:600}]});var U=i(48565);const z=({notification:e,onClose:t,link:i})=>{const n=r.useContext(d.S.Context).gbRuleCreated;return r.createElement(h.q0.Wrapper,{notification:e,onClose:t},r.createElement(h.Rx.Content,null,r.createElement("div",{className:Y.wrapper},r.createElement("div",{className:Y.content},r.createElement("div",null,n.ruleSaved),r.createElement(U.M,{href:i,target:"_blank",className:Y.link},n.viewStyleGuide)))))},j={display:"flex",marginTop:c.Ks.rem(-1.1),marginBottom:c.Ks.rem(-.8),alignItems:"center",justifyContent:"space-between"},q={maxWidth:c.Ks.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1,paddingTop:c.Ks.rem(.5),paddingRight:c.Ks.rem(2)},G={color:k.Q1.CoreBlue40,textDecoration:"none"},Y=c.Ks.stylesheet({wrapper:[j],content:[q],link:[G]}),J={padding:c.Ks.rem(1),width:c.Ks.rem(20),borderRadius:c.Ks.rem(C.H0),background:k.Q1.BackgroundNotification,color:k.Q1.CoreNeutral0},X={marginBottom:c.Ks.rem(.5),width:c.Ks.percent(100),borderRadius:c.Ks.rem(C.OC)},Z={marginBottom:c.Ks.rem(1),color:k.Q1.CoreNeutral0},ee={display:"inline-block",padding:`0 ${c.Ks.rem(1.5)}`,fontWeight:"bold"},te=c.Ks.prefixedStylesheet("notifications-mute-onboarding",{wrapper:[J],media:[X],description:[Z],btn:[ee]});var ie;!function(e){e.CardMute=({onClose:e,onShow:t})=>{const n=i(92935),s=i(76387),o=r.useContext(d.S.Context).mutedAlerts.onboarding.cardMute;return r.useEffect((()=>t())),r.createElement("div",{className:te.wrapper},r.createElement("video",{className:te.media,muted:!0,autoPlay:!0,loop:!0,src:n,poster:s}),r.createElement(B.C6,{className:te.description},o.description),r.createElement(u.U,{name:"gotItMutedOnboarding",className:te.btn,onClick:e},o.buttonText))}}(ie||(ie={}));var ne=i(53849);const se={display:"flex",padding:`${c.Ks.rem(1)} ${c.Ks.rem(3)} ${c.Ks.rem(1)} ${c.Ks.rem(.75)}`,background:k.Q1.BackgroundNotification,color:k.Q1.CoreNeutral0,borderRadius:c.Ks.rem(C.H0),marginBottom:c.Ks.rem(.5)},re={alignSelf:"flex-start",fill:k.Q1.CoreNeutral30,borderRadius:c.Ks.percent(50),minWidth:c.Ks.rem(1.75),minHeight:c.Ks.rem(1.75)},oe={paddingLeft:c.Ks.rem(.5)},ae={lineHeight:c.Ks.rem(k.EY.BodyLineHeight),fontWeight:"bold"},le={marginTop:c.Ks.rem(1),fontWeight:"bold"},ce=c.Ks.prefixedStylesheet("notifications-premium-ungating-renewal",{wrapper:[se],content:[{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}],icon:[{display:"none"}],iconInfo:[re],message:[oe],title:[ae],manageSubscriptionBtn:[le]});var de;!function(e){const t={content:{wrapper:ce.wrapper,icon:ce.icon}};e.View=({trialEndDate:e,notification:i,onManageSubscription:n,onClose:s})=>{const a=r.useContext(d.S.Context).premiumUngatingRenewalNotification,l=O.Yr.fullDate(O.Yr.Timestamp.toLocal(e.getTime())),c=(0,o.flow)(n,s);return r.createElement(h.Rx.Wrapper,{notification:i,onClose:s,theme:t},r.createElement(h.Rx.Content,null,r.createElement("div",{className:ce.content},r.createElement(_.I,{icon:ne.O,className:ce.iconInfo,accessibilityLabel:""}),r.createElement("div",{className:ce.message},r.createElement("div",{className:ce.title},a.title),a.message(l),r.createElement(u.U,{onClick:c,name:"manageSubscription",className:ce.manageSubscriptionBtn},a.cta)))))}}(de||(de={}));const he=()=>r.createElement("svg",{"aria-hidden":!0,width:"300",height:"120",viewBox:"0 0 200 100",xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("radialGradient",{cy:"51.039%",fx:"50%",fy:"51.039%",r:"53.934%",gradientTransform:"matrix(0 1 -.99155 0 1.006 .01)",id:"a"},r.createElement("stop",{stopColor:"#03C1E2",offset:"0%"}),r.createElement("stop",{stopColor:"#0279D8",offset:"100%"}))),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M180.34 114.801c0 25.152-20.564 45.544-45.933 45.544-25.366 0-45.932-20.392-45.932-45.544 0-25.154 20.566-45.544 45.932-45.544 25.369 0 45.933 20.39 45.933 45.544",fill:"#15C39A"}),r.createElement("path",{d:"M143.47 120.973c-1.91 0-3.417 1.705-3.06 3.662.272 1.49 1.686 2.513 3.214 2.513h4.813l2.79-.389c-4.464 6.493-12.214 9.481-20.688 8.163-6.898-1.074-12.823-5.701-15.323-12.165-5.676-14.67 5.13-28.678 19.211-28.678 7.34 0 13.774 4.259 17.465 9.403.002 0 .004.107.004.111.98 1.4 2.92 1.802 4.333.83a3.03 3.03 0 0 0 .905-4.053h.022c-5.105-7.901-14.277-12.957-24.592-12.272-13.43.893-24.298 11.79-25.07 25.115-.898 15.505 11.506 28.164 26.933 28.164 8.104 0 15.36-3.499 20.302-9.16l-.585 3.247v2.935c0 1.513 1.029 2.917 2.533 3.186 1.975.352 3.692-1.143 3.692-3.036v-17.576H143.47",fill:"#FFF",fillRule:"nonzero"}),r.createElement("g",{transform:"translate(3 69.257)"},r.createElement("ellipse",{stroke:"#FFF",strokeWidth:"2.649",fill:"url(#a)",cx:"45.765",cy:"45.378",rx:"47.089",ry:"46.703"}),r.createElement("path",{fill:"#EDEDED",d:"M40.217 39.83l33.05-21.955-21.955 33.05-33.05 21.956z"}),r.createElement("path",{fill:"#FE4E4D",d:"M40.217 39.83l33.05-21.955-21.955 33.05z"}),r.createElement("path",{fillOpacity:".199",fill:"#1C1E29",d:"M73.268 17.875l-21.956 33.05-33.05 21.956z"}),r.createElement("path",{d:"M46.637 77.791v6.483H45.11V77.79h1.526zm-17.783-4.666l1.321.756-3.269 5.614-1.32-.756 3.268-5.614zm33.822 0l3.269 5.614-1.322.756-3.268-5.614 1.32-.756zM17.128 61.023l.763 1.31-5.662 3.242-.763-1.31 5.662-3.242zm57.273 0l5.662 3.242-.762 1.31-5.662-3.242.762-1.31zm10.59-16.293v1.513h-6.537V44.73h6.538zm-71.915 0v1.513H6.538V44.73h6.538zM79.41 25.369l.762 1.31-5.662 3.241-.762-1.31 5.662-3.241zm-67.29 0l5.662 3.241-.763 1.31-5.662-3.241.763-1.31zm52.692-14l1.321.757-3.269 5.614-1.32-.756 3.268-5.615zm-38.094 0l3.268 5.615-1.32.756-3.27-5.614 1.322-.757zm19.919-4.886v6.482H45.11V6.483h1.526z",fill:"#F3F5FA"})),r.createElement("g",null,r.createElement("path",{d:"M76.732 36.02h35.03a2.55 2.55 0 0 0 2.205-3.833L96.452 2.074a2.55 2.55 0 0 0-4.409 0L74.528 32.187a2.55 2.55 0 0 0 2.204 3.832z",fill:"#EA1537"}),r.createElement("path",{d:"M95.86 17.988l-.695 6.792h-1.859l-.694-6.792v-5.483h3.247v5.483zm.024 12.028h-3.272v-3.285h3.272v3.285z",fill:"#FFF",fillRule:"nonzero"})))),me=(0,s._)((0,n._)({},p.k),{alertUndo:(e,t)=>r.createElement(g.Q.Flexible,{notification:e,onClose:t("closedByUser"),action:t("undo"),params:e.args.params}),textRemoved:(e,t)=>r.createElement(fe,{action:t("undo")}),cardMuteOnboarding:(e,t)=>r.createElement(ie.CardMute,{onShow:t("shown"),onClose:t("closedByUser")}),premiumOnboardingSurvey:(e,t)=>r.createElement(f.a,{viewModel:e.args.viewModel,onClose:t("closedByUser")}),changePlanCta:(e,t)=>r.createElement(M.View,{notification:e,savedPrice:e.args.model.savedPrice,onClose:t("closedByUser"),onChangePlan:t("changePlan")}),gbBillingMigration:(e,t)=>r.createElement(W,{notification:e,expiryDate:e.args.expiryDate,onShow:t("shown"),onUpdateBilling:t("cta"),onDismiss:t("closedByUser")}),changePlanSuccess:e=>r.createElement(ye,{planName:e.args.planName}),premiumUngatingRenewal:(e,t)=>r.createElement(de.View,{trialEndDate:e.args.trialEndDate,notification:e,onClose:t("closedByUser"),onManageSubscription:t("ctaManageSubscription")}),gbSatisfactionSurvey:(e,t)=>r.createElement(m.w,{viewModel:e.args.viewModel,onClose:t("closedByUser"),onComplete:t("completeSurvey")}),safariExtActivation:(e,t)=>r.createElement(ge,{cta:t("activate"),close:t("closedByUser"),onShow:t("shown")}),citationStyleChange:e=>r.createElement(_e,{citationStyle:e.args.citationStyle}),gbRuleCreated:(e,t)=>r.createElement(z,{notification:e,onClose:t("closedByUser"),link:e.args.link}),safari12EndSupport:()=>r.createElement(pe,null),logoutError:e=>r.createElement(ue,e.args)}),pe=()=>{const e=r.useContext(d.S.Context);return r.createElement(h.Rx.TitledContent,{title:e.safari12EndSupport.title},e.safari12EndSupport.description(c.Ks.style({color:"#fff"})))},ue=({timeToRetry:e,resetHandler:t})=>{const i=r.useContext(y.k.Context);return r.createElement(h.Rx.TitledContent,{title:i.account.logoutError.title},r.createElement(a.F.Fragment,null,(0,o.pipe)(e,l.T((e=>-1!==e?r.createElement("div",{key:"logoutErrorNotification"},i.account.logoutError.subtitle,r.createElement("br",null),r.createElement(u.U,{onClick:t},i.account.logoutError.retrying(e))):r.createElement("div",{key:"logoutErrorNotification"},i.account.logoutError.fatalDescription))))))},ge=({cta:e,close:t,onShow:i})=>{const{safariExtActivationNotification:n,actions:s}=r.useContext(d.S.Context);return r.createElement(P.View,{title:n.title,description:n.description,cta:n.cta,dismiss:s.close,name:"safariExtActivationNotification",onCTA:e,onDismiss:t,onShow:i,rightPart:r.createElement(he,null)})},fe=({action:e})=>{const t=r.useContext(d.S.Context);return r.createElement(h.Rx.Content,null,r.createElement(g.Q.Content,{action:e,content:t.textRemoved}))},ye=({planName:e})=>{const t=r.useContext(d.S.Context).changePlan;return r.createElement(h.Rx.Content,null,t.successfulNotificationCopy(e))},_e=({citationStyle:e})=>{const t=r.useContext(d.S.Context);return r.createElement(h.Rx.Content,null,t.citation.citationStyleChangeNotification.content(t.goals.sections.format.formatTitle(e)))}},71828:(e,t,i)=>{i.d(t,{c:()=>ve});var n=i(85886),s=i(24819),r=i(56855),o=i(86922),a=i(11864),l=i(7149),c=i(88e3),d=i(80300),h=i(19436),m=i(65390),p=i(71301),u=i(45182),g=i(13490),f=i(53849),y=i(56062),_=i(12175),v=i(37634),b=i(80843),C=i(30595),k=i(16760),S=i(13607),w=i(98831),x=i(14973),E=i(51963),T=i(90660),A=i(82608),M=i(83694),K=i(84647),B=i(84712),I=i(84872),N=i(79937),$=i(30343),R=i(9079),L=i(93432);const F=e=>{const{score:t,documentIsEmpty:i,sidebarOpen:s=B.s.create(!0),successIcon:o,progressIcon:a,zeroIcon:c=null}=e,d=t.pipe(l.T(m.map((e=>e.rank)))),h=I.z(t,i,((e,t)=>(0,K.pipe)(e,m.fold((()=>!1),(({rank:e})=>100===e&&!t))))),p=s.pipe(N.n((e=>e?d.pipe($.Z(m.none),R.J(),N.n((([e,t])=>(0,K.pipe)(t,m.fold((()=>M.of(c)),(t=>h.pipe($.Z(!1),R.J(),N.n((([i,n])=>n?M.of(o):(0,K.pipe)(e,m.filter((()=>!i)),m.fold((()=>M.of(a(t)).pipe(L.c(1),$.Z(a(0)))),(()=>M.of(a(t)))))))))))))):M.of(null))),$.Z(null));return n.createElement(r.F.Fragment,null,p)},D={wordSpacing:a.Ks.rem(.05),fontSize:a.Ks.rem(.875),lineHeight:a.Ks.rem(1.5)},H=a.Ks.prefixedStylesheet("statistics",{performanceText:[D]});var P;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(P||(P={}));const O=e=>{switch(e){case P.number:case P.percentage:return fe.numberRowData;case P.time:return fe.timeRowData;default:return(0,s.xb)(e)}},Q=({metricName:e,info:t})=>{const i=n.useContext(o.S.Context).performance.moreInfo;return n.createElement(u.A,{placement:"top"},n.createElement(u.A.Anchor,null,n.createElement(g.K,{variant:"tertiary",accessibilityLabel:i,icon:f.O,size:"small"})),n.createElement(u.A.Content,{width:"60%",title:e},n.createElement(y.E,{variant:"text-small",as:"p"},t)))},W=({type:e,value:t,info:i,children:r,dataName:o})=>n.createElement("div",{className:fe.row,"data-name":o},n.createElement("div",{className:O(e)},n.createElement("div",{className:fe.metricTitle},r),n.createElement("div",{className:fe.metric},((e,t)=>{switch(e){case P.number:return(Math.round(10*t)/10).toLocaleString();case P.time:return(0,p.Xq)(t);case P.percentage:return Math.round(t)+"%";default:return(0,s.xb)(e)}})(e,t))),i&&n.createElement("div",null,n.createElement(Q,{info:i,metricName:r}))),V=({state:e})=>{const t=n.useContext(o.S.Context).performance,{stats:i,score:s,documentIsEmpty:r}=e;return n.createElement(n.Fragment,null,n.createElement("section",{className:fe.titleSection},n.createElement("div",{className:fe.titleColumns},n.createElement(x.aF.SpokenDescription,(0,b.Ly)(H.performanceText,fe.headerDescription),100===s.rank?t.score100:t.scoreUnder100(s.rank)),n.createElement(F,{score:M.of(m.some(s)),documentIsEmpty:M.of(r),successIcon:n.createElement(w.In.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:fe.checkmark}),progressIcon:e=>n.createElement(T._,{key:"modal-performance-progress",colorType:T._.ColorType.green,fontSize:T._.FontSize.small,percentage:e,theme:ye})}))),n.createElement("section",{className:fe.wordCountSection},n.createElement(A.Typography.H3,{className:fe.sectionHeaderUnderline},t.wordCount),n.createElement("div",{className:fe.wordCountColumns},n.createElement("div",{className:fe.firstColumn},n.createElement(W,{type:P.number,value:Math.max(i.chars-1,0)},t.characters),n.createElement(W,{type:P.number,value:i.words},t.words),n.createElement(W,{type:P.number,value:i.sentences},(0,C.td)(i.sentences,t.sentence,t.sentences))),n.createElement("div",{className:fe.secondColumn},n.createElement(W,{type:P.time,value:k.R.calculateReadingTime(i.words)},t.readingTime),n.createElement(W,{type:P.time,value:k.R.calculateSpeakingTime(i.words)},t.speakingTime)))),n.createElement("section",{className:fe.readabilitySection},n.createElement("div",{className:fe.sectionHeaderWrapper},n.createElement(A.Typography.H3,null,t.readability),n.createElement(A.Typography.SmallLight,null,t.sectionTitleDescription)),n.createElement("div",{className:fe.readabilityColumns},n.createElement("div",{className:fe.firstColumn},n.createElement(W,{type:P.number,value:i.wordLength},t.wordLengthTitle)),n.createElement("div",{className:fe.secondColumn},n.createElement("div",{className:fe.row},n.createElement(E.k,{value:i.wordLengthIndex,className:fe.progressBar,leftCustomClass:fe.leftProgress,rightCustomClass:fe.rightProgress}),n.createElement(E.k.Label,{value:i.wordLengthIndex,className:fe.progressLabel})),n.createElement("div",{className:fe.verticalPillar}))),n.createElement("div",{className:fe.readabilityColumns},n.createElement("div",{className:fe.firstColumn},n.createElement(W,{type:P.number,value:i.sentenceLength},t.sentenceLengthTitle)),n.createElement("div",{className:fe.secondColumn},n.createElement("div",{className:fe.row},n.createElement(E.k,{value:i.sentenceLengthIndex,className:fe.progressBar,leftCustomClass:fe.leftProgress,rightCustomClass:fe.rightProgress}),n.createElement(E.k.Label,{value:i.sentenceLengthIndex,className:fe.progressLabel})),n.createElement("div",{className:fe.verticalPillarShort}))),n.createElement("div",{className:fe.readabilityColumns},n.createElement("div",{className:fe.firstColumn},n.createElement(W,{type:P.number,value:i.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore))),n.createElement(A.Typography.SmallLight,{className:fe.readabilityDescr},i.readabilityDescription)),n.createElement("section",null,n.createElement("div",{className:fe.sectionHeaderWrapper},n.createElement(A.Typography.H3,null,t.vocabulary),n.createElement(A.Typography.SmallLight,null,t.sectionTitleDescription)),n.createElement("div",{className:fe.vocabularyColumns},n.createElement("div",{className:fe.firstColumn},n.createElement(W,{type:P.percentage,value:i.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle)),n.createElement("div",{className:fe.secondColumn},n.createElement("div",{className:fe.row},n.createElement(E.k,{value:i.uniqueWords,className:fe.progressBar,leftCustomClass:fe.leftProgress,rightCustomClass:fe.rightProgress}),n.createElement(E.k.Label,{value:i.uniqueWords,className:fe.progressLabel})),n.createElement("div",{className:fe.verticalPillar}))),n.createElement("div",{className:fe.vocabularyColumns},n.createElement("div",{className:fe.firstColumn},n.createElement(W,{type:P.percentage,value:i.rareWords,info:t.rareWords},t.rareWordsTitle)),n.createElement("div",{className:fe.secondColumn},n.createElement("div",{className:fe.row},n.createElement(E.k,{value:i.rareWords,className:fe.progressBar,leftCustomClass:fe.leftProgress,rightCustomClass:fe.rightProgress}),n.createElement(E.k.Label,{value:i.rareWords,className:fe.progressLabel})),n.createElement("div",{className:fe.verticalPillarShort})))))},U={marginBottom:a.Ks.rem(2.4)},z={display:"flex",marginTop:a.Ks.rem(.9),marginRight:a.Ks.rem(1),justifyContent:"space-between"},j={marginBottom:a.Ks.rem(1.5)},q={display:"flex",marginTop:a.Ks.rem(.8)},G={marginBottom:a.Ks.rem(2.4)},Y={display:"flex",$nest:{"&:first":{marginTop:a.Ks.rem(.8)}}},J={display:"flex",$nest:{"&:first":{marginTop:a.Ks.rem(.8)}}},X={flexBasis:a.Ks.percent(50)},Z={position:"relative",paddingLeft:a.Ks.rem(.5),flexBasis:a.Ks.percent(50)},ee={display:"flex",height:a.Ks.rem(2),alignItems:"center"},te={display:"flex",justifyContent:"space-between"},ie={width:a.Ks.rem(10),fontFeatureSettings:`${S.AI}, ${S.UO}`},ne={width:a.Ks.rem(13)},se={marginRight:a.Ks.rem(1),paddingBottom:a.Ks.rem(.5),borderBottom:`1px solid ${_.NeutralGray10}`},re={width:a.Ks.percent(80),whiteSpace:"pre-line"},oe={display:"inline-block",color:v.Q.Text.Brand.Default,textAlign:"right",fontWeight:"bold",fontSize:a.Ks.rem(.875),lineHeight:a.Ks.rem(2)},ae={display:"inline-block",color:v.Q.Text.Base.Default,fontSize:a.Ks.rem(.875),lineHeight:a.Ks.rem(2)},le={width:a.Ks.rem(3.2),height:a.Ks.rem(3.2),fontWeight:"bold"},ce={width:a.Ks.rem(6),backgroundColor:_.NeutralGray20},de={marginLeft:a.Ks.rem(1.125)},he={backgroundImage:`linear-gradient(to left, ${_.Green30} 0%, ${_.Green60} 100%)`},me={backgroundImage:`linear-gradient(to right, ${_.Green30} 0%, ${_.Green60} 100%)`},pe={display:"block",paddingTop:a.Ks.rem(.5)},ue={position:"absolute",top:a.Ks.rem(.5),left:a.Ks.rem(3.5),width:a.Ks.rem(.0625),height:a.Ks.rem(3),backgroundColor:_.NeutralGray10},ge={height:a.Ks.rem(1)},fe=a.Ks.stylesheet({titleSection:[U],titleColumns:[z],wordCountSection:[j],wordCountColumns:[q],readabilitySection:[G],readabilityColumns:[Y],vocabularyColumns:[J],firstColumn:[X],secondColumn:[Z],row:[ee],rowData:[te],numberRowData:[te,ie],timeRowData:[te,ne],sectionHeaderUnderline:[se],sectionHeaderWrapper:[se,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[re],metric:[oe],metricTitle:[ae],checkmark:[{alignItems:"center"}],circleProgressBar:[le],progressBar:[ce],progressLabel:[de],leftProgress:[he],rightProgress:[me],readabilityDescr:[pe],verticalPillar:[ue],verticalPillarShort:[ue,ge]}),ye={radialProgressBar:fe.circleProgressBar},_e=()=>n.createElement("svg",{"aria-hidden":!0,width:"128",height:"177"},n.createElement("defs",null,n.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),n.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),n.createElement("mask",{id:"b",fill:"#fff"},n.createElement("use",{xlinkHref:"#a"})),n.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),n.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),n.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),n.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),n.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})));var ve;!function(e){let t;e.ModalView=d.UI.Grid.make((({slots:e,state:s,notify:a})=>{const l=a({kind:t.close}),c=n.useContext(o.S.Context);return n.createElement(h.cI,{title:c.performance.title,onClose:l,isOpen:!0,"data-name":"statistics-wrapper",style:{"--rem":16}},n.createElement(i,{state:s,downloadButton:n.createElement(r.F.Fragment,null,e.downloadButton)}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={}));var i=e.ModalContent=({state:e,downloadButton:t})=>n.createElement(r.F.Fragment,null,n.createElement(h.wM,null,n.createElement(u,{state:e})),n.createElement(h.NO,null,n.createElement(h.S1,{justify:"end",width:"100%"},t))),m=e.EmptyContent=()=>{const e=n.useContext(o.S.Context);return n.createElement(h.S1,{direction:"column",align:"center",justify:"center",height:a.Ks.rem(37.375),paddingTop:a.Ks.rem(5),"data-name":"statistics-zeroStateText",style:{maxHeight:"60vh"}},n.createElement(_e,null),n.createElement(h.Mu,{as:"p",align:"center"},e.performance.notEnoughTextToCalculateStats))},p=e.Loading=()=>n.createElement(h.S1,{width:"100%"},n.createElement(h.T3,{accessibilityLabel:"Loading",width:"100%"},n.createElement(h.S1,{direction:"column",style:{gap:a.Ks.rem(2),paddingTop:a.Ks.rem(1),paddingRight:a.Ks.rem(1)}},n.createElement(h.S1,{justify:"space-between"},n.createElement(h.S1,{direction:"column",width:"80%"},n.createElement(h.mj,{variant:"text-medium",width:"90%"}),n.createElement(h.mj,{variant:"text-medium",width:"80%"}),n.createElement(h.mj,{variant:"text-medium",width:"35%"})),n.createElement(h.Vw,{width:52})),n.createElement(h.S1,{direction:"column",style:{gap:a.Ks.rem(1)}},n.createElement(h.jv,{variant:"heading-large",width:140}),n.createElement(h.S1,{justify:"space-between",width:"100%"},n.createElement(h.S1,{width:"50%"},n.createElement(h.mH,{width:"80%",height:90})),n.createElement(h.S1,{width:"50%"},n.createElement(h.mH,{height:50})))),n.createElement(h.S1,{direction:"column",style:{gap:a.Ks.rem(1)}},n.createElement(h.jv,{variant:"heading-large",width:140}),n.createElement(h.S1,{justify:"space-between",width:"100%"},n.createElement(h.S1,{width:"50%"},n.createElement(h.mH,{width:"80%",height:90})),n.createElement(h.S1,{width:"50%"},n.createElement(h.mH,{height:50}))),n.createElement(h.S1,{direction:"column",style:{gap:a.Ks.rem(.5)}},n.createElement(h.mH,{height:a.Ks.rem(.5),width:"90%"}),n.createElement(h.mH,{height:a.Ks.rem(.5),width:"80%"}))),n.createElement(h.S1,{direction:"column",style:{gap:a.Ks.rem(1)}},n.createElement(h.jv,{variant:"heading-large",width:140}),n.createElement(h.S1,{justify:"space-between",width:"100%"},n.createElement(h.S1,{width:"50%"},n.createElement(h.mH,{width:"80%",height:50})),n.createElement(h.S1,{width:"50%"},n.createElement(h.mH,{width:"80%",height:50}))))))),u=e.Body=({state:e})=>n.createElement(r.F.Fragment,null,e.pipe(l.T((e=>{switch(e.type){case c.K.State.Type.EMPTY:return n.createElement(h.S1,{height:a.Ks.rem(37.375)});case c.K.State.Type.LOADING:case c.K.State.Type.ERROR:return n.createElement(p,{key:"statisticsLoading"});case c.K.State.Type.SHORT_CONTENT:return n.createElement(m,{key:"statisticsEmpty"});case c.K.State.Type.READY:return n.createElement(V,{key:"statisticsContent",state:e});default:return(0,s.xb)(e)}}))))}(ve||(ve={}))},92444:(e,t,i)=>{i.d(t,{x:()=>_});var n=i(10334),s=i(17171),r=i(11864),o=i(29120),a=i(27199);const l=e=>({[`&-${e}`]:{marginLeft:r.Ks.rem(3+1.5*e)}}),c=(e,t)=>({counterIncrement:`list${e}`,counterReset:t}),d=(e,t)=>({"&:before":{content:`counter(list${e}, ${t}) '. '`}}),h=(e,t,i)=>({[`&-${e}`]:(0,s._)((0,n._)({},c(e,i)),{$nest:d(e,t)})}),m="editor-",p={editorContainer:`${m}editorContainer`,rtfLink:`${m}rtfLink`,bigSize:`${m}bigSize`},u=`0 0 ${r.Ks.rem(.5)}`,g=(e,t,i)=>({margin:u,fontSize:r.Ks.rem(e),lineHeight:r.Ks.rem(t),$nest:{"&:not(:first-child)":{marginTop:r.Ks.rem(i)}}}),f={position:"relative",overflow:"hidden",minHeight:r.Ks.rem(5),outline:"none",border:"none",resize:"none",$nest:{"& p":{margin:0,padding:0},"& h1":g(1.375,2,2),"& h2":g(1.125,1.7,1),"& ol, & ul":{margin:`0 0 ${r.Ks.rem(.5)}`,paddingLeft:0},"& ol:not(:first-child), & ul:not(:first-child)":{marginTop:r.Ks.rem(.5)},"& li":{margin:`0 0 0 ${r.Ks.rem(3)}`,paddingRight:0,listStyleType:"none",$nest:{"&:before":{display:"inline-block",marginRight:r.Ks.rem(.5),marginLeft:r.Ks.rem(-3),width:r.Ks.rem(2.5),textAlign:"right",whiteSpace:"nowrap",lineHeight:r.Ks.rem(1.375)},[`.${p.bigSize} &`]:{$nest:{"&:before":{lineHeight:r.Ks.rem(1.65)}}}}},"& .ql-indent":{$nest:(0,n._)({},l(1),l(2),l(3),l(4),l(5),l(6),l(7),l(8))},'& ol li[data-list="bullet"]':{$nest:{"&:before":{content:"'\\2022'"}}},"& ol li[data-list='dashed']":{$nest:{"&:before":{content:"'-'"}}},'& ol li[data-list="ordered"]':(0,s._)((0,n._)({},c(0,"list1 list2 list3 list4 list5 list6 list7 list8")),{listStyleType:"none",$nest:(0,s._)((0,n._)({},d(0,"decimal")),{"&.ql-indent":{$nest:(0,n._)({},h(1,"lower-alpha","list2 list3 list4 list5 list6 list7 list8"),h(2,"lower-roman","list3 list4 list5 list6 list7 list8"),h(3,"decimal","list4 list5 list6 list7 list8"),h(4,"lower-alpha","list5 list6 list7 list8"),h(5,"lower-roman","list6 list7 list8"),h(6,"decimal","list7 list8"),h(7,"lower-alpha","list8"),h(8,"lower-roman","none"))}})}),[`& .${p.rtfLink}`]:{color:a.Q1.CoreBlue50,$nest:{"&:visited":{color:a.Q1.CoreBlue50}}}}},y={fontSize:r.Ks.rem(1.375),lineHeight:r.Ks.rem(2.5),$nest:{"& h1":{fontSize:r.Ks.rem(1.65),lineHeight:r.Ks.rem(3)},"& h2":{fontSize:r.Ks.rem(1.375),lineHeight:r.Ks.rem(2.5)}}},_={editorContainer:r.Ks.joinClasses([p.editorContainer,r.Ks.style(f),r.Ks.style({paddingBottom:"40vh"}),o.b.style(f)]),bigSize:r.Ks.joinClasses([p.bigSize,r.Ks.style(y),o.b.style(y)]),rtfLink:r.Ks.joinClasses([p.rtfLink])}},45181:(e,t,i)=>{i.d(t,{c:()=>b});var n=i(23988),s=i(84647),r=i(32112),o=i(84712),a=i(40734),l=i(68801),c=i(65390),d=i(65160),h=i(76005),m=i(62597),p=i(41949),u=i(34553),g=i(3016),f=i(91745),y=i(82585),_=i(7149),v=i(48779);class b{get documentText(){return this._ded.getText()}calculateStats(){return l.hq(this._getStats).then((e=>(this.recentDocumentStats.set(c.some(e)),e)))}dispose(){this._subs.dispose()}constructor(e,t,i,l,b,C){(0,n._)(this,"_ded",void 0),(0,n._)(this,"_getStats",void 0),(0,n._)(this,"rtfMode",void 0),(0,n._)(this,"saved",void 0),(0,n._)(this,"checkingState",void 0),(0,n._)(this,"asyncChecksState",void 0),(0,n._)(this,"counters",void 0),(0,n._)(this,"title",void 0),(0,n._)(this,"context",void 0),(0,n._)(this,"defaultContext",void 0),(0,n._)(this,"contextCompleteness",void 0),(0,n._)(this,"score",void 0),(0,n._)(this,"scoreStatus",void 0),(0,n._)(this,"textInfo",void 0),(0,n._)(this,"recentDocumentStats",void 0),(0,n._)(this,"documentLength",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"isDemoDocument",void 0),(0,n._)(this,"updateContext",void 0),(0,n._)(this,"updateDefaultContext",void 0),(0,n._)(this,"getCheckingForState",void 0),this._ded=l,this._getStats=b,this.rtfMode=C,this.saved=new u.B,this.checkingState=o.s.create("full"),this.asyncChecksState=o.s.create({plagiarism:"full",ai_detector:"full",writing_expert_check:"full",ai_studio:"full",audience_adapt:"full"}),this.counters=o.s.create(p.fn.group.empty),this.defaultContext=o.s.create(c.none),this.score=o.s.create(c.none),this.scoreStatus=o.s.create(c.none),this.textInfo=o.s.create(c.none),this.recentDocumentStats=o.s.create(c.none),this._subs=new g.y.Keeper,this.isDemoDocument=!0,this.updateContext=e=>{const t=!a.T0.eq.equals(this.context.get(),e);return this.context.set(e),t},this.updateDefaultContext=e=>{const t=!(0,s.pipe)((0,s.tuple)(this.defaultContext.get(),e),(0,s.tupled)(d.fP(a.T0.Default.eq.equals)),c.getOrElse(s.constFalse));return this.defaultContext.set(e),t},this.getCheckingForState=e=>e!==m.J.SpecialId.Plagiarism?this.checkingState.view((e=>({kind:p.kr.CheckingKind.Document,type:e}))):o.s.combine(this.checkingState,this.asyncChecksState.view("plagiarism"),((e,t)=>"full"===e?{kind:p.kr.CheckingKind.Document,type:e}:"idle"!==t?{kind:p.kr.CheckingKind.Plagiarism,type:t}:{kind:p.kr.CheckingKind.Document,type:e})),this.title=o.s.create(e),this.context=o.s.create(i);const k=t.length-1;this.documentLength=o.s.create({full:k,trimmed:r.E.isInsertString(t.delta)?r.E.getTrimmedInsertLength(t.delta):k}),this.contextCompleteness=this.context.view(p.AB.calculateCompleteness),this._subs.push(l.contentUpdated.pipe(f.p(h.D_.isTextMaybeWithFormatting),y.B(200),_.T((()=>l.getText())),_.T((e=>({full:e.length-1,trimmed:e.trim().length})))).subscribe(v.H9(this.documentLength)))}}},17931:(e,t,i)=>{i.d(t,{A:()=>u,F:()=>g});var n=i(83531),s=i(23988),r=i(65390),o=i(46238),a=i(84647),l=i(84712),c=i(67930),d=i(40734),h=i(63049),m=i(92832),p=i(45181);class u{_updateValue(e,t){this._changes.modify((i=>Object.assign({},i,{[e]:t})))}get template(){return this._changes.get().template}set template(e){this._updateValue("template",e)}get outcomes(){return this._changes.get().outcomes}set outcomes(e){this._updateValue("outcomes",e)}get checkedPlagiarism(){return this._changes.view("checkedPlagiarism").get()}set checkedPlagiarism(e){this._updateValue("checkedPlagiarism",e)}constructor(e){(0,s._)(this,"_changes",void 0),(0,s._)(this,"changes",void 0),this._changes=l.s.create(e),this.changes=this._changes.pipe(m.i(1))}}class g extends p.c{get isInitialRevision(){return this._doxInit.remoteDocument.isInitialRevision}downloadOriginal(e){return(0,a.pipe)(this.flush,o.map((()=>e)),o.chain(r.fold((()=>()=>this._doxApi.downloadOriginal(this.id,this._enableTrackingOnDownload)),(e=>()=>this._doxApi.downloadInFormat(this.id,e,this._enableTrackingOnDownload)))),o.map(c.F.saveToFS))()}downloadProofread(){var e=this;return(0,n._)((function*(){yield e._doxApi.downloadProofread(e.id).then(c.F.saveToFS)}))()}generateReport(e,t){var i=this;return(0,n._)((function*(){yield i._doxApi.generateReport(i.id,e,t).then(c.F.saveToFS)}))()}constructor(e,t,i,n,o,l,c,m){super(t.meta.title,t.initialDelta,(0,a.pipe)(t.meta.settings.context,r.getOrElse((()=>d.T0.unset))),i,n,c),(0,s._)(this,"id",void 0),(0,s._)(this,"_doxInit",void 0),(0,s._)(this,"_doxApi",void 0),(0,s._)(this,"_enableTrackingOnDownload",void 0),(0,s._)(this,"proofit",void 0),(0,s._)(this,"extraSettings",void 0),(0,s._)(this,"flush",void 0),this.id=e,this._doxInit=t,this._doxApi=o,this._enableTrackingOnDownload=l,this.extraSettings=new u((0,a.pipe)(this._doxInit.meta.settings.extraSettings,r.getOrElse((()=>h.O.Extra.empty)))),this.flush=()=>(this._ded.flushChanges(),this._doxInit.remoteDocument.flush()),this.isDemoDocument=t.meta.isDemoDocument,this.proofit=m(this.title)}}},29145:(e,t,i)=>{i.d(t,{N:()=>n});var n,s=i(84647),r=i(34553),o=i(91745),a=i(31206),l=i(30343),c=i(99010),d=i(5406),h=i(1224),m=i(94855),p=i(68801),u=i(35616),g=i(53745);!function(e){e.create=(e,t,i)=>{const n=h.Bx.Logging.getLogger("DOXConnector",h.y7.$.DEBUG,h.y7.I.Model.getColor("DOXConnector")),d=new r.B;return{pushChanges:t=>{i.demoMode||(n.debug("Outgoing DeltaChange to DOX",t),d.next(t),(0,s.pipe)(e.remoteDocument.pushChanges(t),m.qE((e=>{u.Xb.isNotConnectedError(e.error)?n.warn("Could not push changes to DOX",e):n.error("Error on pushing changes to DOX",e)})),p.hq).catch(s.constVoid))},changes:(0,s.pipe)(t,o.p(g.U.is("change")),a.E("change"),l.Z(e.initialDelta),c.M((e=>n.debug("Incoming Change from DOX",e)))),outgoingChanges:d}},e.Mock=e=>{var t;return{pushChanges:s.constVoid,changes:(null===(t=e)||void 0===t?void 0:t.changes)||d.w,outgoingChanges:d.w}}}(n||(n={}))},58538:(e,t,i)=>{i.d(t,{_g:()=>s,uL:()=>k,yp:()=>r});var n,s,r,o=i(83531),a=i(23988),l=i(10334),c=i(17171),d=i(66202),h=i(65390),m=i(84647),p=i(71301),u=i(84712),g=i(72297),f=i(56157),y=i(1224),_=i(68801),v=i(35679),b=i(40711),C=i(34553);!function(e){e.Querying="querying",e.SynonymsReady="ready",e.SynonymsEmpty="empty",e.SynonymApplied="applied",e.SynonymsError="error",e.SynonymsNone="none"}(n||(n={})),function(e){e.isReady=function(e){return null!==e&&e.kind===n.SynonymsReady},e.isEmpty=function(e){return null!==e&&e.kind===n.SynonymsEmpty},e.isQuerying=function(e){return null!==e&&e.kind===n.Querying},e.isApplied=function(e){return null!==e&&e.kind===n.SynonymApplied},e.defaultState={kind:n.SynonymsNone,query:{id:-1,start:-1,word:""}}}(s||(s={}));class k{query(e){var t=this;return(0,o._)((function*(){return t._log.trace("SynonymsQuery: "+e.word),t.state.set({kind:n.Querying,query:e}),_.hq(t._capi.requestSynonyms(e.start,e.word)).then((i=>{const s=p.Yr.Timestamp.now(),o=(0,m.pipe)(i.synonymsOrGroups,h.fold((()=>({kind:n.SynonymsEmpty,query:e,synonyms:{id:i.id},readyAt:s,stats:r.emptySynonymsStats,pname:i.pname})),(t=>({kind:n.SynonymsReady,query:e,synonyms:(0,c._)((0,l._)({},i),{synonymsOrGroups:t}),readyAt:s,stats:r.getSynonymsStats(t),pname:i.pname}))));return t._onResponse(o),o})).catch((i=>(t.abortQuery(),Boolean(i.message)&&-1!==i.message.indexOf("Timeout")?t._log.info("Synonyms timeout",i):t._log.warn("Error getting synonyms",i),{kind:n.SynonymsError,query:e})))}))()}abortQuery(){const e=this.state.get();s.isQuerying(e)&&this.state.set(s.defaultState)}_onResponse(e){const t=window.SQT;setTimeout((()=>{this._log.trace("_onResponse() newState: "+e);const t=this.state.get();s.isQuerying(t)&&t.query.word===e.query.word?this.state.set(e):this._log.trace("Discarding result for "+e.query.word)}),t)}applySynonym(e,t){this._log.debug(`_applySynonym(#${e.id})`);const i=e.range,s=i.start,r=i.end-i.start;this._ded.flushChanges();let o=this.positionManager.getTextLength();const a=(0,m.pipe)((new g.R).retain(s).delete(r).insert(t),b.N.getEnrichedWithFormattingDelta(this._getContent())),l=f.lY.delta(a,o),c=a.invert(this._getContent());return this.changes.next(l),d.getOrElse((e=>this._log.error("Failed to set cursor on synonym apply.",e,{position:s})))(this._ded.setCursor(s,0)),this.state.set({kind:n.SynonymApplied,target:e}),this._capi.sendFeedback({id:e.id,kind:v.Fc.SYNONYM_ACCEPTED,replacementText:t})(),this._ded.flushChanges(),o=this.positionManager.getTextLength(),{action:v.Fc.SYNONYM_ACCEPTED,replacement:t,commit:()=>{this._log.debug(`_applySynonym(#${e.id}):commit()`),e.dispose()},undo:()=>{this._log.debug(`_applySynonym(#${e.id}):undo()`);const t=this.positionManager.getTextLength();if(t===o){const e=f.lY.delta(c,t);this.changes.next(e)}else this._log.error("Text has changed while uncommitted apply is present");return e.dispose(),[]}}}ignore(e){const t=this.state.get();(s.isEmpty(t)||s.isReady(t))&&t.synonyms.id===e?this._capi.sendFeedback({id:e,kind:v.Fc.SYNONYM_DISMISSED})():this._log.error("Tried to report ignore for an unknown synonyms id",{reportedId:e,currentState:t})}constructor(e,t,i,n){(0,a._)(this,"positionManager",void 0),(0,a._)(this,"_getContent",void 0),(0,a._)(this,"_capi",void 0),(0,a._)(this,"_ded",void 0),(0,a._)(this,"state",void 0),(0,a._)(this,"changes",void 0),(0,a._)(this,"_log",void 0),this.positionManager=e,this._getContent=t,this._capi=i,this._ded=n,this.state=u.s.create(s.defaultState),this.changes=new C.B,this._log=y.Bx.Logging.getLogger("editor.SynonymsModelImpl")}}!function(e){var t=e.emptySynonymsStats={numberOfMeanings:0,numberOfSynonymsByMeanings:[],numberOfSynonymsTotal:0};const i=e=>({numberOfMeanings:1,numberOfSynonymsByMeanings:[e.length],numberOfSynonymsTotal:e.length}),n=e=>e.reduce(((e,t)=>({numberOfMeanings:e.numberOfMeanings+1,numberOfSynonymsByMeanings:[...e.numberOfSynonymsByMeanings,t.words.length],numberOfSynonymsTotal:e.numberOfSynonymsTotal+t.words.length})),t);e.getSynonymsStats=e=>(0,m.pipe)(e,d.fold(i,n));const s=(e,t)=>{const i=t.findIndex((t=>t===e));return{meaningIndex:0,synonymIndexInGroup:i,synonymIndexAbs:i}},r={meaningIndex:-1,synonymIndexInGroup:-1,synonymIndexAbs:-1};e.getSynonymStats=(e,t)=>(0,m.pipe)(t,d.fold((t=>s(e,t)),(t=>((e,t)=>t.reduce((({result:t,numberOfLookedSynonyms:i},n,r)=>{const o=s(e,n.words).synonymIndexInGroup;return o>-1?{result:{meaningIndex:r,synonymIndexInGroup:o,synonymIndexAbs:i+o},numberOfLookedSynonyms:i}:{result:t,numberOfLookedSynonyms:i+n.words.length}}),{result:r,numberOfLookedSynonyms:0}).result)(e,t)))),e.getTimeToClose=e=>(0,m.pipe)(e,(e=>p.Yr.Timestamp.subtract(p.Yr.Timestamp.now(),e)),(e=>e/1e3))}(r||(r={}))},41432:(e,t,i)=>{i.d(t,{$:()=>c});var n=i(85886),s=i(98831),r=i(11864);const o={position:"absolute",top:r.Ks.percent(40),width:r.Ks.percent(100)},a={position:"absolute",top:r.Ks.px(-9999),left:r.Ks.px(-9999),visibility:"hidden"},l=r.Ks.stylesheet({spinner:[o],wrapper:[{display:"flex",height:"var(--100vh)"}],preload:[a]});class c extends n.Component{render(){return n.createElement(d,null,n.createElement(s.n3,null))}}const d=({children:e})=>n.createElement("div",{className:l.preload},e)},63911:(e,t,i)=>{i.d(t,{K:()=>g});var n=i(23988),s=i(85886),r=i(65390),o=i(84647),a=i(56855),l=i(78674),c=i(72900),d=i(5828),h=i(13801),m=i(9506),p=i(54322);class u extends s.Component{componentDidMount(){const e=this._el.children;this.props.onElementsReady({header:e[0].outerHTML,stats:e[1].outerHTML,text:e[2].outerHTML,footer:e[3].outerHTML})}render(){const{model:e}=this.props,t=(i=e.plagiarism,(0,o.pipe)(i,r.filter((e=>e.state===l.p.PlagiarismCheckingState.CHECKED)),r.map((e=>e.sortedAlerts)),r.getOrElse((()=>[]))));var i;return s.createElement("div",{ref:e=>{null!==e&&(this._el=e)}},s.createElement(d.cA,{title:e.title}),s.createElement(d.Su,{model:e}),s.createElement("div",null,s.createElement(m._,{html:e.dedHTML,title:e.title,alerts:e.sortedAlerts,plagiarism:t}),s.createElement(h.l,{alerts:e.sortedAlerts,plagiarism:t})),s.createElement(d.ol,null))}constructor(...e){super(...e),(0,n._)(this,"_el",void 0)}}class g extends s.Component{_prepareHTML(e){return'<!doctype html><html lang="en" style="--rem: 23.8;"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Report</title><style>'+(0,p.X3)()+"</style></head>"+`<body>${e}</body></html>`}render(){const{reportViewModel:e}=this.props;return s.createElement(a.F.div,{className:c.xn.invisible},e.reportData.view((0,o.flow)(r.map((t=>s.createElement(u,{model:t,onElementsReady:({header:t,footer:i,stats:n,text:s})=>e.generateReport(this._prepareHTML(n+s),t,i)}))),r.toNullable)))}}},72900:(e,t,i)=>{i.d(t,{hz:()=>_,xn:()=>k});var n=i(11864),s=i(29120),r=i(27199),o=i(14754);const a=44*o.D,l=144*o.D,c=700*o.D,d=12*o.D,h=16*o.D,m=14*o.D,p=m+(h-m)/2-4,u=8.25*o.D,g=.6*o.D;s.b.cssRule("html",{fontSize:n.Ks.px(m)});const f="report-",y={invisible:`${f}invisible`,markBase:`${f}markBase`,markSuccess:`${f}markSuccess`,akkuratWrapper:`${f}akkuratWrapper`,content:`${f}content`,textContent:`${f}textContent`,text:`${f}text`,superscriptContainer:`${f}superscriptContainer`,superscript:`${f}superscript`,alertTableContainer:`${f}alertTableContainer`,alertTable:`${f}alertTable`,alertTableTd:`${f}alertTableTd`,alertTableTdIndex:`${f}alertTableTdIndex`,alertTableTdExample:`${f}alertTableTdExample`,alertTableTdPlagiarismSource:`${f}alertTableTdPlagiarismSource`,alertTableHighlightText:`${f}alertTableHighlightText`,separatorRemover:`${f}separatorRemover`,plagiarismLink:`${f}plagiarismLink`},_=y.superscriptContainer,v={borderBottomColor:n.Ks.important("transparent"),textDecoration:n.Ks.important("none"),fontWeight:n.Ks.important("normal"),fontStyle:n.Ks.important("normal")},b={boxSizing:"border-box",margin:"0 -8px",paddingRight:n.Ks.px(a),paddingLeft:n.Ks.px(l),width:n.Ks.px(c),$nest:{thead:{display:"table-row-group"}}},C={padding:`${n.Ks.px(11*o.D)} ${n.Ks.px(16*o.D)} ${n.Ks.px(11*o.D)} 0`,borderTop:`1px solid ${r.Q1.CoreNeutral20}`,verticalAlign:"top",fontSize:n.Ks.px(d),lineHeight:n.Ks.px(h),breakInside:"avoid",$nest:{"&:last-of-type":{paddingRight:0}}},k={akkuratWrapper:n.Ks.joinClasses([y.akkuratWrapper,s.b.style({fontWeight:"normal",fontFamily:"'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif, Arial","-webkit-font-smooting":"antialiased","-moz-osx-font-smoothing":"grayscale"})]),content:n.Ks.joinClasses([y.content,s.b.style(b)]),textContent:n.Ks.joinClasses([y.textContent,s.b.style(b,{fontSize:n.Ks.px(m),pageBreakBefore:"always"})]),text:n.Ks.joinClasses([y.text,s.b.style({lineHeight:n.Ks.px(48),$nest:{"& *":{animation:n.Ks.important("none")},"& .ql-container [class*=-placeholder]":{display:"none"},"& .ql-clipboard":{display:"none"}}})]),superscriptContainer:n.Ks.joinClasses([y.superscriptContainer,s.b.style({position:"relative",bottom:n.Ks.px(p),display:"inline-block",width:0,height:0,whiteSpace:"nowrap",fontSize:n.Ks.px(u)})]),superscript:n.Ks.joinClasses([y.superscript,s.b.style(v,{padding:`0 ${n.Ks.px(g)}`,whiteSpace:"nowrap",$nest:{"&:not(:last-child):after":{content:"','"}}})]),alertTableContainer:n.Ks.joinClasses([y.alertTableContainer,s.b.style(b,{paddingLeft:0,pageBreakBefore:"always"})]),alertTable:n.Ks.joinClasses([y.alertTable,s.b.style({width:n.Ks.percent(100),borderCollapse:"collapse",$nest:{[`& tr:first-of-type .${y.alertTableTd}`]:{borderTopWidth:0},"& [class*=-or]":{marginRight:n.Ks.px(4*o.D),marginLeft:0,fontSize:n.Ks.px(d)},"& [class*=-removeOrContainer]":{flexBasis:"auto",$nest:{"& [class*=-itemRemove]":{marginRight:n.Ks.px(4*o.D),marginBottom:0,padding:0,$nest:{"& [class*=-deleteAll]":{verticalAlign:"middle"}}},"& [class*=-itemContext]":{marginRight:n.Ks.px(4*o.D),color:r.Q1.CoreNeutral60,fontStyle:"italic",fontSize:n.Ks.px(d)}}},"& [class*=-itemOriginal], & [class*=-itemRemove]":{backgroundColor:"transparent",color:r.Q1.CoreRed50,fontSize:n.Ks.px(d),lineHeight:n.Ks.px(h),paddingLeft:0,marginBottom:0},"& [class*=-itemOriginal]":{marginRight:0},"& [class*=-itemOriginal]:after":{margin:"-5px 4px 0",color:r.Q1.CoreNeutral60,fontSize:n.Ks.px(d),lineHeight:n.Ks.px(h)},"& [class*=-itemInsert]":{margin:0,padding:0,backgroundColor:"transparent",color:r.Q1.CoreGreen60,fontSize:n.Ks.px(d),lineHeight:n.Ks.px(h)},"& [class*=-itemInsert]:not(:last-child):after":{display:"inline-block",marginRight:"4px",color:r.Q1.CoreNeutral60,content:"','",fontSize:n.Ks.px(d),lineHeight:n.Ks.px(h)},"& [class*=-replacements_labels-diff]":{fontWeight:"normal"},"& [class*=-replacements_labels-list]":{marginBottom:0}}})]),alertTableTd:n.Ks.joinClasses([y.alertTableTd,s.b.style(C)]),alertTableTdIndex:n.Ks.joinClasses([y.alertTableTdIndex,s.b.style(C,{width:n.Ks.px(l),borderTopWidth:0,color:r.Q1.CoreNeutral50,textAlign:"right"})]),alertTableTdExample:n.Ks.joinClasses([y.alertTableTdExample,s.b.style(C,{maxWidth:n.Ks.px(350*o.D)})]),alertTableTdPlagiarismSource:n.Ks.joinClasses([y.alertTableTdPlagiarismSource,s.b.style(C,{maxWidth:n.Ks.px(190*o.D),wordWrap:"break-word"})]),alertTableHighlightText:n.Ks.joinClasses([y.alertTableHighlightText,s.b.style({color:r.Q1.CoreNeutral60,fontStyle:"italic",lineHeight:n.Ks.px(h)})]),markBase:n.Ks.joinClasses([y.markBase,s.b.style({$nest:{"@media print":{borderBottomWidth:n.Ks.important(n.Ks.px(3))}}})]),markSuccess:n.Ks.joinClasses([y.markSuccess,s.b.style({$nest:{"@media print":{backgroundColor:r.Q1.CoreNeutral0}}})]),separatorRemover:n.Ks.joinClasses([y.separatorRemover,s.b.style({position:"fixed",top:0,width:n.Ks.percent(100),height:n.Ks.px(3),backgroundColor:r.Q1.CoreNeutral0})]),plagiarismLink:n.Ks.joinClasses([y.plagiarismLink,s.b.style({display:"block",color:r.Q1.CoreBlue50})]),invisible:n.Ks.joinClasses([y.invisible,n.Ks.style({position:"absolute",visibility:"hidden"})])},S=e=>({position:"fixed",left:n.Ks.px(160),zIndex:-1,width:e});s.b.cssRule("[data-vertical-underline-start]:before",S(n.Ks.px(60)),{height:n.Ks.percent(100),borderRight:`${n.Ks.px(4)} solid`,content:"' '"},{"-webkit-print-color-adjust":"exact !important"}),s.b.cssRule("[data-vertical-underline-body]",S(n.Ks.px(60))),s.b.cssRule("[data-vertical-underline-body]:after",S(n.Ks.px(60)),{height:n.Ks.percent(100),borderRight:`${n.Ks.px(4)} solid`,background:r.Q1.CoreNeutral0,content:"' '"},{"-webkit-print-color-adjust":"exact !important"}),s.b.cssRule("[data-vertical-underline-index]",v,S(n.Ks.px(55)),{height:"inherit",backgroundColor:r.Q1.CoreNeutral0,textAlign:"right",fontSize:n.Ks.px(u),lineHeight:n.Ks.px(u)},{"-webkit-print-color-adjust":"exact !important"}),s.b.cssRule("[data-vertical-underline-index]:before",{display:"block",boxSizing:"border-box",width:n.Ks.px(65),height:n.Ks.px(6),borderTop:`${n.Ks.px(6)} solid ${r.Q1.CoreNeutral0}`,content:"' '"},{"-webkit-print-color-adjust":"exact !important"}),s.b.cssRule("[data-vertical-underline-end]:after",{position:"fixed",left:0,zIndex:-1,display:"block",width:n.Ks.px(229),height:n.Ks.percent(100),background:r.Q1.CoreNeutral0,content:"' '"},{"-webkit-print-color-adjust":"exact !important"})},5828:(e,t,i)=>{i.d(t,{Su:()=>m,cA:()=>p,ol:()=>u,qq:()=>h});var n=i(85886),s=i(65390),r=i(84647),o=i(96702),a=i(83407),l=i(51770),c=i(72900),d=i(10737);const h=e=>n.createElement("div",{className:(0,a.Ly)(c.xn.akkuratWrapper,e.className),style:e.style},e.children),m=({model:e})=>n.createElement(h,{className:c.xn.content},n.createElement("div",{className:c.xn.separatorRemover}),n.createElement(d.Cc,{title:e.title,author:s.some(e.author)}),n.createElement(d.BP,{stats:e.stats}),n.createElement(d.yY,{score:e.score,critical:e.criticalIssues,advanced:e.advancedIssues}),(0,r.pipe)(e.plagiarism,s.map((e=>n.createElement(d.d6,{plagiarismData:e}))),s.toNullable),!(0,l.RI)(e.issues)&&n.createElement(d.MG,{issues:e.issues}),n.createElement(d.Y1,{stats:e.stats})),p=({title:e})=>n.createElement(h,{style:{width:"100%",marginLeft:"17.4857px",marginRight:"38.4686px",color:"#becafa",letterSpacing:"0.1px",position:"absolute",top:0}},n.createElement("div",{style:{width:144,position:"absolute",top:24,left:8}},n.createElement(o.e,{style:{height:"auto",width:120}})),n.createElement("p",{style:{position:"absolute",left:150,width:1060,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",borderBottom:"2px solid #e4e6f2",transform:"scale(0.563)",transformOrigin:"top left",paddingBottom:"21px",top:12,fontSize:"19px"}},"Report:",e)),u=()=>n.createElement(h,{style:{marginLeft:"128.8807px",marginRight:"25.4686px",width:"100%",fontSize:"19px",color:"#becafa",letterSpacing:"0.1px",lineHeight:"90px"}},n.createElement("div",{style:{position:"absolute",bottom:0,left:-65,transform:"scale(0.563)",width:1060,zIndex:1e3,borderTop:"1px solid #e4e6f2"}},"Report was generated on",(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),n.createElement("span",{style:{float:"right"}},"Page",n.createElement("span",{className:"pageNumber"}),"of",n.createElement("span",{className:"totalPages"}))))},13801:(e,t,i)=>{i.d(t,{l:()=>u});var n=i(10334),s=i(85886),r=i(66202),o=i(65390),a=i(84647),l=i(62597),c=i(26251),d=i(325),h=i(88219),m=i(72900),p=i(5828);const u=({alerts:e,plagiarism:t})=>t.length+e.length===0?null:s.createElement(p.qq,{className:m.xn.alertTableContainer},s.createElement("table",{className:m.xn.alertTable},s.createElement("tbody",null,e.map(((e,t)=>s.createElement(g,{key:e.id,alert:e,index:t}))),t.map(((t,i)=>s.createElement(f,{key:t.id,alert:t,index:i+e.length})))))),g=({alert:e,index:t})=>s.createElement("tr",null,s.createElement("td",{className:m.xn.alertTableTdIndex},t+1,"."),s.createElement("td",{className:m.xn.alertTableTdExample},(0,a.pipe)(e.content,r.fold((e=>s.createElement("span",{className:m.xn.alertTableHighlightText},_(v(e)))),(e=>s.createElement(h.gs,{replacementsLabels:e,onClick:()=>a.constVoid,layoutDensity:c.p.Density.cozy,a11yContrast:!1}))))),s.createElement("td",(0,n._)({className:m.xn.alertTableTd},d.v.renderToHtml(e.categoryHuman))),s.createElement("td",{className:m.xn.alertTableTd},l.J.OutcomeId.fromOutcomeId(e.lensId))),f=({alert:e,index:t})=>s.createElement("tr",null,s.createElement("td",{className:m.xn.alertTableTdIndex},t+1,"."),s.createElement("td",{className:m.xn.alertTableTdExample},s.createElement("span",{className:m.xn.alertTableHighlightText},_(v(e.highlightTexts)))),s.createElement("td",{className:m.xn.alertTableTdPlagiarismSource},s.createElement(b,{alert:e})),s.createElement("td",{className:m.xn.alertTableTd},l.J.OutcomeId.fromOutcomeId(e.lensId))),y=300;function _(e){return e.length>y?s.createElement(s.Fragment,null,e.substr(0,y-1),""):s.createElement(s.Fragment,null,e)}function v(e){return 1===e.length?e[0]:Array.from(new Set(e)).join("; ")}const b=({alert:e})=>s.createElement(s.Fragment,null,e.title,"web"===e.plagiarismType.source&&(0,a.pipe)(e.plagiarismType.url,o.map((e=>s.createElement("a",{href:e,className:m.xn.plagiarismLink},e))),o.toNullable))},9506:(e,t,i)=>{i.d(t,{_:()=>c});var n=i(85886),s=i(65390),r=i(72900),o=i(5828),a=i(10737),l=i(54322);const c=({html:e,title:t,alerts:i,plagiarism:l})=>n.createElement(o.qq,{className:r.xn.textContent},n.createElement(a.Cc,{title:t,author:s.none}),n.createElement(d,{alerts:i,plagiarism:l,html:e})),d=({html:e,alerts:t,plagiarism:i})=>{const s=(0,l.W4)(e,t,i);return n.createElement("div",{className:r.xn.text,dangerouslySetInnerHTML:{__html:s}})}},12109:(e,t,i)=>{i.d(t,{k5:()=>b,Y1:()=>C,UA:()=>v});var n=i(10334),s=i(17171),r=i(69384),o=i(85886),a=i(86922),l=i(11864),c=i(29120),d=i(27199),h=i(14754),m=i(82287);const p="report-sections-document_insights-",u={insightsSection:`${p}insightsSection`,insightTable:`${p}insightTable`,insightHeader:`${p}insightHeader`,insightBody:`${p}insightBody`,insightTextCell:`${p}insightTextCell`,insightTextHeader:`${p}insightTextHeader`,insightScoreCell:`${p}insightScoreCell`,insightScore:`${p}insightScore`},g={paddingRight:l.Ks.px(32*h.D),width:l.Ks.px(321*h.D)},f={width:l.Ks.px(191*h.D),verticalAlign:"top",textTransform:"lowercase"},y={insightsSection:l.Ks.joinClasses([u.insightsSection,c.b.style(m.f1,{$nest:{"&:not(:first-child)":{marginTop:l.Ks.px(24*h.D)}}})]),insightTable:l.Ks.joinClasses([u.insightTable,c.b.style(m.bi,{marginTop:l.Ks.px(24*h.D),width:l.Ks.px(512*h.D)})]),insightHeader:l.Ks.joinClasses([u.insightHeader,c.b.style({letterSpacing:0,fontWeight:"bold",fontSize:l.Ks.px(18*h.D),lineHeight:l.Ks.px(32*h.D)})]),insightBody:l.Ks.joinClasses([u.insightBody,c.b.style({color:d.Q1.CoreNeutral50,letterSpacing:l.Ks.px(.11*h.D),fontSize:l.Ks.px(13*h.D),lineHeight:l.Ks.px(20*h.D)})]),insightTextCell:l.Ks.joinClasses([u.insightTextCell,c.b.style(g)]),insightTextHeader:l.Ks.joinClasses([u.insightTextHeader,c.b.style(g,{textTransform:"capitalize"})]),insightScoreCell:l.Ks.joinClasses([u.insightScoreCell,c.b.style(f)]),insightScore:l.Ks.joinClasses([u.insightScore,c.b.style(f,{color:d.Q1.CoreBlue50,letterSpacing:l.Ks.px(-.1*h.D)})])},_=({header:e,description:t,measure:i,score:n})=>o.createElement("section",{className:y.insightsSection},o.createElement("table",{className:y.insightTable},o.createElement("tbody",null,o.createElement("tr",{className:y.insightHeader},o.createElement("td",{className:y.insightTextHeader},e),o.createElement("td",{className:y.insightScore},n)),o.createElement("tr",{className:y.insightBody},o.createElement("td",{className:y.insightTextCell},t),o.createElement("td",{className:y.insightScoreCell},i))))),v=e=>{var{score:t}=e,i=(0,r._)(e,["score"]);return o.createElement(_,(0,s._)((0,n._)({},i),{score:`${"number"!=typeof t||t<0?0:t>100?100:Math.round(t)}%`}))},b=e=>{var{score:t}=e,i=(0,r._)(e,["score"]);return o.createElement(_,(0,s._)((0,n._)({},i),{score:""+("number"!=typeof t?0:Math.round(10*t)/10)}))},C=({stats:e})=>{const t=o.useContext(a.S.Context);return o.createElement("div",null,o.createElement(v,{header:t.performance.uniqueWordsTitle,description:t.performance.report.uniqueWordsDescription,measure:t.performance.uniqueWordsTitle,score:e.uniqueWords}),o.createElement(v,{header:t.performance.rareWordsTitle,description:t.performance.rareWords,measure:t.performance.rareWordsTitle,score:e.rareWords}),o.createElement(b,{header:t.performance.wordLengthTitle,description:t.performance.report.wordLengthDescription,measure:t.performance.report.wordLengthMeasure,score:e.wordLength}),o.createElement(b,{header:t.performance.sentenceLengthTitle,description:t.performance.report.sentenceLengthDescription,measure:t.performance.report.sentenceLengthMeasure,score:e.sentenceLength}))}},10737:(e,t,i)=>{i.d(t,{Y1:()=>te.Y1,BP:()=>b,d6:()=>z,yY:()=>H,Cc:()=>u,MG:()=>ee});var n=i(85886),s=i(65390),r=i(84647),o=i(11864),a=i(29120),l=i(27199),c=i(14754);const d="report-sections-title-",h={author:`${d}author`,titleSection:`${d}titleSection`,title:`${d}title`,largeTitle:`${d}largeTitle`,mediumTitle:`${d}mediumTitle`,smallTitle:`${d}smallTitle`,titleContainer:`${d}titleContainer`},m={display:"-webkit-box",overflow:"hidden",color:l.Q1.CoreNeutral90,wordWrap:"break-word",hyphens:"auto",fontWeight:"bold","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"},p={author:o.Ks.joinClasses([h.author,a.b.style({color:l.Q1.CoreNeutral50,letterSpacing:0,fontSize:o.Ks.px(15*c.D),lineHeight:o.Ks.px(24*c.D)})]),titleSection:o.Ks.joinClasses([h.titleSection,a.b.style({marginBottom:o.Ks.px(22*c.D),pageBreakInside:"avoid"})]),title:o.Ks.joinClasses([h.title,a.b.style(m)]),largeTitle:o.Ks.joinClasses([h.largeTitle,a.b.style(m,{marginBottom:o.Ks.px(22*c.D),fontSize:o.Ks.px(28*c.D),lineHeight:o.Ks.px(40*c.D)})]),mediumTitle:o.Ks.joinClasses([h.mediumTitle,a.b.style(m,{fontSize:o.Ks.px(22*c.D),lineHeight:o.Ks.px(32*c.D)})]),smallTitle:o.Ks.joinClasses([h.smallTitle,a.b.style(m,{fontSize:o.Ks.px(18*c.D),lineHeight:o.Ks.px(32*c.D)})]),titleContainer:o.Ks.joinClasses([h.titleContainer,a.b.style({overflow:"hidden",textOverflow:"ellipsis"})])},u=({title:e,author:t})=>n.createElement("section",{className:p.titleSection},n.createElement("h1",{className:e.length<100?p.largeTitle:e.length<200?p.mediumTitle:p.smallTitle},e),(0,r.pipe)(t,s.map((e=>n.createElement("p",{className:p.author},"by ",e))),s.toNullable));var g=i(71301),f=i(82287);const y="report-sections-general_metrics-",_={generalMetricsSection:`${y}generalMetricsSection`,generalMetricsHeader:`${y}generalMetricsHeader`,metrics:`${y}metrics`},v={generalMetricsSection:o.Ks.joinClasses([_.generalMetricsSection,a.b.style(f.f1,{marginBottom:o.Ks.px(14*c.D),$nest:{"& table":{width:o.Ks.percent(100),whiteSpace:"nowrap"},"& tbody":{verticalAlign:"top"}}})]),generalMetricsHeader:o.Ks.joinClasses([_.generalMetricsHeader,a.b.style(f.Co,{margin:`${o.Ks.px(23*c.D)} 0 ${o.Ks.px(4*c.D)}`})]),metrics:o.Ks.joinClasses([_.metrics,a.b.style({color:l.Q1.CoreBlue50,letterSpacing:0,fontWeight:"bold",fontSize:o.Ks.px(15*c.D),lineHeight:o.Ks.px(23*c.D),$nest:{"& td":{width:o.Ks.percent(21.875)}}})])},b=({stats:e})=>n.createElement("section",{className:v.generalMetricsSection},n.createElement("h2",{className:v.generalMetricsHeader},"General metrics"),n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",{className:v.metrics},n.createElement("td",null,e.chars.toLocaleString("en-US")),n.createElement("td",null,e.words.toLocaleString("en-US")),n.createElement("td",null,e.sentences),n.createElement("td",null,(0,g.Xq)(e.readingTime)),n.createElement("td",null,(0,g.Xq)(e.speakingTime))),n.createElement("tr",{className:f.xn.text},n.createElement("td",null,"characters"),n.createElement("td",null,"words"),n.createElement("td",null,"sentences"),n.createElement("td",null,"reading",n.createElement("br",null),"time"),n.createElement("td",null,"speaking",n.createElement("br",null),"time")))));var C=i(90660),k=i(98831);const S=({className:e,width:t=32})=>n.createElement(k.hh,{width:t,className:e,viewBox:"0 0 33 32"},n.createElement("defs",null,n.createElement("polyline",{id:"path",points:"7.35 14.35 11.9839764 19.5363636 27.65 3.5"})),n.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(2, 2)"},n.createElement("circle",{id:"Oval",stroke:"#F1F2FA",strokeWidth:"3",cx:"14",cy:"14",r:"14"}),n.createElement("use",{stroke:"#15C39A",strokeWidth:"3",strokeLinecap:"round",xlinkHref:"#path"}))),w="report-components-radial_progress-";var x;!function(e){e.radialProgressBar=`${w}radialProgressBar`,e.radialProgressText=`${w}radialProgressText`,e.radialProgressDescription=`${w}radialProgressDescription`}(x||(x={}));const E={radialProgressBar:o.Ks.joinClasses([x.radialProgressBar,a.b.style({width:o.Ks.px(71*c.D),height:o.Ks.px(71*c.D),fontWeight:"bold",transform:`translateX(${o.Ks.px(-6*c.D)})`,fill:l.Q1.CoreNeutral90})]),radialProgressText:o.Ks.joinClasses([x.radialProgressText,a.b.style({fontSize:"20px"})]),radialProgressDescription:o.Ks.joinClasses([x.radialProgressDescription,a.b.style({fontWeight:"normal",fontSize:"11px",fill:l.Q1.CoreNeutral60})])},T=({percentage:e,colorType:t,iconSize:i,description:s})=>n.createElement(C._,{percentage:e,colorType:t,iconSize:i,description:s,theme:{radialProgressBar:E.radialProgressBar,radialProgressText:E.radialProgressText,radialProgressDescription:E.radialProgressDescription}}),A="report-sections-score-",M={scoreTable:`${A}scoreTable`,issuesSummary:`${A}issuesSummary`,issueCounters:`${A}issueCounters`,issueCounter:`${A}issueCounter`,issuesLeftBlock:`${A}issuesLeftBlock`,total:`${A}total`,score:`${A}score`,writingIssues:`${A}wrtitingIssues`,critical:`${A}critical`,advanced:`${A}advanced`},K={display:"flex",verticalAlign:"top",alignItems:"center",$nest:{"& span":{paddingLeft:o.Ks.rem(.8)}}},B={display:"inline-block"},I={scoreTable:o.Ks.joinClasses([M.scoreTable,a.b.style(f.bi,{margin:`${o.Ks.px(22*c.D)} 0 ${o.Ks.px(5*c.D)}`,$nest:{"& th":{paddingBottom:o.Ks.px(7*c.D)},[`& .${M.score}`]:{width:o.Ks.percent(43.75)},[`& .${M.writingIssues}`]:{width:o.Ks.percent(56.25)}}})]),issuesSummary:o.Ks.joinClasses([M.issuesSummary,a.b.style(f.J9,K)]),issueCounters:o.Ks.joinClasses([M.issueCounters,a.b.style(f.J9,K,{paddingTop:o.Ks.px(30*c.D),whiteSpace:"nowrap"})]),issueCounter:o.Ks.joinClasses([M.issueCounter,a.b.style({letterSpacing:o.Ks.px(.2*c.D),fontWeight:"bold",fontSize:o.Ks.px(15*c.D),lineHeight:o.Ks.px(19*c.D)})]),issuesLeftBlock:o.Ks.joinClasses([M.issuesLeftBlock,a.b.style(B)]),total:o.Ks.joinClasses([M.total,a.b.style(B,{width:o.Ks.percent(38.88),$nest:{[`& .${M.issueCounter}`]:{color:l.Q1.CoreNeutral90,letterSpacing:0,fontSize:o.Ks.px(18*c.D)}}})]),critical:o.Ks.joinClasses([M.critical,a.b.style(B,{width:o.Ks.percent(38.88),$nest:{[`& .${M.issueCounter}`]:{color:l.Q1.CoreRed40}}})]),advanced:o.Ks.joinClasses([M.advanced,a.b.style(B,{width:o.Ks.percent(22.24),$nest:{[`& .${M.issueCounter}`]:{color:l.Q1.CoreYellow60}}})]),score:o.Ks.joinClasses([M.score]),writingIssues:o.Ks.joinClasses([M.writingIssues])};function N(e){return e>85?C._.ColorType.eggBlue:e>60?C._.ColorType.dandelion:C._.ColorType.radicalRed}const $=({issues:e,className:t,text:i})=>n.createElement("div",{className:t},n.createElement("div",{className:I.issueCounter},e||n.createElement(S,null)),i),R=({critical:e,advanced:t})=>n.createElement("td",{className:I.issueCounters},n.createElement($,{className:I.total,issues:e+t,text:"Issues left"}),n.createElement($,{className:I.critical,issues:e,text:"Critical"}),n.createElement($,{className:I.advanced,issues:t,text:"Advanced"})),L=({score:e})=>n.createElement("td",null,n.createElement(T,{colorType:N(e),iconSize:C._.IconSize.pdf,percentage:e}),n.createElement("p",{className:f.xn.text},"This text scores better than ",e,"%",n.createElement("br",null),"of all texts checked by Grammarly")),F=()=>n.createElement("section",{className:f.xn.section,"data-name":"no-writing-issues"},n.createElement("table",{className:I.scoreTable},n.createElement("thead",{className:f.xn.sectionHeader},n.createElement("tr",null,n.createElement("th",{className:I.writingIssues},"Writing Issues"))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",{className:I.issuesSummary},n.createElement(S,null),n.createElement("span",null,"No issues found")))))),D=({score:e,critical:t,advanced:i})=>n.createElement("section",{className:f.xn.section,"data-name":"section-score-"+e},n.createElement("table",{className:I.scoreTable},n.createElement("thead",{className:f.xn.sectionHeader},n.createElement("tr",null,n.createElement("th",{className:I.score},"Score"),n.createElement("th",{className:I.writingIssues},"Writing Issues"))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement(L,{score:e}),n.createElement(R,{critical:t,advanced:i}))))),H=({score:e,critical:t,advanced:i})=>t||i?n.createElement(D,{score:e,critical:t,advanced:i}):n.createElement(F,null);var P=i(86922),O=i(32102),Q=i(78674);const W="report-sections-plagiarism-",V={plagiarismSection:`${W}plagiarismSection`,plagiarismSectionHeader:`${W}plagiarismSectionHeader`,original:`${W}original`,plagiarismMark:`${W}plagiarismMark`,score:`${W}score`,percent:`${W}percent`,sources:`${W}sources`,sourcesCount:`${W}sourcesCount`,scoreDescription:`${W}scoreDescription`},U={plagiarismSection:o.Ks.joinClasses([V.plagiarismSection,a.b.style(f.f1,{pageBreakAfter:"always"})]),plagiarismSectionHeader:o.Ks.joinClasses([V.plagiarismSectionHeader,a.b.style(f.Co,{margin:`${o.Ks.px(23*c.D)} 0 ${o.Ks.px(10*c.D)}`})]),original:o.Ks.joinClasses([V.original,a.b.style(f.J9,{display:"flex",alignItems:"center"})]),plagiarismMark:o.Ks.joinClasses([V.plagiarismMark,a.b.style({marginRight:o.Ks.rem(.8)})]),score:o.Ks.joinClasses([V.score,a.b.style(f.J9,{width:o.Ks.percent(21.875)})]),percent:o.Ks.joinClasses([V.percent,a.b.style({marginTop:0,width:o.Ks.px(64*c.D),textAlign:"center"})]),sources:o.Ks.joinClasses([V.sources,a.b.style(f.J9,{paddingTop:o.Ks.px(28*c.D),paddingBottom:0,width:o.Ks.percent(78.125),verticalAlign:"top"})]),sourcesCount:o.Ks.joinClasses([V.sourcesCount,a.b.style({color:l.Q1.CoreNeutral90,letterSpacing:0,fontWeight:"bold",fontSize:o.Ks.px(18*c.D),lineHeight:o.Ks.px(18*c.D)})]),scoreDescription:o.Ks.joinClasses([V.scoreDescription,a.b.style(f.J9,{paddingTop:o.Ks.px(10*c.D),whiteSpace:"pre-line"})])},z=({plagiarismData:e})=>{const t=n.useContext(P.S.Context);return n.createElement("section",{className:U.plagiarismSection,"data-name":"section-plagiarism-"+(e.state===Q.p.PlagiarismCheckingState.CHECKED?e.score:-1)},n.createElement("h2",{className:U.plagiarismSectionHeader},"Plagiarism"),e.state===Q.p.PlagiarismCheckingState.NOT_CHECKED?n.createElement("p",{className:f.xn.text},"This text hasnt been checked for plagiarism"):O.Q.isMin(e.score)?n.createElement("p",{className:U.original},n.createElement(S,{className:U.plagiarismMark}),"This text seems 100% original. Grammarly found no matching text on",n.createElement("br",null),"the Internet or in ProQuests databases."):n.createElement("table",{className:f.xn.genericTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",{className:U.score},n.createElement(T,{colorType:C._.ColorType.lightVisteria,iconSize:C._.IconSize.pdf,percentage:O.Q.prism.reverseGet(e.score),description:"%"})),n.createElement("td",{className:U.sources},n.createElement("div",{className:U.sourcesCount},e.sources),e.sources>1?"sources":"source")),n.createElement("tr",null,n.createElement("td",{colSpan:2,className:U.scoreDescription},t.performance.report.plagiarismDescription(e.score,e.sources))))))},j="report-sections-writing_issues-",q={writingIssuesSection:`${j}writingIssuesSection`,writingIssuesTable:`${j}writingIssuesTable`,issueHeader:`${j}issueHeader`,categoryAmount:`${j}categoryAmount`,issueAmount:`${j}issueAmount`,circle:`${j}circle`,oval:`${j}oval`,generalTitle:`${j}generalTitle`,issueTitle:`${j}issueTitle`,categoryTitle:`${j}categoryTitle`,fakeHeader:`${j}fakeHeader`,progressBarCell:`${j}progressBarCell`,issueProgressBar:`${j}issueProgressBar`,issueContent:`${j}issueContent`,temporaryHeader:`${j}temporaryHeader`,progressBarBg:`${j}progressBarBg`},G={marginLeft:o.Ks.px(6*c.D),width:o.Ks.px(20*c.D),height:o.Ks.px(20*c.D),borderRadius:o.Ks.px(10*c.D),background:l.Q1.CoreRed40,color:l.Q1.CoreNeutral0,textAlign:"center",fontSize:o.Ks.px(12*c.D),lineHeight:o.Ks.px(20*c.D)},Y={paddingLeft:o.Ks.px(22*c.D),width:o.Ks.px(293*c.D),color:l.Q1.CoreNeutral90,letterSpacing:0,fontSize:o.Ks.px(14*c.D),lineHeight:o.Ks.px(24*c.D)},J={writingIssuesSection:o.Ks.joinClasses([q.writingIssuesSection,a.b.style({borderTop:`1px solid ${l.Q1.CoreNeutral30}`})]),writingIssuesTable:o.Ks.joinClasses([q.writingIssuesSection,a.b.style(f.bi,{position:"relative",marginBottom:o.Ks.px(22*c.D),width:o.Ks.px(437*c.D),$nest:{"& td, & th":{verticalAlign:"top",pageBreakInside:"avoid"}}})]),issueHeader:o.Ks.joinClasses([q.issueHeader,a.b.style({pageBreakAfter:"avoid"})]),categoryAmount:o.Ks.joinClasses([q.categoryAmount,a.b.style({width:o.Ks.px(32*c.D),fontWeight:"bold",lineHeight:o.Ks.px(22*c.D)})]),issueAmount:o.Ks.joinClasses([q.issueAmount,a.b.style({paddingRight:o.Ks.px(10*c.D),color:l.Q1.CoreRed40,textAlign:"right",fontWeight:"bold",fontSize:o.Ks.px(13*c.D),lineHeight:o.Ks.px(24*c.D)})]),circle:o.Ks.joinClasses([q.circle,a.b.style(G)]),oval:o.Ks.joinClasses([q.oval,a.b.style(G,{width:o.Ks.px(24*c.D)})]),generalTitle:o.Ks.joinClasses([q.generalTitle,a.b.style(Y)]),issueTitle:o.Ks.joinClasses([q.issueTitle,a.b.style(Y,{textTransform:"lowercase",fontWeight:"normal",$nest:{"&:first-letter":{textTransform:"capitalize"}}})]),categoryTitle:o.Ks.joinClasses([q.categoryTitle,a.b.style(Y,{fontWeight:"bold"})]),fakeHeader:o.Ks.joinClasses([q.fakeHeader,a.b.style({position:"absolute",top:0,left:0,width:o.Ks.percent(100),background:l.Q1.CoreNeutral0,lineHeight:o.Ks.px(24*c.D)})]),progressBarCell:o.Ks.joinClasses([q.progressBarCell,a.b.style({width:o.Ks.px(112*c.D)})]),issueProgressBar:o.Ks.joinClasses([q.issueProgressBar,a.b.style({marginTop:o.Ks.px(12*c.D),minWidth:o.Ks.px(5*c.D),height:o.Ks.px(5*c.D),borderRadius:o.Ks.px(6*c.D),background:`linear-gradient(to right, ${l.Q1.CoreRed30}, ${l.Q1.CoreRed40})`,boxShadow:`0 0 0 ${o.Ks.px(3*c.D)} ${l.Q1.CoreNeutral0}`})]),issueContent:o.Ks.joinClasses([q.issueContent,a.b.style({pageBreakInside:"avoid"})]),temporaryHeader:o.Ks.joinClasses([q.temporaryHeader,a.b.style({pageBreakInside:"avoid"})]),progressBarBg:o.Ks.joinClasses([q.progressBarBg,a.b.style({width:o.Ks.percent(100),borderRadius:o.Ks.px(6*c.D),backgroundColor:l.Q1.CoreNeutral10})])},X=({maxIssues:e,count:t})=>{let i=t/e*100;return i>94&&i<98?i=94:i>=98&&(i=100),n.createElement("div",{className:J.progressBarBg},n.createElement("div",{className:J.issueProgressBar,style:{width:`${i}%`}}))},Z=({category:e,categoryIssues:t})=>n.createElement("tr",{className:J.temporaryHeader},n.createElement("th",{className:J.categoryAmount},n.createElement("div",{className:t>99?J.oval:J.circle},t)),n.createElement("th",{className:J.categoryTitle},e),n.createElement("th",{className:J.progressBarCell})),ee=({issues:e})=>{let t=0;return n.createElement("section",{className:J.writingIssuesSection},n.createElement("h2",{className:f.xn.sectionHeader},"Writing Issues"),Object.entries(e).map((([e,i])=>{let n=0;return{category:e,issues:Object.entries(i).map((([e,i])=>(i>t&&(t=i),n+=i,{name:e,count:i}))),issuesCount:n}})).map((({category:e,issuesCount:i,issues:s})=>n.createElement("table",{key:e,className:J.writingIssuesTable},n.createElement("thead",{className:J.issueHeader},n.createElement(Z,{category:e,categoryIssues:i})),n.createElement("tbody",null,s.map((({name:e,count:i})=>n.createElement("tr",{key:e,className:J.issueContent},n.createElement("td",{className:J.issueAmount},i),n.createElement("td",{className:J.issueTitle},e),n.createElement("td",null,n.createElement(X,{maxIssues:t,count:i}))))))))))};var te=i(12109)},82287:(e,t,i)=>{i.d(t,{Co:()=>d,J9:()=>m,bi:()=>h,f1:()=>c,xn:()=>p});var n=i(11864),s=i(29120),r=i(27199),o=i(14754);const a="report-sections-",l={section:`${a}section`,sectionHeader:`${a}sectionHeader`,genericTable:`${a}genericTable`,text:`${a}text`},c={borderTop:`1px solid ${r.Q1.CoreNeutral30}`,pageBreakInside:"avoid"},d={marginTop:n.Ks.px(24*o.D),color:r.Q1.CoreNeutral90,letterSpacing:0,fontWeight:"bold",fontSize:n.Ks.px(18*o.D),lineHeight:n.Ks.px(32*o.D)},h={width:n.Ks.percent(100),tableLayout:"fixed",textAlign:"left"},m={color:r.Q1.CoreNeutral50,letterSpacing:n.Ks.px(.11*o.D),fontSize:n.Ks.px(13*o.D),lineHeight:n.Ks.px(20*o.D)},p={section:n.Ks.joinClasses([l.section,s.b.style(c)]),sectionHeader:n.Ks.joinClasses([l.sectionHeader,s.b.style(d)]),genericTable:n.Ks.joinClasses([l.genericTable,s.b.style(h)]),text:n.Ks.joinClasses([l.text,s.b.style(m)])}},54322:(e,t,i)=>{i.d(t,{W4:()=>l,X3:()=>c});var n=i(84647),s=i(15114),r=i(889),o=i(29120),a=i(72900);function l(e,t,i){return(0,n.pipe)(e,d,h(t),m(i,t.length+1),u,(e=>e.innerHTML))}const c=()=>o.b.getStyles()+`\n.${s.Xz.markBulkApplied&&s.Xz.markBulkApplied.split(/\s/)[0]} { border-bottom-style: hidden !important }`+`\n.${s.Xz.markSelected&&s.Xz.markSelected.split(/\s/)[0]} { background-color: transparent !important }`,d=e=>{const t=document.createElement("div");return t.innerHTML=e,t},h=e=>t=>(e.reduce(function(e){return(t,i,n)=>(i.getHighlightRanges().filter(r.l.isMainView).forEach((i=>{const s=e.querySelectorAll(`[${g.MARK_ID}="${i.meta.id}"]`);if(s.length>0){const e=s[s.length-1],i=function(e,t){const i=document.createElement("span");return i.className=a.xn.superscriptContainer,i.innerHTML=`<span class="${e} ${a.xn.superscript}" data-superscript>${t+1}</span>`,i}(e.classList.value,n);e.appendChild(i),t.push(i)}})),t)}(t),[]).forEach(y),Array.from(t.querySelectorAll("span."+a.hz)).forEach(f),t),m=(e,t=0)=>i=>(e.forEach(((e,n)=>e.getHighlightRanges().filter(r.l.isMainView).forEach((e=>{const s=i.querySelectorAll(`[${g.MARK_ID}="${e.meta.id}"]`),r=(t+n).toString();s.forEach((e=>e.setAttribute(g.VERTICAL_UNDERLINE,r))),Boolean(s[0])&&(s[0].setAttribute(g.VERTICAL_START,""),p(s[0],r),s[s.length-1].setAttribute(g.VERTICAL_END,""))})))),i),p=(e,t)=>e.insertAdjacentHTML("afterbegin",`<span ${g.VERTICAL_INDEX}>${t}</span><span ${g.VERTICAL_BODY}><br /></span>`),u=e=>(e.querySelectorAll(`[${g.VERTICAL_INDEX}]`).forEach((t=>{const i=t.textContent;e.querySelectorAll(`[${g.VERTICAL_UNDERLINE}="${i}"] [${g.VERTICAL_END}]`).forEach((e=>{e.removeAttribute(g.VERTICAL_END)}))})),e);var g;function f(e,t,i){var n,s;i.length>t+1&&(n=e,s=i[t+1],n.textContent.length-function(e,t){const i=document.createRange();return i.setStartAfter(e),i.setEndBefore(t),i.toString().length}(n,s)>=0)&&function(e){e.style.width="auto",e.parentElement.insertAdjacentElement("afterend",e)}(e)}function y(e){if(e.children.length>0&&e.previousSibling){const t=Array.from(e.children);e.innerHTML="",_(e.previousSibling).concat(t).sort(((e,t)=>Number(e.textContent)-Number(t.textContent))).forEach((t=>e.appendChild(t)))}}function _(e){let t=[];return e instanceof Element?(e.matches(`[${g.MARK_ID}]`)&&e.lastElementChild&&e.lastElementChild.classList.contains(a.hz)&&(t=Array.from(e.lastElementChild.children),e.lastElementChild.remove()),e.lastElementChild?t.concat(_(e.lastElementChild)):t):t}!function(e){e.MARK_ID="data-mark-id",e.VERTICAL_UNDERLINE="data-vertical-underline",e.VERTICAL_START="data-vertical-underline-start",e.VERTICAL_BODY="data-vertical-underline-body",e.VERTICAL_END="data-vertical-underline-end",e.VERTICAL_INDEX="data-vertical-underline-index"}(g||(g={}))},14754:(e,t,i)=>{i.d(t,{D:()=>n});const n=1.7},78450:(e,t,i)=>{i.d(t,{g:()=>h});var n=i(23988),s=i(84647),r=i(1224),o=i(94855),a=i(68801),l=i(10479),c=i(99010),d=i(79937);class h{get currentPlan(){return this._model.currentPlan}get offer(){return this._model.offer}get savedPrice(){return this._model.savedPrice}get nextPaymentDate(){return this._model.nextPaymentDate}constructor(e,t,i,h){(0,n._)(this,"_model",void 0),(0,n._)(this,"_modalOperations",void 0),(0,n._)(this,"_notificationsManager",void 0),(0,n._)(this,"_telemetry",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"changePlan",void 0),(0,n._)(this,"_handleChangePlanError",void 0),(0,n._)(this,"close",void 0),this._model=e,this._modalOperations=t,this._notificationsManager=i,this._telemetry=h,this._log=r.Bx.Logging.getLogger("view.model.change.plan"),this.changePlan=()=>(this._telemetry.gnarSpec.changePlanConfirmationSwitchPlanButtonClick(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId),l.H((0,s.pipe)(this._model.changePlan,o.qE(this._handleChangePlanError),a.hq)).pipe(c.M(this.close),d.n((()=>(this._telemetry.gnarSpec.changePlanFormSuccess(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId),this._notificationsManager.enqueue("changePlanSuccess",{planName:this.offer.title}))))).toPromise()),this._handleChangePlanError=e=>{this._log.error(`Cannot change plan reason: ${e.reason}`,e.originalError);const t=r.sw.isErrorLike(e.originalError)&&e.originalError.message;this._telemetry.gnarSpec.changePlanFormFail(this._telemetry.pageId,`reason: ${e.reason}, error: ${t}`),this._notificationsManager.enqueue("error").toPromise()},this.close=()=>{this._modalOperations.onClose(),this._telemetry.gnarSpec.changePlanConfirmationCloseButtonClick(this._model.daysToRenewal,this._model.currentPlanType,this._telemetry.pageId)}}}},50983:(e,t,i)=>{i.d(t,{Gb:()=>n,_n:()=>g});var n,s,r=i(23988),o=i(84647),a=i(84712),l=i(34553),c=i(25093),d=i(79937),h=i(91745),m=i(99010),p=i(53458),u=i(47456);!function(e){let t,i,n;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions",e.intentCard="intentCard"}(i=e.Source||(e.Source={})),function(e){e.empty={mood:void 0,message:""}}(n=e.FormData||(e.FormData={}))}(n||(n={}));class g{constructor(e,t){(0,r._)(this,"_notificationsManager",void 0),(0,r._)(this,"_sendFeedback",void 0),(0,r._)(this,"currentText",void 0),(0,r._)(this,"modalShown",void 0),(0,r._)(this,"sendFeedback",void 0),this._notificationsManager=e,this._sendFeedback=t,this.currentText=a.s.create(n.FormData.empty),this.modalShown=new l.B,this.sendFeedback=()=>this.currentText.pipe(c.$(),d.n(this._sendFeedback),d.n((()=>this._notificationsManager.enqueue("feedbackSend").pipe(h.p((e=>"shown"===e)),m.M((()=>this.currentText.set(n.FormData.empty))),p.Q(this.modalShown)))),u.W((()=>this._notificationsManager.enqueue("error")))).toPromise()}}!function(e){e.Mock=class{constructor(){(0,r._)(this,"modalShown",new l.B),(0,r._)(this,"currentText",a.s.create(n.FormData.empty)),(0,r._)(this,"sendFeedback",(()=>new Promise(o.constVoid)))}}}(s||(s={}))},5731:(e,t,i)=>{i.d(t,{r:()=>f,B:()=>n});var n,s=i(85886),r=i(44869),o=i(83288),a=i(84647),l=i(84906),c=i(99002),d=i(83932),h=i(4444),m=i(92832),p=i(99010),u=i(51770),g=i(11089);!function(e){let t;!function(e){e.editor="editor",e.checksFeed="checksFeed",e.navigation="navigation",e.documentFeatures="documentFeatures",e.hideAssistant="hideAssistant",e.menu="menu",e.title="title",e.additionalActions="additionalActions",e.formatting="formatting"}(t=e.Id||(e.Id={})),e.eq=r.OW({id:c.Eq,order:l.Eq}),e.ord=(0,a.pipe)(l._k,o.contramap((0,u.Up)("order"))),e.show={show:e=>`focus-section-${e.order}-${e.id}`},e.create=e=>({id:e,order:Object.values(t).findIndex((t=>t===e))});var i=e.Context=s.createContext(d.o.invariantContent("Focus"));e.createComponent=g.a.create(i),e.initTracking=(e,t)=>e.state.pipe(h.oE,m.i(1),p.M((e=>t.gnarSpec.focusSectionSwitched(t.pageId,e.id)))).subscribe()}(n||(n={}));var f,y=i(58655);!function(e){e.create=e=>({inFocus:e.isEditorFocused.pipe(m.i(1),y.F()),updateFocus:t=>t&&requestAnimationFrame((()=>e.restoreFocus("FocusManager")))})}(f||(f={}))},55638:(e,t,i)=>{i.d(t,{Jr:()=>n,b9:()=>$});var n,s,r=i(23988),o=i(75853),a=i(65396),l=i(75238),c=i(36382),d=i(66202),h=i(44869),m=i(92802),p=i(84647),u=i(84906),g=i(24819),f=i(84712),y=i(90829),_=i(18810),v=i(65390),b=i(65160),C=i(63967),k=i(80159),S=i(91745),w=i(7149),x=i(60191),E=i(34553),T=i(3016),A=i(99010),M=i(79937),K=i(83694),B=i(48779),I=i(5406),N=i(45653);!function(e){let t;!function(e){e.Initial="Initial",e.RemovedFromCAPIMapping="Removed From CAPI Mapping",e.IdNotResolved="Id Not Resolved",e.NotFound="Not Found",e.EmptyStateOnReconnect="Empty State On Reconnect",e.NativeInlineCardContent="Native Inline Card Content"}(t=e.NoSDUIReason||(e.NoSDUIReason={}))}(n||(n={})),function(e){e.eq=h.OW({highlightIndex:u.Eq,action:o.G.eq})}(s||(s={}));class ${getInlineItemForAlert(e){const t=(0,p.pipe)(this._alertsReader.getById(e),v.chain(C.Fc.getRawId));return(0,p.pipe)(this._sduiManager.state.pipe(S.p((0,m.AU)(a.k.isEmpty))),w.T((e=>(0,p.pipe)(t,d.fromOption((()=>n.NoSDUIReason.RemovedFromCAPIMapping)),d.chain((e=>(0,p.pipe)(this._sduiManager.alertIdResolver(l.W.AlertId.from(e)),d.fromOption((()=>n.NoSDUIReason.IdNotResolved))))),d.chain((e=>(0,p.pipe)(this._inlineSDUIManager.getInlineItemForAlert(e),d.fromOption((()=>n.NoSDUIReason.NotFound))))),d.mapLeft((t=>a.k.isEmpty(e)?n.NoSDUIReason.EmptyStateOnReconnect:t))))),x.fY(d.getEq(h.ee(p.constTrue),h.w_)))}_handleSduiCardAction(e){this._sduiViewModel.sduiActionEvents.next(e.action),this._appHandling(e)}_appHandling({action:{actions:e,scope:t},highlightIndex:i}){const n=e.filter((e=>"popAssistantFeed"===e.type||"pushAssistantFeed"===e.type||"focusAssistantCard"===e.type));(0,p.pipe)(n,v.fromPredicate((e=>e.length>0)),v.map((e=>{}))),e.forEach((e=>{switch(e.type){case"nextCard":case"prevCard":case"openSettings":case"openToneDetector":case"openFeedback":case"openLearnMore":case"transition":case"openCreateSnippetModal":case"nativeOpenAssistant":case"selectAlternative":case"highlightAlert":case"closePopover":case"interactPopover":case"openPerformanceScore":case"openGrammarlyGo":case"enablePlagiarismCheck":case"disablePlagiarismCheck":case"enableWritingExpertCheck":case"disableWritingExpertCheck":case"showHighlights":case"hideHighlights":case"notify":case"switchView":case"newRevision":case"popAssistantFeed":case"focusAssistantCard":case"stopApplyingAlerts":case"upgradeToPremium":case"enableAudienceAdaptCheck":case"disableAudienceAdaptCheck":case"enableAiStudioCheck":case"disableAiStudioCheck":case"removeRoot":return;case"nativeOpenUserSatisfactionFeedback":return this._inlineCardVM.events.next({type:k.G.Type.feedbackModalOpen});case"openLink":return void(this._upgradeViewModel.shouldOpenInSessionCheckout(e.url)?this._upgradeViewModel.handleInlineSuggestionUpgradeClick(e.url):this.platformEnvironment.actions.openUrl(new _.U(e.url)));case"copyToClipboard":return this._copyToClipboard(e.text,"somethingCopied");case"pushAssistantFeed":return this._pushFeed(e,t,i);case"applyAlerts":return void this._applyAlerts(e,t);case"closeCard":return this._inlineCardVM.events.next({type:k.G.Type.closed});case"removeAlerts":return void this._removeAlerts(e,t);default:(0,g.AS)(e)}}))}_removeAlerts(e,t){(0,g.V1)(t.alertRefs.length>0,"applyAlerts actions must have alerts");const i=this._sduiManager.alertIdResolver(l.W.AlertId.from(t.alertRefs[0]));(0,p.pipe)(i,b.Mi((e=>{this._inlineCardVM.events.next({type:k.G.Type.ignored,alertId:e})})))}_applyAlerts(e,t){(0,g.V1)(t.alertRefs.length>0,"applyAlerts actions must have alerts scope");const i=this._sduiManager.alertIdResolver(l.W.AlertId.from(t.alertRefs[0]));(0,g.V1)(v.isSome(i),"alert id must resolve"),this._inlineCardVM.events.next({type:k.G.Type.applied,alertId:b.$v(i),alternativeIndex:e.alternativeIndex})}_pushFeed(e,t,i){(0,g.V1)(t.alertRefs.length>0,"pushAssistantFeed actions must have alerts scope");const n=this._sduiManager.alertIdResolver(l.W.AlertId.from(t.alertRefs[0]));(0,g.V1)(v.isSome(n),"alert id must resolve");const s=this._alertsReader.getById(b.$v(n));(0,g.V1)(v.isSome(s),"inline alert must be registered"),this._inlineCardVM.events.next({type:k.G.Type.opened,alert:{alert:N.A.fromModel(s.value),highlightIndex:i}})}dispose(){this._subs.dispose()}constructor(e,t,i,n,o,a,l,d,h){(0,r._)(this,"_sduiManager",void 0),(0,r._)(this,"_inlineSDUIManager",void 0),(0,r._)(this,"_inlineCardVM",void 0),(0,r._)(this,"_alertsReader",void 0),(0,r._)(this,"platformEnvironment",void 0),(0,r._)(this,"_copyToClipboard",void 0),(0,r._)(this,"_upgradeViewModel",void 0),(0,r._)(this,"_sduiInlineCardActions",void 0),(0,r._)(this,"_sduiViewModel",void 0),(0,r._)(this,"_focusedItem",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"events",void 0),(0,r._)(this,"handleSDUIAction",void 0),this._sduiManager=t,this._inlineSDUIManager=i,this._inlineCardVM=n,this._alertsReader=o,this.platformEnvironment=l,this._copyToClipboard=d,this._upgradeViewModel=h,this._sduiInlineCardActions=new E.B,this._focusedItem=f.s.create(v.none),this._subs=new T.y.Keeper,this.handleSDUIAction=(e,t=0)=>{this._sduiInlineCardActions.next({action:e,highlightIndex:t})},this.events=n.events,this._sduiViewModel=new c.W(e,t,new R,a,this._focusedItem.view(v.map((e=>e.id)))),this._subs.push(this._sduiInlineCardActions.pipe(x.fY(s.eq),A.M((e=>this._handleSduiCardAction(e)))).subscribe(),this._inlineCardVM.events.pipe(S.p((0,y.Ub)(k.G.isLookedAction,k.G.isCardCloseAction)),M.n((e=>k.G.isLookedAction(e)&&"card"===e.kind?this.getInlineItemForAlert(e.alertId).pipe(w.T(v.fromEither)):K.of(v.none)))).subscribe(B.H9(this._focusedItem)))}}class R{constructor(){(0,r._)(this,"feed",I.w),(0,r._)(this,"currentFeed",v.none),(0,r._)(this,"onFeedRemove",I.w),(0,r._)(this,"onFeedEmpty",I.w),(0,r._)(this,"header",I.w),(0,r._)(this,"footer",I.w),(0,r._)(this,"pushFeed",(()=>d.right(null))),(0,r._)(this,"popFeed",p.constVoid),(0,r._)(this,"focusCard",(()=>d.right(null))),(0,r._)(this,"notifyCardFocused",p.constVoid),(0,r._)(this,"dispose",p.constVoid)}}},26730:(e,t,i)=>{i.d(t,{ID:()=>U});var n=i(10334),s=i(17171),r=i(12175),o=i(90829),a=i(11864),l=i(29120),c=i(27199);const d=c.Q1.CoreGreen10,h="2px",m="1px",p="alerts-",u=r.NeutralGray10;var g;!function(e){e.markHeightStandard=`${p}markHeightStandard`,e.markHeightTall=`${p}markHeightTall`,e.markSelected=`${p}markSelected`,e.markSelectedFocused=`${p}markSelectedFocused`,e.markBase=`${p}markBase`,e.markAppliedBase=`${p}markAppliedBase`,e.markVisible=`${p}markVisible`,e.markStart=`${p}markStart`,e.correctness=`${p}correctness`,e.premium=`${p}premium`,e.clarity=`${p}clarity`,e.engagement=`${p}engagement`,e.delivery=`${p}delivery`,e.critical=`${p}critical`,e.advanced=`${p}advanced`,e.plagiarism=`${p}plagiarism`,e.originality=`${p}originality`,e.vox=`${p}vox`,e.knowledgeHub=`${p}knowledgeHub`,e.synonym=`${p}synonym`,e.markAnimated=`${p}markAnimated`,e.markHidden=`${p}markHidden`,e.markApplied=`${p}markApplied`,e.markBulkApplied=`${p}markBulkApplied`,e.markBulkAppliedAnimation=`${p}markBulkAppliedAnimation`,e.markSuccess=`${p}markSuccess`,e.noAnimation=`${p}noAnimation`,e.markVBar=`${p}markVBar`,e.markVBarHighlighted=`${p}markVBarHighlighted`,e.markWritingExpert=`${p}markWritingExpert`,e.markWritingExpertHighlighted=`${p}markWritingExpertHighlighted`}(g||(g={}));const f=`${p}custom`,y={backgroundPosition:`center calc(100% + ${h})`,backgroundRepeat:"no-repeat",contain:"layout style",$nest:{"@media print":{borderBottomWidth:"0 !important"}}},_={$nest:{"@media print":{borderBottomWidth:"3 !important"}}},v=a.Ks.keyframes({from:{backgroundSize:"100% 0"},to:{backgroundSize:"100% 12%"}}),b={standard:`calc(${a.Ks.rem(.45)} - 3px)`,tall:`calc(${a.Ks.rem(.425)} + 1px)`},C=e=>({to:{backgroundColor:e}}),k=(e,t,i,r)=>(0,s._)((0,n._)({$unique:!0},y),{paddingBottom:m,borderBottom:`${h} solid ${t}`,transition:"border-bottom-color .5s linear",$nest:(0,s._)((0,n._)({},y.$nest),{"&[data-vertical-underline-start]:before":{borderColor:i,color:i},"& > [data-vertical-underline-body]:after":{borderColor:i},"& > [data-vertical-underline-index]":{color:i},"&[data-superscript]":{padding:0,border:"none",color:i,transition:"none"},"&:not([data-superscript])":{$nest:{[`&.${g.markSelected}.${g.markHeightStandard}`]:{paddingTop:b.standard},[`&.${g.markSelected}.${g.markHeightTall}`]:{paddingTop:b.tall},[`&.${g.markSelected}`]:{$unique:!0,borderBottomColor:r,animation:`${e} 1s ease forwards`},[`&.${g.markSelectedFocused}`]:{$unique:!0,borderBottomColor:i},[`&.${g.markSelected} .${g.markBase}:not(.${g.markSelected}):not(.${g.markWritingExpert})`]:{paddingBottom:`calc(${h} + ${m})`,borderBottomStyle:"hidden"},[`&.${g.markSelectedFocused} .${g.markBase}:not(.${g.markSelected}):not(.${g.markWritingExpert})`]:{paddingBottom:`calc(${h} + ${m})`,borderBottomStyle:"hidden"}}}})}),S=a.Ks.keyframes(C(c.Q1.CoreRed10)),w=a.Ks.keyframes(C(c.Q1.CoreYellow10)),x=a.Ks.keyframes(C(c.Q1.CoreCyan10)),E=a.Ks.keyframes(C(c.Q1.CorePurple10)),T=a.Ks.keyframes(C(c.Q1.CoreNeutral10)),A=a.Ks.keyframes(C(c.Q1.CoreBlue10)),M=a.Ks.keyframes(C(c.Q1.CoreRed10)),K=a.Ks.keyframes(C(c.Q1.CoreYellow10)),B=a.Ks.keyframes(C(c.Q1.CoreBlue10)),I=a.Ks.keyframes(C(c.Q1.CoreGreen10)),N=a.Ks.keyframes(C(c.Q1.CorePurple10)),$=a.Ks.keyframes(C(c.Q1.CoreGreen10)),R=a.Ks.keyframes(C(u)),L=e=>{const t=a.Ks.color(d).fade(e).toRGBA().toString();return{borderBottomColor:t,backgroundColor:t,$nest:{[`&.${g.markHeightStandard}`]:{paddingTop:b.standard},[`&.${g.markHeightTall}`]:{paddingTop:b.tall}}}},F=e=>({borderBottomColor:"transparent",backgroundColor:a.Ks.color(d).fade(e).toRGBA().toString()}),D=a.Ks.keyframes({from:L("100%"),to:L("50%")}),H={borderBottomWidth:"2px",borderBottomColor:`${c.Q1.CoreNeutral40}`,borderBottomStyle:"dotted",backgroundColor:"transparent"},P=a.Ks.keyframes({to:(0,n._)({},L("0%"),H)}),O=a.Ks.keyframes({from:F("100%"),to:F("50%")}),Q={$nest:{[`&.${g.markHeightStandard}`]:{paddingTop:b.standard},[`&.${g.markHeightTall}`]:{paddingTop:b.tall},[`&:not(.${g.markSelected}):not(.${g.markSelectedFocused})`]:{$nest:{[`&.${g.clarity} &.${g.clarity}`]:{borderBottomStyle:"solid",borderBottomColor:c.Q1.CoreBlue50}}},[`&.${g.correctness}, &.${g.markSelected}, &.${g.markSelectedFocused}`]:{$nest:{[`.${g.markVisible}:not(.${g.markSelected}):not(.${g.markSelectedFocused}).${g.clarity} .${g.markVisible}:not(.${g.markSelected}):not(.${g.markSelectedFocused}).${g.clarity}`]:{}}},[`&.${g.clarity}`]:{$nest:{[`& & &:not(.${g.markSelected}):not(.${g.markSelectedFocused})`]:{borderBottomStyle:"hidden !important"}}}}},W={borderBottom:"0 solid transparent !important",background:"none",animation:"none"},V=e=>({position:"relative",$nest:{[`& > .${g.markVisible}:not(.${g.markSelected}):not(.${g.markSelectedFocused})`]:{borderBottomStyle:a.Ks.important("hidden")},[`&.${g.markHeightTall}`]:{paddingTop:b.tall},"&:after":{content:'"  "',position:"absolute",height:0,bottom:a.Ks.rem(-.15),right:a.Ks.rem(-.875),width:a.Ks.rem(.75),borderBottom:`${a.Ks.rem(.175)} dotted ${e}`}}}),U=(0,o.Bj)((()=>({custom(e,t){const i=a.Ks.color(e).fade(.25).toRGBA().toString(),n=a.Ks.keyframes(C(i));return[f,g.markBase,a.Ks.style(k(n,t,t,i)),l.b.style(k(n,t,t,i),_)].join(" ")},markWritingExpert:g.markWritingExpert,markWritingExpertCustom:e=>[g.markWritingExpert,g.markBase,a.Ks.style(k(e?w:R,e?c.Q1.CoreYellow30:r.Green60,e?c.Q1.CoreYellow40:r.Green60,e?c.Q1.CoreYellow10:r.BlueGray5),V(e?c.Q1.CoreYellow30:r.Green60)),l.b.style(k(e?w:R,e?c.Q1.CoreYellow30:r.Green60,e?c.Q1.CoreYellow40:r.Green60,e?c.Q1.CoreYellow10:r.Green10),V(e?c.Q1.CoreYellow30:r.Green60),_)].join(" "),markWritingExpertHighlighted:g.markWritingExpertHighlighted,markWritingExpertHighlightedCustom:e=>[g.markWritingExpertHighlighted,a.Ks.style(k(e?w:R,"transparent","transparent",e?c.Q1.CoreYellow10:u))].join(" "),markVBar:g.markVBar,markBase:[g.markBase,a.Ks.style(y),l.b.style(y,{$nest:{"@media print":{borderBottomWidth:"3 !important"}}})].join(" "),markAppliedBase:[g.markAppliedBase,g.markBase,a.Ks.style({paddingBottom:`${m}`,borderBottom:`${h} solid ${d}`})].join(" "),correctness:[g.correctness,g.markBase,a.Ks.style(k(M,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10)),l.b.style(k(M,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10),_)].join(" "),premium:[g.premium,g.markBase,a.Ks.style(k(K,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10)),l.b.style(k(K,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10),_)].join(" "),clarity:[g.clarity,g.markBase,a.Ks.style(k(B,c.Q1.CoreBlue50,c.Q1.CoreBlue50,c.Q1.CoreBlue10)),l.b.style(k(B,c.Q1.CoreBlue50,c.Q1.CoreBlue50,c.Q1.CoreBlue10),_)].join(" "),markVisible:[g.markVisible,a.Ks.style(Q),l.b.style(Q)].join(" "),engagement:[g.engagement,g.markBase,a.Ks.style(k(I,c.Q1.CoreGreen50,c.Q1.CoreGreen50,c.Q1.CoreGreen10)),l.b.style(k(I,c.Q1.CoreGreen50,c.Q1.CoreGreen50,c.Q1.CoreGreen10),_)].join(" "),delivery:[g.delivery,g.markBase,a.Ks.style(k(N,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10)),l.b.style(k(N,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10),_)].join(" "),critical:[g.critical,g.markBase,a.Ks.style(k(S,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10)),l.b.style(k(S,c.Q1.CoreRed50,c.Q1.CoreRed50,c.Q1.CoreRed10),_)].join(" "),advanced:[g.advanced,g.markBase,a.Ks.style(k(w,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10)),l.b.style(k(w,c.Q1.CoreYellow40,c.Q1.CoreYellow40,c.Q1.CoreYellow10),_)].join(" "),plagiarism:[g.plagiarism,g.markBase,a.Ks.style(k(x,c.Q1.CoreCyan50,c.Q1.CoreCyan50,c.Q1.CoreCyan10)),l.b.style(k(w,c.Q1.CoreCyan50,c.Q1.CoreCyan50,c.Q1.CoreCyan10),_)].join(" "),originality:[g.originality,g.markBase,a.Ks.style(k(E,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10)),l.b.style(k(N,c.Q1.CorePurple50,c.Q1.CorePurple50,c.Q1.CorePurple10),_)].join(" "),vox:[g.vox,g.markBase,a.Ks.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10)),l.b.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10),_)].join(" "),knowledgeHub:[g.knowledgeHub,g.markBase,a.Ks.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10)),l.b.style(k(T,c.Q1.CoreNeutral50,c.Q1.CoreNeutral50,c.Q1.CoreNeutral10),_)].join(" "),synonym:[g.synonym,g.markBase,a.Ks.style(k(A,c.Q1.CoreBlue50,"transparent",c.Q1.CoreBlue50)),l.b.style(k(A,c.Q1.CoreBlue50,"transparent",c.Q1.CoreBlue50),_)].join(" "),markAnimated:[g.markAnimated,a.Ks.style({animation:`${v} .075s ease`})].join(" "),markHidden:[g.markHidden,a.Ks.style(W),l.b.style(W)].join(" "),markBulkAppliedAnimation:[g.markBulkAppliedAnimation,g.markBase,a.Ks.style(L("100%"),H,{animation:`${D} 2s linear forwards,\n          ${P} .25s linear 2s forwards`})].join(" "),markBulkApplied:[g.markBulkApplied,g.markBase,a.Ks.style(k($,c.Q1.CoreNeutral40,c.Q1.CoreGreen10,c.Q1.CoreGreen10),H)].join(" "),markApplied:[g.markApplied,a.Ks.style(L("100%"),{animation:`${D} .25s linear forwards`})].join(" "),markSuccess:[g.markSuccess,a.Ks.style(F("100%"),{animation:`${O} .25s linear forwards`})].join(" "),noAnimation:[g.noAnimation,a.Ks.style({animationDuration:"0s !important"})].join(" "),markVBarHighlighted:[g.markVBarHighlighted,a.Ks.style({backgroundColor:"#DEF7F5",borderBottom:"solid 5px #DEF7F5",borderTop:"solid 5px #DEF7F5"})].join(" "),markSelected:g.markSelected,markSelectedFocused:g.markSelectedFocused,markHeightStandard:g.markHeightStandard,markHeightTall:g.markHeightTall,markStart:g.markStart})))},94354:(e,t,i)=>{i.d(t,{t:()=>ee});var n,s=i(23988),r=i(10334),o=i(38886),a=i(66202),l=i(13110),c=i(84647),d=i(83407),h=i(84712),m=i(90829),p=i(50650),u=i(1224),g=i(65390),f=i(65160),y=i(51770),_=i(35679),v=i(72106),b=i(55340),C=i(43585),k=i(63967),S=i(62597),w=i(889),x=i(22809),E=i(83694),T=i(7149),A=i(47456),M=i(48779),K=i(4444),B=i(93208),I=i(92832),N=i(84872),$=i(54641),R=i(60191),L=i(99010),F=i(42279),D=i(30225),H=i(3016),P=i(9079),O=i(91745),Q=i(34553),W=i(57836),V=i(25093),U=i(30295),z=i(38666),j=i(45653),q=i(78884),G=i(6019),Y=i(93584),J=i(704);!function(e){let t;!function(e){e.onYellowUnderlineHover=()=>u.Bx.TimeSeries.rootFemetrics.getMetric(J.cA.Metrics.InProductReactivation).getCounter(J.cA.MetricsActions.Hover).increment(),e.onYellowUnderlineShow=()=>u.Bx.TimeSeries.rootFemetrics.getMetric(J.cA.Metrics.InProductReactivation).getCounter(J.cA.MetricsActions.Show).increment()}(t=e.Metrics||(e.Metrics={}))}(n||(n={}));var X,Z=i(19178);!function(e){e.create=(e,t,i,n,s)=>(r,o)=>{const a=i("MarkActionFactory.create");return v.J.Change.getCreateAction({classes:t({state:o.to.visualState,isBulkApplied:k.Fc.State.isBulkApplied(a.state),range:r,isAnimated:!o.to.updateRanges&&(0,U.NM)(o),isEnclosed:n,isVBar:j.A.isVBar(a),isWritingExpert:j.A.isWritingExpertWithTeaser(a),isHidden:s&&j.A.isPremiumPreviewPlagiarism(a)}),range:r,order:e({range:r})})},e.update=(e,t,i,n,s)=>(r,o)=>{const a=i("MarkActionFactory.update");return v.J.Change.getUpdateAction({classes:t({state:o.to.visualState,isBulkApplied:k.Fc.State.isBulkApplied(a.state),range:r,isAnimated:!o.to.updateRanges&&(0,U.NM)(o),isEnclosed:n,isVBar:j.A.isVBar(a),isWritingExpert:j.A.isWritingExpertWithTeaser(a),isHidden:s&&j.A.isPremiumPreviewPlagiarism(a)}),range:r,order:e({range:r})})},e.remove=e=>v.J.Change.getRemoveAction({range:e},v.J.Change.RemoveType.partial)}(X||(X={}));class ee{dispose(){this._subs.dispose()}flush(){const e=(new Date).getTime();return this._alertList.flushAlerts(),this._marksRenderer.flush().finally((()=>{const t=(new Date).getTime()-e;this._log.info("Flush performed",{duration:t})}))}focusAlertHighlight(e){return(0,c.pipe)(this._getMarkAlert(e.alert),g.fold((()=>a.left(new Error("Cannot focus given alert"))),(t=>(t.alert.extraProperties.reactivationYellowUnderlines&&n.Metrics.onYellowUnderlineHover(),U.yl.canBeChanged()(t.markAlert)&&(k.Fc.isSuperAlert(t.alert)&&t.markAlert.scheduleForceUpdate(),t.markAlert.scheduleApply(U.zQ.highlighted),this._marksRenderer.enqueue([t.markAlert],G.m.Priority.asap)),a.right({dispose:()=>this._unfocusAlertHighlight(e)})))))}_unfocusAlertHighlight(e){(0,c.pipe)(e.alert,g.some,g.filter((e=>!(0,c.pipe)(this._highlightedAlertId,g.exists((t=>t===e.id))))),g.chain(this._getMarkAlert),g.filter((e=>!U.yl.isOrWillBe(U.zQ.hidden)(e.markAlert)&&U.yl.canBeChanged()(e.markAlert))),g.map((e=>{U.yl.isOrWillBe(U.zQ.success)(e.markAlert)?(this._handleRemovedAlerts([e.alert]),this._marksRenderer.enqueue([e.markAlert],G.m.Priority.asap)):this._marksRenderer.enqueue([e.markAlert.scheduleApply(U.zQ.visible)],G.m.Priority.asap)})))}moveCursorToHighlight(e,t){return(0,c.pipe)(this._getMarkAlert(e.alert),g.chain((t=>t.markAlert.markByIndex(e.highlightIndex))),g.chain((e=>g.fromEither(e.range()))),g.fold((()=>a.left(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:n}=this._ded.getCursor();if(0===n&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,c.pipe)(this._ded.setCursor(i,0),a.orElse((e=>(this._log.error("Failed to set cursor to highlight",e,i),a.left(e)))))}return a.right(void 0)})))}ensureAlertHighlightInViewport(e,t,i){return(0,c.pipe)(this._getVisibleMarkAlert(e.alert),g.map((e=>e.markAlert)),g.chain((t=>t.markByIndex(e.highlightIndex))),g.fold((()=>E.of(a.left(new Error("Cannot ensureAlertHighlightInViewport, because mark is None")))),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t}).pipe(T.T(a.right),A.W((e=>E.of(a.left(e))))))))}_listenFilterChange(){return(0,c.pipe)(this._filterChanges,T.T(g.some)).subscribe(M.H9(this._filterKit))}getFirstMark(){return this._alertList.state.pipe(T.T(x.A.find((e=>k.Fc.isCritical(e.alert)))),K.Kc((e=>E.of((0,c.pipe)(this._getMarkAlert(e.alert),g.chain((e=>e.markAlert.mark)))))))}_listenFilteredAlerts(){return this._filterKit.pipe(B.E(this._alertList.state),T.T((([e,t])=>{const i=(0,c.pipe)(e,g.map((e=>e.filter)));return(0,c.pipe)(t,x.A.reduce({},((e,t)=>((0,c.pipe)(i,g.map((e=>e(t.alert))),g.getOrElse(c.constTrue))&&k.Fc.isRegistered(t.alert)&&(e[t.alert.id]=t.alert),e))),(e=>g.some({filter:i,alerts:e})))}))).subscribe(M.H9(this._filteredAlerts))}_schedule(e,t){o.J_(e)&&(this._log.trace(`Schedule alerts ${e.map((e=>e.alert.id))} to ${t}`),this._marksRenderer.enqueue(e.map((e=>e.scheduleApply(t))),G.m.Priority.low))}_handleRemovedAlerts(e){(0,c.pipe)(e,o.x1((({id:e})=>(0,c.pipe)(this._marksMap.get(e),g.fromNullable,f.Mi((()=>this._marksMap.delete(e)))))),l.ci,f.Mi((e=>this._schedule(e,U.zQ.disposed))))}_handleUpdatedAlerts(e){if(!e.length)return;const t=(0,c.pipe)(this._filteredAlerts.get(),g.chain((e=>e.filter))),{activeToHandle:i,removedToHandle:n}=e.reduce(((e,i)=>(this._alertsFilterService.alertCanBeDisplayed(i)||k.Fc.isBulkApplied(i)?(0,c.pipe)(g.fromNullable(this._marksMap.get(i.id)),g.fold((()=>{(0,c.pipe)(t,g.map((e=>e(i))),g.getOrElse((()=>!0)))&&e.activeToHandle.push(i)}),(e=>{k.Fc.isLockedUIUphook(i)?e.scheduleForceUpdate():e.scheduleUpdate(),U.yl.isOrWillBe(U.zQ.success)(e)?e.scheduleApply(U.zQ.highlighted):this._marksRenderer.enqueue([e],G.m.Priority.asap)}))):(0,c.pipe)(g.fromNullable(this._marksMap.get(i.id)),g.map((t=>{i.allowUpdate&&k.Fc.isCapiDone(i)&&k.Fc.isRated(i)&&U.yl.isOrWillBe(U.zQ.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(U.zQ.success),this._marksRenderer.enqueue([t],G.m.Priority.asap)):e.removedToHandle.push(i)}))),e)),{activeToHandle:[],removedToHandle:[]});this._handleVisibleAlerts(i),this._handleRemovedAlerts(n)}_handleVisibleAlerts(e){if(o.Im(e))return;const t=e.map((e=>{if(this._marksMap.has(e.id))return this._marksMap.get(e.id);{const t=k.Fc.isSuperAlert(e)?C.OT.byAhr(this._activeAlertChanges.view((0,c.flow)(g.filter((t=>t.alert.id===e.id)),g.chain((t=>(0,c.pipe)(g.fromNullable(e.getHighlightRanges()[t.highlightIndex]),f.jw((()=>this._log.error("Alert highlight ranges do not contain a range at the given AHI",{knownHighlightRangesCount:e.getHighlightRanges().length,highlightIndex:t.highlightIndex}))))))))):C.OT.byRangeType(e),i=i=>(0,C.pY)({getMarkType:t,theme:C.rh.fromAlert(e,this._useHighHighlights,(0,Z.o)(this._suggestionsVisualMode.get()),this._lockedUIHighlightsColor)})(i),n=t=>(0,c.pipe)(this._alertsReader.getById(e.id),g.alt((()=>(Boolean(t)&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),g.some(e)))),g.map(j.A.fromModel),f.$v),s=({range:t})=>{const i=S.J.getSortOrder(e.lensType);return w.l.isEnclosingView(t())?i+1:i},r=k.Fc.hasEnclosingHighlight(e),o=new z.s(n,this._alertsService,this._alertRangeService,this.changeMarks,X.create(s,i,n,r,this._isFreeUser.get()),X.update(s,i,n,r,this._isFreeUser.get()),X.remove,this._onTransitionEnd(e));return this._marksMap.set(e.id,o),o}})).filter((e=>U.yl.isOneOf(U.zQ.initial)(e)||U.yl.isOrWillBe(U.zQ.hidden)(e)||U.yl.isOrWillBe(U.zQ.visible)(e)||U.yl.isOrWillBe(U.zQ.faded)(e)));this._schedule(t,U.zQ.visible)}_handleAcceptedAlerts(e){return(0,c.pipe)(e,o.Tj(this._getMarkAlert),o.oE,(e=>{e.length&&this._marksRenderer.enqueue(e.map((e=>e.markAlert.scheduleApply(U.zQ.applied))),G.m.Priority.immediately)}))}_rerenderAllMarksOnUnderlineModeChange(){return this._suggestionsVisualMode.pipe(I.i(1)).subscribe((()=>{const e=Array.from(this._marksMap.values());e.forEach((e=>e.scheduleForceUpdate())),this._marksRenderer.enqueue(e.map((e=>(e.scheduleForceUpdate(),e))),G.m.Priority.low)}))}_sendRenderedFeedbacksForVisibleAlerts(){const e=new WeakSet;return N.z([this._ded.viewport.pipe(T.T((e=>e.text))),K.oE(this._filteredAlerts)]).pipe(T.T((([t,i])=>Object.values(i.alerts).filter((i=>!e.has(i)&&k.Fc.isNotDisposed(i)&&k.Fc.isRegistered(i)&&(!k.Fc.isHidden(i)||k.Fc.isLockedUIAlert(i))&&this._alertMarksAreInViewport(i,t))))),$.Z((t=>{const i=t.map(((t,i)=>(e.add(t),t.extraProperties.reactivationYellowUnderlines&&n.Metrics.onYellowUnderlineShow(),R.O1(500*i).pipe(L.M((()=>{k.Fc.isNotDisposed(t)&&k.Fc.isRegistered(t)&&this._alertsService.applyFeedback(t.id,{kind:_.yp.RENDERED,subtype:k.Fc.isWithTeaser(t)?_.U3.UnderlineWithTeaser:_.U3.Inline},k.Kz.text)}))))));return F.h(...i)}))).subscribe()}_listenMarksState(){const e=e=>(0,r._)({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[]},e);return F.h(this._filteredAlerts.pipe(K.Kc((({alerts:t})=>E.of(e({hiddenMarkAlerts:Array.from(this._marksMap.values()).filter((e=>void 0===t[e.alert.id]&&U.yl.notAnyOf(U.zQ.applied,U.zQ.success)(e)&&!k.Fc.State.isBulkApplied(e.alert.state))),activeAlerts:(0,y.$r)(t)}))))),this._alertStateDiff.pipe(B.E(this._filteredAlerts),T.T((([t,i])=>(0,c.pipe)(t,p.b_.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t)=>(k.Fc.isAccepted(t.alert)?e.acceptedAlerts.push(t.alert):e.updatedAlerts.push(t.alert),e)),((e,t)=>((0,c.pipe)(i,g.chain((e=>e.filter)),g.fold((()=>e.activeAlerts.push(t.alert)),(i=>i(t.alert)&&e.activeAlerts.push(t.alert)))),e)))))))).pipe(L.M((({activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:n,hiddenMarkAlerts:s})=>(this._handleRemovedAlerts(t),this._handleUpdatedAlerts(i),this._handleVisibleAlerts(e),this._handleAcceptedAlerts(n),this._schedule(s,U.zQ.hidden),()=>this._marksRenderer.dispose()))),A.W(this._log.handler("_listenMarksState exception").error),D.L()).subscribe()}_registerInProductReactivationDynamicYellowUnderlines(){return this._alertStateDiff.pipe(T.T((e=>(0,c.pipe)(e,p.b_.reduce([],c.identity,((e,t,i)=>(t.extraProperties.reactivationYellowUnderlines&&!i.extraProperties.reactivationYellowUnderlines&&e.push(i.alert),e)),c.identity))))).pipe(L.M((e=>{this._rerenderMarksAfterSubscriptionReactivation(e)})),A.W(this._log.handler("_registerInProductReactivationDynamicYellowUnderlines exception").error),D.L()).subscribe()}_rerenderMarksAfterSubscriptionReactivation(e){o.Im(e)||e.map((e=>this._marksMap.get(e.id))).filter((e=>null!=e)).forEach((e=>e.scheduleForceUpdate()))}constructor(e,t,i,n,r,l=!1,y,_,v,C,S,A,M,K){(0,s._)(this,"_ded",void 0),(0,s._)(this,"_alertList",void 0),(0,s._)(this,"_alertsReader",void 0),(0,s._)(this,"_alertsService",void 0),(0,s._)(this,"_alertRangeService",void 0),(0,s._)(this,"_useHighHighlights",void 0),(0,s._)(this,"_marksRenderer",void 0),(0,s._)(this,"_alertsFilterService",void 0),(0,s._)(this,"_filterChanges",void 0),(0,s._)(this,"_suggestionsVisualMode",void 0),(0,s._)(this,"_activeAlertChanges",void 0),(0,s._)(this,"_isFreeUser",void 0),(0,s._)(this,"_lockedUIHighlightsColor",void 0),(0,s._)(this,"_marksMap",void 0),(0,s._)(this,"_log",void 0),(0,s._)(this,"_subs",void 0),(0,s._)(this,"_filterKit",void 0),(0,s._)(this,"_filteredAlerts",void 0),(0,s._)(this,"_alertStateDiff",void 0),(0,s._)(this,"events",void 0),(0,s._)(this,"changeMarks",void 0),(0,s._)(this,"_getMarkAlert",void 0),(0,s._)(this,"_isAlertVisible",void 0),(0,s._)(this,"_getVisibleMarkAlert",void 0),(0,s._)(this,"getMarkByAlert",void 0),(0,s._)(this,"getEnclosingMarkByAlert",void 0),(0,s._)(this,"_isHighlightInteractable",void 0),(0,s._)(this,"getAlertByMark",void 0),(0,s._)(this,"_highlightedAlertId",void 0),(0,s._)(this,"highlightAlertHighlight",void 0),(0,s._)(this,"_unhighlightAlertHighlight",void 0),(0,s._)(this,"_onTransitionEnd",void 0),(0,s._)(this,"_alertMarksAreInViewport",void 0),this._ded=e,this._alertList=t,this._alertsReader=i,this._alertsService=n,this._alertRangeService=r,this._useHighHighlights=l,this._marksRenderer=y,this._alertsFilterService=_,this._filterChanges=v,this._suggestionsVisualMode=C,this._activeAlertChanges=S,this._isFreeUser=A,this._lockedUIHighlightsColor=K,this._marksMap=new Map,this._log=u.Bx.Logging.getLogger("MarksViewModelImpl",u.y7.$.DEBUG),this._subs=new H.y.Keeper,this._filterKit=h.s.create(g.none),this._filteredAlerts=h.s.create(g.none),this._alertStateDiff=this._alertList.state.pipe(P.J(),T.T((([e,t])=>x.A.diff(e,t))),O.p((0,m.AU)(p.b_.isEmpty))),this.events=new Q.B,this.changeMarks=e=>this._ded.changeMarks(e),this._getMarkAlert=({id:e})=>(0,c.pipe)(g.fromNullable(this._marksMap.get(e)),g.filter(U.yl.notAnyOf(U.zQ.disposed)),g.chain((e=>(0,c.pipe)(this._alertsReader.getById(e.alert.id),g.map((t=>({alert:t,markAlert:e}))))))),this._isAlertVisible=e=>(0,c.pipe)(this._filterKit.get(),g.filter((t=>t.filter(e))),g.isSome),this._getVisibleMarkAlert=({id:e})=>(0,c.pipe)(this._getMarkAlert({id:e}),g.filter((e=>this._isAlertVisible(e.alert)))),this.getMarkByAlert=e=>(0,c.pipe)(this._getVisibleMarkAlert(e.alert),g.chain((t=>t.markAlert.markByIndex(e.highlightIndex)))),this.getEnclosingMarkByAlert=e=>(0,c.pipe)(this._getVisibleMarkAlert(e),g.chain((e=>e.markAlert.enclosingMark))),this._isHighlightInteractable=e=>{const t=(0,c.pipe)(g.fromNullable(this._marksMap.get(e.alert.id)),g.fold((()=>!1),(e=>U.yl.isOrWillBe(U.zQ.highlighted)(e)))),i=j.A.isVBar(e.alert);return(!(0,c.pipe)(q.z.getHighlightRange(e),g.fold((()=>!1),w.l.isEnclosingView))||t)&&!i},this.getAlertByMark=e=>(0,c.pipe)(this._alertsReader.getInteractable(w.a.fromRangeIdToAlertId(e.id)),g.filter(this._isAlertVisible),g.chain((t=>(0,c.pipe)(Y.Bm.getHighlightIndex(t,e.range()),a.map((e=>({alert:j.A.fromModel(t),highlightIndex:e}))),g.fromEither))),g.filter(this._isHighlightInteractable)),this._highlightedAlertId=g.none,this.highlightAlertHighlight=e=>(0,c.pipe)(this._getMarkAlert(e),g.map((e=>e.markAlert)),g.filter(U.yl.canBeChanged()),g.fold((()=>a.left(new Error("Cannot highlight alert"))),(t=>((0,c.pipe)(this._highlightedAlertId,f.Mi((t=>{this._log.warn("Trying to highlight alert while previously highlighted alert is not unhighlighted",{highlighted:e.id,previous:t}),this._unhighlightAlertHighlight({id:t})}))),this._highlightedAlertId=g.some(e.id),t.scheduleApply(U.zQ.highlighted),this._marksRenderer.enqueue([t],G.m.Priority.asap),a.right({dispose:()=>this._unhighlightAlertHighlight(e)}))))),this._unhighlightAlertHighlight=e=>(0,c.pipe)(e,(e=>(g.exists((t=>t===e.id))(this._highlightedAlertId)||this._log.warn("Trying to unhighlight alert but nothing is highlighted",{alertId:e.id}),this._highlightedAlertId=g.none,e)),this._getMarkAlert,g.map((e=>e.markAlert)),g.filter((e=>U.yl.canBeChanged()(e)&&!U.yl.isOrWillBe(U.zQ.hidden)(e)&&!(0,c.pipe)(this._activeAlertChanges.get(),g.exists((t=>t.alert.id===e.alert.id))))),g.map((e=>this._marksRenderer.enqueue([e.scheduleApply(U.zQ.visible)],G.m.Priority.asap)))),this._onTransitionEnd=e=>(t,i)=>{U.zQ.isApplied(t.to.visualState)&&requestAnimationFrame((()=>{(0,c.pipe)(i.mark,g.fold((()=>E.of(a.left(new Error("Cannot animate mark, as it not exists")))),(e=>(0,c.pipe)(F.h(F.h(R.O1(300).pipe(W.u(a.right((0,c.constVoid)()))),e.fromMarkEvent("animationend"),e.fromMarkEvent("animationcancel")).pipe(V.$()))))),(0,c.flow)(V.$(),T.T(a.fold((e=>(e instanceof b.C.CollapsedMarkError?this._log.debug("Cannot animate applied alert as it is collapsed",e):this._log.error("Cannot animate applied alert",e,{alertId:i.alert.id,currentState:i.state,alertInfo:{title:i.alert.title,patternName:i.alert.patternName}}),R.O1(150).pipe(T.T(c.constVoid)))),E.of))),(t=>{t.subscribe((()=>{U.yl.isOrWillBe(U.zQ.disposed)(i)?this._log.info("Alert disposed before apply animation finished"):(this.events.next({type:Y.sL.Type.AppliedAlertAnimationFinished,alert:e}),k.Fc.isBulkApplied(e)||this._handleRemovedAlerts([e]))}))}))}))},this._alertMarksAreInViewport=(e,t)=>(0,c.pipe)(this._getVisibleMarkAlert(e),g.exists((i=>(0,c.pipe)(e.getHighlightRanges(),o.Jc((e=>(0,c.pipe)(i.markAlert.markByIndex(e),g.chain((e=>(0,c.pipe)(e.getRect(),a.mapLeft((e=>this._log.warn("Cannot check if mark is in viewport",e))),g.fromEither))),g.filter((e=>e.clientRects.some((e=>d.rw.hasIntersection(e,t)))))))),o.J_)))),this._subs.push(this._listenMarksState(),this._listenFilterChange(),this._listenFilteredAlerts(),this._rerenderAllMarksOnUnderlineModeChange(),this._registerInProductReactivationDynamicYellowUnderlines()),M&&this._subs.push(this._sendRenderedFeedbacksForVisibleAlerts()),(0,m.hJ)("marksManager",this)}}!function(e){e.Mock=class{getFirstMark(){throw new Error("Method not implemented.")}flush(){return Promise.resolve()}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}constructor(){(0,s._)(this,"events",new Q.B),(0,s._)(this,"dispose",c.constVoid),(0,s._)(this,"focusAlertHighlight",(()=>a.left(new Error("Method not implemented.")))),(0,s._)(this,"highlightAlertHighlight",(()=>a.left(new Error("Method not implemented.")))),(0,s._)(this,"moveCursorToHighlight",(()=>a.left(new Error("Method not implemented."))))}}}(ee||(ee={}))},19178:(e,t,i)=>{i.d(t,{o:()=>J});var n=i(37107),s=i(26730),r=i(10334),o=i(17171),a=i(12175),l=i(90829),c=i(11864),d=i(29120),h=i(27199);const m=h.Q1.CoreGreen10,p="2px",u="1px",g="alerts1-",f=a.NeutralGray10;var y;!function(e){e.markHeightStandard=`${g}markHeightStandard`,e.markHeightTall=`${g}markHeightTall`,e.markSelected=`${g}markSelected`,e.markSelectedFocused=`${g}markSelectedFocused`,e.markBase=`${g}markBase`,e.markAppliedBase=`${g}markAppliedBase`,e.markVisible=`${g}markVisible`,e.markStart=`${g}markStart`,e.correctness=`${g}correctness`,e.premium=`${g}premium`,e.clarity=`${g}clarity`,e.engagement=`${g}engagement`,e.delivery=`${g}delivery`,e.critical=`${g}critical`,e.advanced=`${g}advanced`,e.plagiarism=`${g}plagiarism`,e.originality=`${g}originality`,e.vox=`${g}vox`,e.knowledgeHub=`${g}knowledgeHub`,e.synonym=`${g}synonym`,e.markAnimated=`${g}markAnimated`,e.markHidden=`${g}markHidden`,e.markApplied=`${g}markApplied`,e.markBulkApplied=`${g}markBulkApplied`,e.markBulkAppliedAnimation=`${g}markBulkAppliedAnimation`,e.markSuccess=`${g}markSuccess`,e.noAnimation=`${g}noAnimation`,e.markVBar=`${g}markVBar`,e.markVBarHighlighted=`${g}markVBarHighlighted`,e.markWritingExpert=`${g}writingExpert`,e.markWritingExpertHighlighted=`${g}markWritingExpertHighlighted`}(y||(y={}));const _=`${g}custom`,v={backgroundPosition:`center calc(100% + ${p})`,backgroundRepeat:"no-repeat",contain:"layout style",$nest:{"@media print":{borderBottomWidth:"0 !important"}}},b={$nest:{"@media print":{borderBottomWidth:"3 !important"}}},C=c.Ks.keyframes({from:{backgroundSize:"100% 0"},to:{backgroundSize:"100% 12%"}}),k={standard:`calc(${c.Ks.rem(.45)} - 3px)`,tall:`calc(${c.Ks.rem(.425)} + 1px)`},S=e=>({to:{backgroundColor:e}}),w=(e,t,i,n,s)=>(0,o._)((0,r._)({$unique:!0},v),{paddingBottom:u,borderBottom:`${p} ${s} ${t}`,transition:"border-bottom-color .5s linear",$nest:(0,o._)((0,r._)({},v.$nest),{"&[data-vertical-underline-start]:before":{borderColor:i,color:i},"& > [data-vertical-underline-body]:after":{borderColor:i},"& > [data-vertical-underline-index]":{color:i},"&[data-superscript]":{padding:0,border:"none",color:i,transition:"none"},"&:not([data-superscript])":{$nest:{[`&.${y.markSelected}.${y.markHeightStandard}`]:{paddingTop:k.standard},[`&.${y.markSelected}.${y.markHeightTall}`]:{paddingTop:k.tall},[`&.${y.markSelected}`]:{$unique:!0,borderBottomColor:n,animation:`${e} 1s ease forwards`},[`&.${y.markSelectedFocused}`]:{$unique:!0,borderBottomColor:i},[`&.${y.markSelected} .${y.markBase}:not(.${y.markSelected}):not(.${y.markWritingExpert})`]:{paddingBottom:`calc(${p} + ${u})`,borderBottomStyle:"hidden"},[`&.${y.markSelectedFocused} .${y.markBase}:not(.${y.markSelected}):not(.${y.markWritingExpert})`]:{paddingBottom:`calc(${p} + ${u})`,borderBottomStyle:"hidden"}}}})}),x=c.Ks.keyframes(S(h.Q1.CoreRed10)),E=c.Ks.keyframes(S(h.Q1.CoreYellow10)),T=c.Ks.keyframes(S(h.Q1.CoreCyan10)),A=c.Ks.keyframes(S(h.Q1.CorePurple10)),M=c.Ks.keyframes(S(h.Q1.CoreNeutral10)),K=c.Ks.keyframes(S(h.Q1.CoreNeutral10)),B=c.Ks.keyframes(S(h.Q1.CoreBlue10)),I=c.Ks.keyframes(S(h.Q1.CoreRed10)),N=c.Ks.keyframes(S(h.Q1.CoreYellow10)),$=c.Ks.keyframes(S(h.Q1.CoreBlue10)),R=c.Ks.keyframes(S(h.Q1.CoreGreen10)),L=c.Ks.keyframes(S(h.Q1.CorePurple10)),F=c.Ks.keyframes(S(h.Q1.CoreGreen10)),D=c.Ks.keyframes(S(f)),H=e=>{const t=c.Ks.color(m).fade(e).toRGBA().toString();return{borderBottomColor:t,backgroundColor:t,$nest:{[`&.${y.markHeightStandard}`]:{paddingTop:k.standard},[`&.${y.markHeightTall}`]:{paddingTop:k.tall}}}},P=e=>({borderBottomColor:"transparent",backgroundColor:c.Ks.color(m).fade(e).toRGBA().toString()}),O=c.Ks.keyframes({from:H("100%"),to:H("50%")}),Q={borderBottomWidth:"2px",borderBottomColor:`${h.Q1.CoreNeutral40}`,borderBottomStyle:"dotted",backgroundColor:"transparent"},W=c.Ks.keyframes({to:(0,r._)({},H("0%"),Q)}),V=c.Ks.keyframes({from:P("100%"),to:P("50%")}),U={$nest:{[`&.${y.markHeightStandard}`]:{paddingTop:k.standard},[`&.${y.markHeightTall}`]:{paddingTop:k.tall},[`&:not(.${y.markSelected}):not(.${y.markSelectedFocused})`]:{$nest:{[`&.${y.clarity} &.${y.clarity}`]:{borderBottomStyle:"solid",borderBottomColor:h.Q1.CoreBlue50}}},[`&.${y.correctness}, &.${y.markSelected}, &.${y.markSelectedFocused}`]:{$nest:{[`.${y.markVisible}:not(.${y.markSelected}):not(.${y.markSelectedFocused}).${y.clarity} .${y.markVisible}:not(.${y.markSelected}):not(.${y.markSelectedFocused}).${y.clarity}`]:{}}},[`&.${y.clarity}`]:{$nest:{[`& & &:not(.${y.markSelected}):not(.${y.markSelectedFocused})`]:{borderBottomStyle:"hidden !important"}}}}},z={borderBottom:"0 solid transparent !important",background:"none",animation:"none"},j=e=>({position:"relative",$nest:{[`& > .${y.markVisible}:not(.${y.markSelected}):not(.${y.markSelectedFocused})`]:{borderBottomStyle:c.Ks.important("hidden")},"&:after":{content:'"  "',position:"absolute",height:0,bottom:c.Ks.rem(-.15),right:c.Ks.rem(-.875),width:c.Ks.rem(.75),borderBottom:`${c.Ks.rem(.175)} dotted ${e}`}}}),q="solid",G="dashed",Y=(0,l.Bj)((()=>({custom(e,t){const i=c.Ks.color(e).fade(.25).toRGBA().toString(),n=c.Ks.keyframes(S(i));return[_,y.markBase,c.Ks.style(w(n,t,t,i,q)),d.b.style(w(n,t,t,i,q),b)].join(" ")},markWritingExpert:y.markWritingExpert,markWritingExpertCustom:e=>[y.markWritingExpert,y.markBase,c.Ks.style(w(e?E:D,e?h.Q1.CoreYellow30:a.Green60,e?h.Q1.CoreYellow40:a.Green60,e?h.Q1.CoreYellow10:a.BlueGray5,q),j(e?h.Q1.CoreYellow30:a.Green60)),d.b.style(w(e?E:D,e?h.Q1.CoreYellow30:a.Green60,e?h.Q1.CoreYellow40:a.Green60,e?h.Q1.CoreYellow10:a.Green60,q),j(e?h.Q1.CoreYellow30:a.Green60),b)].join(" "),markWritingExpertHighlighted:y.markWritingExpertHighlighted,markWritingExpertHighlightedCustom:e=>[y.markWritingExpertHighlighted,c.Ks.style(w(e?E:D,"transparent","transparent",e?h.Q1.CoreYellow10:f,q))].join(" "),markBase:[y.markBase,c.Ks.style(v),d.b.style(v,{$nest:{"@media print":{borderBottomWidth:"3 !important"}}})].join(" "),markAppliedBase:[y.markAppliedBase,y.markBase,c.Ks.style({paddingBottom:`${u}`,borderBottom:`${p} solid ${m}`})].join(" "),correctness:[y.correctness,y.markBase,c.Ks.style(w(I,h.Q1.CoreRed50,h.Q1.CoreRed50,h.Q1.CoreRed10,q)),d.b.style(w(I,h.Q1.CoreRed50,h.Q1.CoreRed50,h.Q1.CoreRed10,q),b)].join(" "),premium:[y.premium,y.markBase,c.Ks.style(w(N,h.Q1.CoreYellow40,h.Q1.CoreYellow40,h.Q1.CoreYellow10,G)),d.b.style(w(N,h.Q1.CoreYellow40,h.Q1.CoreYellow40,h.Q1.CoreYellow10,G),b)].join(" "),clarity:[y.clarity,y.markBase,c.Ks.style(w($,h.Q1.CoreBlue50,h.Q1.CoreBlue50,h.Q1.CoreBlue10,G)),d.b.style(w($,h.Q1.CoreBlue50,h.Q1.CoreBlue50,h.Q1.CoreBlue10,G),b)].join(" "),markVisible:[y.markVisible,c.Ks.style(U),d.b.style(U)].join(" "),engagement:[y.engagement,y.markBase,c.Ks.style(w(R,h.Q1.CoreGreen50,h.Q1.CoreGreen50,h.Q1.CoreGreen10,G)),d.b.style(w(R,h.Q1.CoreGreen50,h.Q1.CoreGreen50,h.Q1.CoreGreen10,G),b)].join(" "),delivery:[y.delivery,y.markBase,c.Ks.style(w(L,h.Q1.CorePurple50,h.Q1.CorePurple50,h.Q1.CorePurple10,G)),d.b.style(w(L,h.Q1.CorePurple50,h.Q1.CorePurple50,h.Q1.CorePurple10,G),b)].join(" "),critical:[y.critical,y.markBase,c.Ks.style(w(x,h.Q1.CoreRed50,h.Q1.CoreRed50,h.Q1.CoreRed10,q)),d.b.style(w(x,h.Q1.CoreRed50,h.Q1.CoreRed50,h.Q1.CoreRed10,q),b)].join(" "),advanced:[y.advanced,y.markBase,c.Ks.style(w(E,h.Q1.CoreYellow40,h.Q1.CoreYellow40,h.Q1.CoreYellow10,G)),d.b.style(w(E,h.Q1.CoreYellow40,h.Q1.CoreYellow40,h.Q1.CoreYellow10,G),b)].join(" "),plagiarism:[y.plagiarism,y.markBase,c.Ks.style(w(T,h.Q1.CoreCyan50,h.Q1.CoreCyan50,h.Q1.CoreCyan10,q)),d.b.style(w(E,h.Q1.CoreCyan50,h.Q1.CoreCyan50,h.Q1.CoreCyan10,q),b)].join(" "),originality:[y.originality,y.markBase,c.Ks.style(w(A,h.Q1.CorePurple50,h.Q1.CorePurple50,h.Q1.CorePurple10,G)),d.b.style(w(L,h.Q1.CorePurple50,h.Q1.CorePurple50,h.Q1.CorePurple10,G),b)].join(" "),vox:[y.vox,y.markBase,c.Ks.style(w(M,h.Q1.CoreNeutral50,h.Q1.CoreNeutral50,h.Q1.CoreNeutral10,G)),d.b.style(w(M,h.Q1.CoreNeutral50,h.Q1.CoreNeutral50,h.Q1.CoreNeutral10,G),b)].join(" "),knowledgeHub:[y.knowledgeHub,y.markBase,c.Ks.style(w(K,h.Q1.CoreNeutral50,h.Q1.CoreNeutral50,h.Q1.CoreNeutral10,G)),d.b.style(w(K,h.Q1.CoreNeutral50,h.Q1.CoreNeutral50,h.Q1.CoreNeutral10,G),b)].join(" "),synonym:[y.synonym,y.markBase,c.Ks.style(w(B,h.Q1.CoreBlue50,"transparent",h.Q1.CoreBlue50,q)),d.b.style(w(B,h.Q1.CoreBlue50,"transparent",h.Q1.CoreBlue50,q),b)].join(" "),markAnimated:[y.markAnimated,c.Ks.style({animation:`${C} .075s ease`})].join(" "),markHidden:[y.markHidden,c.Ks.style(z),d.b.style(z)].join(" "),markBulkAppliedAnimation:[y.markBulkAppliedAnimation,y.markBase,c.Ks.style(H("100%"),Q,{animation:`${O} 2s linear forwards, ${W} .25s linear 2s forwards`})].join(" "),markBulkApplied:[y.markBulkApplied,y.markBase,c.Ks.style(w(F,h.Q1.CoreNeutral40,h.Q1.CoreGreen10,h.Q1.CoreGreen10,q),Q)].join(" "),markApplied:[y.markApplied,c.Ks.style(H("100%"),{animation:`${O} .25s linear forwards`})].join(" "),markSuccess:[y.markSuccess,c.Ks.style(P("100%"),{animation:`${V} .25s linear forwards`})].join(" "),noAnimation:[y.noAnimation,c.Ks.style({animationDuration:"0s !important"})].join(" "),markSelected:y.markSelected,markSelectedFocused:y.markSelectedFocused,markHeightStandard:y.markHeightStandard,markHeightTall:y.markHeightTall,markStart:y.markStart,markVBar:y.markVBar,markVBarHighlighted:y.markVBarHighlighted}))),J=e=>e===n.pK.Default?(0,s.ID)():Y()},91796:(e,t,i)=>{i.d(t,{WJ:()=>H,N1:()=>P});var n=i(65390),s=i(86344),r=i(24819),o=i(1224),a=i(76005),l=i(11924),c=i(3016),d=i(99010),h=i(47456),m=i(79),p=i(74056),u=i(40884),g=i(18286),f=i(26816),y=i(10334),_=i(17171),v=i(66202),b=i(84647),C=i(5406),k=i(785),S=i(36644),w=i(98719),x=i(78747),E=i(79239);function T(e,t,i){const{appRouter:s,ded:l,downloadViewModel:c,upgradeViewModel:d,modalManager:h,notificationsManager:m,telemetry:p}=t,u=()=>i.visualState.set({type:E.VV.Collapsed}),g=e.name;switch(g){case E.m1.myGrammarly:return()=>{p.gnarSpec.backToMyGrammarlyButtonClick(p.pageId,"documentSetting"),s.navigateAndReload(k.L.routes.documents.href())};case E.m1.newDocument:return()=>{(0,S.Wd)({time:Date.now(),page:"editor",source:"editorNew"}),s.navigate(k.L.routes.new_document.href())};case E.m1.download:return()=>{u(),(0,b.pipe)(c,n.fold(b.constVoid,(e=>e.downloadOriginal())))};case E.m1.print:return()=>{u(),setTimeout(window.print,200)};case a.H2.undo:return()=>{u(),l.undo()};case a.H2.redo:return()=>{u(),l.redo()};case a.H2.cut:return()=>{u(),l.cut()};case a.H2.copy:return()=>{u(),l.copy()};case a.H2.paste:return(t,s)=>(u(),s===f.W.Source.View?m.enqueue("clipboardNotSupported",{hotkey:(0,b.pipe)(e.hotkey,n.map((e=>i.getHotkeyString(e[0]))),n.getOrElse((()=>"hotkeys")))}):C.w);case a.H2.selectAll:return()=>{u(),v.getOrElse((e=>o.Bx.Logging.getLogger("documentSettings").error(`Failed to execute 'Select all'. ${e}`)))(l.setCursor(0,l.getLastPossibleCursorPosition()))};case E.m1.editorSettings:return()=>(u(),h.show(x.uF.preferences));case E.m1.upgradeToPremium:return()=>{u(),d.handleUpgradeClick(w.YT.Place.DenaliDocument.editorDenaliDocumentSettings,{upgradeHookName:E.m1.upgradeToPremium,upgradeHookSlot:"documentSettings",upgradeHookVariant:"pro"})};case E.m1.logout:return()=>(u(),t.userAccount.features.denali.showSignOutConfirmationPopup?h.show(x.uF.signOut):t.logout());case E.m1.feedback:return()=>(u(),h.show(x.uF.feedback));case E.m1.whatsNew:return()=>(u(),h.show(x.uF.news));case E.m1.language:return b.constVoid;case E.m1.downloadLogs:return()=>(u(),h.show(x.uF.downloadLogs));case E.m1.close:case E.m1.documentHeader:case E.m1.uploadFile:case E.m1.editHeader:case E.m1.accountHeader:case E.m1.userName:case E.m1.email:case E.m1.subscription:case E.m1.support:case E.m1.privacyPolicy:case E.m1.termsOfService:case E.m1.reportABug:case E.m1.versionHistory:return u;default:return(0,r.xb)(g)}}var A=i(82094),M=i(91745),K=i(7149),B=i(30343),I=i(79937),N=i(42279),$=i(25093),R=i(57836),L=i(48779),F=i(95710);const D=()=>{const e=new Set([l.l.short]),t={active:!1,disabled:!0,hidden:!1};return[{name:a.H2.undo,hotkey:s.ci([{modifiers:e,key:"Z"}]),initialState:t,featureOnboardingId:n.none},{name:a.H2.redo,hotkey:s.ci([{modifiers:e,key:"Y"},{modifiers:new Set([l.l.short,l.l.shift]),key:"Z"}]),initialState:t,featureOnboardingId:n.none}]};function H(e){const t=new Set([l.l.short]),i={active:!1,disabled:!1,hidden:!1},o={active:!1,disabled:!0,hidden:!1},c=[{name:E.m1.close,hotkey:n.none,initialState:i,featureOnboardingId:n.none},"separator",{name:E.m1.myGrammarly,hotkey:n.none,initialState:i,featureOnboardingId:n.none},"separator",{name:E.m1.documentHeader,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.newDocument,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.uploadFile,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.download,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.print,hotkey:s.ci([{modifiers:t,key:"P"}]),initialState:i,featureOnboardingId:n.none},{name:E.m1.versionHistory,hotkey:n.none,initialState:i,featureOnboardingId:n.none},"separator",{name:E.m1.editHeader,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:a.H2.undo,hotkey:s.ci([{modifiers:t,key:"Z"}]),initialState:o,featureOnboardingId:n.none},{name:a.H2.redo,hotkey:s.ci([{modifiers:t,key:"Y"},{modifiers:new Set([l.l.short,l.l.shift]),key:"Z"}]),initialState:o,featureOnboardingId:n.none},"separator",{name:a.H2.cut,hotkey:s.ci([{modifiers:t,key:"X"}]),initialState:o,featureOnboardingId:n.none},{name:a.H2.copy,hotkey:s.ci([{modifiers:t,key:"C"}]),initialState:o,featureOnboardingId:n.none},{name:a.H2.paste,hotkey:s.ci([{modifiers:t,key:"V",source:l._.Keydown,preventDefault:!1}]),initialState:i,featureOnboardingId:n.none},{name:a.H2.selectAll,hotkey:s.ci([{modifiers:t,key:"A"}]),initialState:i,featureOnboardingId:n.none},"separator",{name:E.m1.editorSettings,hotkey:n.none,initialState:i,featureOnboardingId:n.none},"separator",{name:E.m1.accountHeader,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.userName,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.email,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.upgradeToPremium,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.language,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.subscription,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.logout,hotkey:n.none,initialState:i,featureOnboardingId:n.none},"separator",{name:E.m1.support,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.whatsNew,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.feedback,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.reportABug,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.downloadLogs,hotkey:n.none,initialState:i,featureOnboardingId:n.none},"separator",{name:E.m1.privacyPolicy,hotkey:n.none,initialState:i,featureOnboardingId:n.none},{name:E.m1.termsOfService,hotkey:n.none,initialState:i,featureOnboardingId:n.none}],d=function(e){const t=e.isPremium.get();return i=>{if(!f.W.isItem(i))return!0;const n=i.name;switch(n){case E.m1.reportABug:return e.denali.isInternalUser;case E.m1.upgradeToPremium:return!t&&!e.demoMode;case E.m1.subscription:return!e.disableAppsPromotion&&!e.demoMode&&!u.DY.isBusinessTeamMember(e.denaliUserType);case E.m1.versionHistory:return e.denali.versionHistory;case E.m1.myGrammarly:case E.m1.newDocument:case E.m1.language:case E.m1.editorSettings:case E.m1.uploadFile:case E.m1.support:case E.m1.feedback:return!e.demoMode;case E.m1.close:case E.m1.documentHeader:case E.m1.download:case E.m1.print:case E.m1.editHeader:case E.m1.accountHeader:case E.m1.userName:case E.m1.email:case E.m1.logout:case E.m1.whatsNew:case E.m1.privacyPolicy:case E.m1.termsOfService:case a.H2.undo:case a.H2.redo:case a.H2.cut:case a.H2.copy:case a.H2.paste:case a.H2.selectAll:return!0;case E.m1.downloadLogs:return e.denali.isDownloadLogsAvailable;default:return(0,r.xb)(n)}}}(e);return c.filter(d).filter(((e,t,i)=>i[t-1]!==e))}function P(e,t,i,r,v,b,k,S,w,x,P,O,Q,W,V,U){const z=new c.y.Keeper,j=r.features.denali.documentToolbar===u.Wk.documentSettings?H(r.features):P.platform===p.OH.Platform.IPAD?function(e){const t=new Set([l.l.short]),i={active:!1,disabled:!0,hidden:!1};return[...H(e),"separator",{name:a.H2.undo,hotkey:s.ci([{modifiers:t,key:"UNDO",source:l._.Input}]),initialState:i,featureOnboardingId:n.none},{name:a.H2.redo,hotkey:s.ci([{modifiers:t,key:"UNDO",source:l._.Input}]),initialState:i,featureOnboardingId:n.none}]}(r.features):D(),{viewModel:q,events:G}=(0,E.fX)(j,i,r,b,x,P,O,W,V,t,e.isEditorFocused),Y=function(e,t,i){return e.filter(f.W.isItem).reduce(((e,n)=>(0,_._)((0,y._)({},e),{[n.name]:T(n,i,t)})),{})}(j,q,{appRouter:t,ded:e,userAccount:r,downloadViewModel:k,upgradeViewModel:S,modalManager:w,notificationsManager:O,telemetry:W,logout:v}),J=f.W.toMenuEvents(e.getCursor.bind(e),G).pipe(d.M((([e,t,i])=>{e!==E.m1.upgradeToPremium?(e===E.m1.download&&W.gnarSpec.downloadDocumentButtonClick("documentMenu",W.pageId),W.gnarSpec.docSettingsEventFire(e,W.pageId,i)):g.J.create(W.gnarSpec).trackClick({pageId:W.pageId,bannerType:"upgradeToPremium",placement:"documentSettings"})}))),X=o.Bx.Logging.getLogger("documentSettings"),Z=f.W.linkEvents(J,Y).pipe(h.W(((e,t)=>(X.error("Error handling document settings event",e),t))));return z.push(Z.pipe(m.h(function(e,t,i,n,s,r){const o=i.visualState.pipe(d.M((e=>{e.type===E.VV.Expanded?t.gnarSpec.docSettingsSidebarShow(t.pageId):t.gnarSpec.docSettingsSidebarClose(t.pageId)}))),l=r.pipe(M.p(f.W.MenuEvent.StatefulViewEvent.is),K.T((e=>e.isActivated)),B.Z(!1),I.n((e=>e?C.w:F.F.listen("escape").pipe(d.M((e=>e.preventDefault())))))),c=N.h(e.contentUpdated,n.visible.pipe(M.p(Boolean)),l,s).pipe($.$());return i.visualState.pipe(M.p((e=>e.type===E.VV.Expanded)),d.M((()=>{i.itemsState.modify((0,A.rO)(((t,i)=>function(e,t,i){switch(e){case a.H2.undo:return(0,_._)((0,y._)({},t),{disabled:!i.canUndo()});case a.H2.redo:return(0,_._)((0,y._)({},t),{disabled:!i.canRedo()});case a.H2.cut:case a.H2.copy:return(0,_._)((0,y._)({},t),{disabled:a.LN.isEmpty(i.getCursor())});case a.H2.selectAll:return(0,_._)((0,y._)({},t),{disabled:i.getTextLength()<=1});default:return t}}(t,i,e)))),n.visible.set(!1)})),I.n((()=>c.pipe(d.M((()=>{i.visualState.set({type:E.VV.Collapsed})}))))),m.h(o),R.u(L.q6))}(e,W,q,Q,U,G))).subscribe(),e.dontFreezeWhen(q.visualState.view("type").view((e=>e===E.VV.Expanded)),"documentSettings")),{viewModel:q,dispose:()=>z.dispose()}}},79239:(e,t,i)=>{i.d(t,{LU:()=>o,VV:()=>n,W7:()=>r,fX:()=>N,m1:()=>s});var n,s,r,o,a=i(23988),l=i(66202),c=i(84647),d=i(24819),h=i(84712),m=i(90829),p=i(1224),u=i(65390),g=i(65160),f=i(76005),y=i(34553),_=i(48779),v=i(14553),b=i(7149),C=i(10479),k=i(99010),S=i(47456),w=i(84872),x=i(83694),E=i(22013),T=i(39812),A=i(74056),M=i(98719),K=i(17931),B=i(98969),I=i(26816);function N(e,t,i,n,s,r,o,a,l,c,d){const h=new y.B;return{viewModel:new $(e,h,t,i,n,s,r,o,a,l,c,d,i.features.inProductDiscount),events:h}}!function(e){e.Collapsed="Collapsed",e.Expanded="Expanded"}(n||(n={})),function(e){e.close="close",e.myGrammarly="myGrammarly",e.documentHeader="documentHeader",e.newDocument="newDocument",e.uploadFile="uploadFile",e.download="download",e.print="print",e.editHeader="editHeader",e.editorSettings="editorSettings",e.accountHeader="accountHeader",e.userName="userName",e.email="email",e.upgradeToPremium="upgradeToPremium",e.language="language",e.subscription="subscription",e.logout="logout",e.support="support",e.whatsNew="whatsNew",e.feedback="feedback",e.privacyPolicy="privacyPolicy",e.termsOfService="termsOfService",e.reportABug="reportABug",e.versionHistory="versionHistory",e.downloadLogs="downloadLogs"}(s||(s={})),function(e){e.uploadFile="uploadFile",e.accountHeaderLabel="accountHeaderLabel",e.languageSettings="languageSettings",e.whatsNewUpdates="whatsNewUpdates"}(r||(r={})),function(e){e.is=e=>e.type===r.languageSettings}(o||(o={}));class ${has(e){return-1!==this.items.findIndex((t=>"separator"!==t&&t.name===e))}_createViewItem(e){if(!I.W.isItem(e))return e;const t=(0,c.pipe)(e.featureOnboardingId,u.map(this._userAccount.features.denali.onboardingSeen),u.map(_.B8),u.getOrElse((()=>h.s.create(!1))));return{name:e.name,title:this._inProductDiscount.view((()=>this._getTitle(e.name))),tooltip:this._getTooltip(e.name),nestedItem:this._getNestedItem(e),active:this.itemsState.view(e.name,"active"),disabled:this.itemsState.view(e.name,"disabled"),hidden:this.itemsState.view(e.name,"hidden"),onClick:()=>{this._events.next({event:e.name,source:I.W.Source.View}),(0,c.pipe)(e.featureOnboardingId,u.filter((()=>t.get())),g.Mi(this._userAccount.features.denali.markFeatureOnboarded))},showGreenDot:(0,c.pipe)(e.featureOnboardingId,u.map(this._userAccount.features.denali.onboardingSeen),u.map(_.B8))}}_getNestedItem(e){const t=e.name;switch(t){case s.uploadFile:if(this._userAccount.features.demoMode)return u.none;const i=M.jj.$G.filter((e=>".doc"!==e&&".htm"!==e&&".html"!==e)).join(", ");return u.some(l.right({type:r.uploadFile,uploadViewModel:this._uploadViewModel,label:i}));case s.newDocument:case s.print:case f.H2.undo:case f.H2.redo:case f.H2.cut:case f.H2.copy:case f.H2.paste:case f.H2.selectAll:return(0,c.pipe)(e.hotkey,u.map((e=>l.left(this.getHotkeyString(e[0])))));case s.accountHeader:return u.some(l.right({type:r.accountHeaderLabel,brandingSet:this._userAccount.entitlements.view(u.chain(B.b.getBrandingSet))}));case s.language:return u.some(l.right({type:r.languageSettings,dialectSettings:this._settings,changeDialect:this._changeDialect,onStateChange:e=>{this._events.next({event:t,source:I.W.Source.View,isActivated:e})}}));case s.download:return this._documentModel.rtfMode===M.jj.l1.FormattingMode.on?u.some(l.left(this._textResources.documentSettings.downloadLabel)):u.none;case s.close:case s.myGrammarly:case s.documentHeader:case s.editHeader:case s.editorSettings:case s.userName:case s.email:case s.upgradeToPremium:case s.subscription:case s.logout:case s.support:case s.whatsNew:case s.feedback:case s.reportABug:case s.downloadLogs:case s.privacyPolicy:case s.termsOfService:case s.versionHistory:return u.none;default:return(0,d.xb)(t)}}_getTitle(e){const t=this._userAccount.profile.get();switch(e){case s.userName:return t.fullName;case s.email:return t.email;case s.upgradeToPremium:return this._inProductDiscount.get().isEligible?this._textResources.documentSettings.getDiscountPro:this._textResources.documentSettings.upgradeToPro;default:return this._textResources.documentSettings[e]}}_getTooltip(e){switch(e){case s.documentHeader:case s.editHeader:case s.accountHeader:case s.email:case s.userName:return u.none;default:const t=this._textResources.documentSettings;return u.some(e in t.tooltips?t.tooltips[e]:t[e])}}constructor(e,t,i,s,r,o,d,g,f,y,_,M,B){(0,a._)(this,"_scheme",void 0),(0,a._)(this,"_events",void 0),(0,a._)(this,"_textResources",void 0),(0,a._)(this,"_userAccount",void 0),(0,a._)(this,"_settings",void 0),(0,a._)(this,"_uploadViewModel",void 0),(0,a._)(this,"_environment",void 0),(0,a._)(this,"_notificationsManager",void 0),(0,a._)(this,"_telemetry",void 0),(0,a._)(this,"_documentModel",void 0),(0,a._)(this,"_appRouter",void 0),(0,a._)(this,"_isEditorFocused",void 0),(0,a._)(this,"_inProductDiscount",void 0),(0,a._)(this,"itemsState",void 0),(0,a._)(this,"visualState",void 0),(0,a._)(this,"items",void 0),(0,a._)(this,"head",void 0),(0,a._)(this,"hasNewItems",void 0),(0,a._)(this,"getHotkeyString",void 0),(0,a._)(this,"getBindings",void 0),(0,a._)(this,"onMenuHovered",void 0),(0,a._)(this,"onGoBackToGrammarlyHome",void 0),(0,a._)(this,"onOpenToolbar",void 0),(0,a._)(this,"_changeDialect",void 0),this._scheme=e,this._events=t,this._textResources=i,this._userAccount=s,this._settings=r,this._uploadViewModel=o,this._environment=d,this._notificationsManager=g,this._telemetry=f,this._documentModel=y,this._appRouter=_,this._isEditorFocused=M,this._inProductDiscount=B,this.visualState=h.s.create({type:n.Collapsed}),this.items=[],this.getHotkeyString=E.L.HotkeyOptions.toString(this._environment.has(A.OH.Flag.isAppleSystem)),this.getBindings=(0,c.pipe)(this._scheme,I.W.Scheme.toBindingProvider((e=>this._events.next(e)),(()=>this._isEditorFocused.pipe(v.z(this.visualState.pipe(b.T((e=>e.type===n.Expanded))),m.or))))),this.onMenuHovered=()=>{this._documentModel instanceof K.F&&this._documentModel.flush().catch((e=>p.Bx.Logging.getLogger("documentSettings").error("Could not flush document from toolbar",e)))},this.onGoBackToGrammarlyHome=()=>{this._telemetry.gnarSpec.backToMyGrammarlyButtonClick(this._telemetry.pageId,"inline"),this._appRouter.navigateAndReload(T.Lz.routes.documents.href())},this.onOpenToolbar=()=>{this.visualState.set({type:n.Expanded,scrollTo:u.none})},this._changeDialect=e=>C.H(this._settings.setDialect(e)).pipe(k.M((()=>{(0,c.pipe)(this._environment.actions.dialectChanged(),l.mapLeft((e=>{p.Bx.Logging.getLogger("documentSettings").error("env error during dialect change",e)}))),this._telemetry.gnarSpec.docSettingsLanguageEventFire(e,this._telemetry.pageId)})),S.W((e=>(p.Bx.Logging.getLogger("documentSettings").error("Cannot set language preferences",e),this._notificationsManager.enqueue("error"))))).toPromise(),this.itemsState=h.s.create(e.filter(I.W.isItem).reduce(((e,t)=>(e[t.name]=t.initialState,e)),{}));const[N,...$]=e.map((e=>this._createViewItem(e)));this.head=N,this.items=$,this.hasNewItems=w.z($.map((e=>(0,c.pipe)(e,u.fromPredicate(I.W.Item.isViewItem),u.chain((e=>e.showGreenDot)),u.getOrElse((()=>x.of(!1))))))).pipe(b.T((e=>e.some(Boolean))))}}},1404:(e,t,i)=>{i.d(t,{W:()=>n});var n,s=i(44869),r=i(84647),o=i(24819),a=i(84712),l=i(90829),c=i(1224),d=i(32891),h=i(66202),m=i(73328),p=i(65390),u=i(65160),g=i(76005),f=i(7432),y=i(7149),_=i(34553),v=i(3016),b=i(98324),C=i(60191),k=i(79937),S=i(83694),w=i(30343),x=i(42279),E=i(5406),T=i(47456),A=i(48779),M=i(95710);!function(e){let t,i,n,K,B,I;!function(e){e.EditingMode="EditingMode",e.ReadMode="ReadMode"}(t=e.VisualState||(e.VisualState={})),function(e){e.is=e=>e.visualState===t.EditingMode}(i||(i={})),function(e){e.is=e=>e.type!==K.Type.Close&&e.type!==K.Type.ApplyRemove&&e.type!==K.Type.ApplyChange}(n||(n={})),function(e){let i,n,s;!function(e){e.SwitchToReadMode="SwitchToReadMode",e.SwitchToEditMode="SwitchToEditMode",e.ApplyChange="ApplyChange",e.ApplyRemove="ApplyRemove",e.Close="Close"}(i=e.Type||(e.Type={})),function(e){e.is=e=>e.type===K.Type.SwitchToReadMode}(n=e.SwitchToReadMode||(e.SwitchToReadMode={})),function(e){e.create=function(e,t,i){return(0,r.pipe)(e,d.e,h.bimap((()=>{}),(e=>({type:K.Type.ApplyChange,url:e,textRange:t,rect:i}))))}}(s=e.ApplyChange||(e.ApplyChange={})),e.initMapFromState=function(e){return t=>{const i=e.getFormatting(t.range);if(g.M_.LinkPayload.is(i)){const e=i[g.M_.Type.link],{rect:n,url:s,range:r}=e[0];return"selection"===t.source?{type:K.Type.SwitchToReadMode,textRange:r,rect:n,url:s}:{type:K.Type.SwitchToEditMode,textRange:r,rect:n,url:s}}{(0,o.V1)("toolbar"===t.source,"non-toolbar source can not emit ranges without link formatting");const i=(0,r.pipe)(e.getSelectionRect(),h.fold((()=>{throw new o.zU("Failed to get selection rect while trying to add link")}),r.identity));return{type:K.Type.SwitchToEditMode,textRange:t.range,rect:i,url:""}}}},e.initHandlers=function(e,t,i){const n=()=>m.zb((()=>i.next()));return i=>{switch(i.type){case K.Type.SwitchToEditMode:return e.setCursor(i.textRange.start,f.vY.size(i.textRange));case K.Type.SwitchToReadMode:return h.right(void 0);case K.Type.ApplyChange:return(0,r.pipe)(t.removeLink(i.textRange),h.chain((()=>f.vY.isEmpty(i.textRange)?(0,r.pipe)(t.insertLinkWithCaption(i.textRange.start,i.url,i.url),h.chain((()=>e.setCursor(i.textRange.start+i.url.length,f.vY.size(i.textRange))))):t.insertLink(i.textRange,i.url))));case K.Type.ApplyRemove:return(0,r.pipe)(n(),h.chain((()=>t.removeLink(i.textRange))),h.chain((()=>e.setCursor(i.textRange.start,0))));case K.Type.Close:return n();default:return(0,o.xb)(i)}}},e.initMapToView=function(e){return i=>{const n=()=>e.next({type:K.Type.Close});switch(i.type){case K.Type.SwitchToEditMode:const s=a.s.create(i.url);return{visualState:t.EditingMode,rect:i.rect,inputContent:s,isValid:s.view(l.z2),textRange:i.textRange,close:n,apply:()=>{(0,r.pipe)(K.ApplyChange.create(s.get(),i.textRange,i.rect),h.fold(n,(t=>e.next(t))))}};case K.Type.SwitchToReadMode:return{visualState:t.ReadMode,url:i.url,rect:i.rect,textRange:i.textRange,close:n,remove:()=>e.next({type:K.Type.ApplyRemove,textRange:i.textRange}),change:()=>e.next({type:K.Type.SwitchToEditMode,url:i.url,rect:i.rect,textRange:i.textRange})};default:return(0,o.xb)(i)}}}}(K||(K={})),function(e){e.eq=(0,s.ee)(((e,t)=>e.source===t.source&&f.vY.ord.equals(e.range,t.range)))}(B=e.LinkState||(e.LinkState={})),function(e){e.listenCloseHotkey=function(){return M.F.listen("escape").pipe(y.T((0,r.constant)({type:K.Type.Close})))},e.listenApplyHotkey=function(e){return M.F.listen("enter").pipe(y.T((()=>{const t=(0,r.pipe)(e.get(),p.filter(i.is));(0,o.V1)(p.isSome(t),"Called Apply when view wasn't in edit mode");const n=u.$v(t);return(0,r.pipe)(K.ApplyChange.create(n.inputContent.get(),n.textRange,n.rect),h.fold((()=>({type:K.Type.Close})),(e=>e)))})))}}(I||(I={})),e.createManager=function(e,i,s){const o=a.s.create(p.none),l=new _.B,d=K.initMapFromState(e),m=K.initMapToView(l),u=K.initHandlers(e,i,s.closeLinks),g=c.Bx.Logging.getLogger("formattingLinksManager"),f=new v.y.Keeper;return f.push(e.dontFreezeWhen(o.view(p.exists((({visualState:e})=>e===t.EditingMode))),"links"),s.formattingLinkState.pipe(b.s((0,r.flow)(p.filter((e=>"selection"===e.source)),p.fold((()=>0),(()=>200)),C.O1)),k.n(p.fold((()=>S.of(p.none)),(e=>l.pipe(w.Z(d(e)),k.n((e=>x.h(S.of(e),I.listenCloseHotkey(),e.type===K.Type.SwitchToEditMode?I.listenApplyHotkey(o):E.w))),k.n((e=>(0,r.pipe)(u(e),h.fold((e=>(g.error("Error in formatting links",e),s.closeLinks.next(),E.w)),(()=>n.is(e)?S.of(e):E.w))))),y.T(m),y.T(p.some))))),T.W((e=>(g.error("Error in formatting links",e),E.w)))).subscribe(A.H9(o))),{visualState:o,dispose:()=>f.dispose()}}}(n||(n={}))},80019:(e,t,i)=>{i.d(t,{Ht:()=>n,hn:()=>B,uY:()=>I});var n,s=i(23988),r=i(10334),o=i(17171),a=i(66202),l=i(65390),c=i(86344),d=i(48928),h=i(84647),m=i(24819),p=i(84712),u=i(90829),g=i(1224),f=i(76005),y=i(11924),_=i(34553),v=i(99010),b=i(57836),C=i(48779),k=i(64791),S=i(7149),w=i(47456),x=i(79),E=i(22013),T=i(78590),A=i(74056),M=i(26816);!function(e){let t,i,n;!function(e){e.asMenuScheme=e=>e.slice(1)}(t=e.Scheme||(e.Scheme={})),function(e){e.Collapsed="Collapsed",e.Expanded="Expanded"}(i=e.VisualState||(e.VisualState={})),function(e){e.create=function(e,n,s,r){const o=e=>n.toolbar.formatting[e],c=e=>l.some(n.toolbar.formatting.tooltips[e]),d=(e,t)=>(0,h.pipe)(c(e.name),l.map((e=>`${n.toolbar.formatting.tooltips.head} ${e}`)),l.map((e=>(0,h.pipe)(t,l.map(a.fold(h.identity,h.constVoid)),l.map((t=>`${e}, shortcut ${t}`)),l.getOrElse((0,h.constant)(e))))),l.toUndefined),m=E.L.HotkeyOptions.toString(s.has(A.OH.Flag.isAppleSystem)),u=new _.B,g=p.s.create({menu:i.Expanded,items:e.filter(M.W.isItem).reduce(((e,t)=>(e[t.name]=t.initialState,e)),{})}),f=e[0];return{getBindings:(0,h.pipe)(e,t.asMenuScheme,M.W.Scheme.toBindingProvider((e=>u.next(e)),(()=>r))),head:{name:f.name,title:p.s.create(o(f.name)),tooltip:c(f.name),nestedItem:l.none,active:g.view("items",f.name,"active"),disabled:g.view("items",f.name,"disabled"),hidden:g.view("items",f.name,"hidden"),onClick:()=>u.next({event:f.name,source:M.W.Source.View}),showGreenDot:l.none},list:t.asMenuScheme(e).map((e=>{if(M.W.isItem(e)){const t=(0,h.pipe)(e.hotkey,l.map((e=>a.left(m(e[0])))));return{name:e.name,title:p.s.create(o(e.name)),tooltip:c(e.name),nestedItem:t,ariaLabel:d(e,t),active:g.view("items",e.name,"active"),disabled:g.view("items",e.name,"disabled"),hidden:g.view("items",f.name,"hidden"),onClick:()=>u.next({event:e.name,source:M.W.Source.View}),showGreenDot:l.none}}return e})),visualState:g.view("menu"),state:g,events:u}},e.stateManager=function(e,{state:t}){return e.pipe(v.M((e=>{t.lens("items").modify((0,d.rO)(((t,i)=>t===f.M_.Type.bulletList?(0,o._)((0,r._)({},i),{active:!0===e[f.M_.Type.bulletList]||!0===e[f.M_.Type.dashedList]}):t===f.M_.Type.link?i:f.M_.is(t)?(0,o._)((0,r._)({},i),{active:!0===e[t]}):i)))})),b.u(C.q6))}}(n=e.ToolbarViewModel||(e.ToolbarViewModel={}));e.initHandlers=function(e){return(t,n)=>{const s=((e,{state:t})=>n=>{const s=t=>{e({index:t.start,length:t.end-t.start,meta:{source:f.LN.Meta.Source.api,formatting:{bold:!1,italic:!1,underline:!1,bulletList:!1,dashedList:!1,header1:!1,header2:!1,orderedList:!1,strike:!1}}})};switch(n.name){case"head":return()=>t.lens("menu").modify((e=>e===i.Collapsed?i.Expanded:i.Collapsed));case"clear":return s;case f.M_.Type.bold:case f.M_.Type.bulletList:case f.M_.Type.header1:case f.M_.Type.header2:case f.M_.Type.italic:case f.M_.Type.orderedList:case f.M_.Type.underline:return a=n.name,i=>{const n=t.get().items[a].active,s=(t={})=>e({index:i.start,length:i.end-i.start,meta:{source:f.LN.Meta.Source.api,formatting:(0,o._)((0,r._)({},t),{[a]:!n})}});T.pR.isBlockFormat(a)?s({[f.M_.Type.header1]:!1,[f.M_.Type.header2]:!1,[f.M_.Type.orderedList]:!1,[f.M_.Type.bulletList]:!1,[f.M_.Type.dashedList]:!1}):s()};default:return(0,m.xb)(n.name)}var a})(t,n);return e.reduce(((e,t)=>(e[t.name]=s(t),e)),{})}}}(n||(n={}));const K={active:!1,disabled:!1,hidden:!1};function B(e,t,i,s,r,o,a,d){const h=[{name:"head",hotkey:l.none,initialState:K,featureOnboardingId:l.none},{name:f.M_.Type.bold,hotkey:c.ci([{modifiers:new Set([y.l.short]),key:"B"}]),initialState:{active:!1,disabled:!1,hidden:!1},featureOnboardingId:l.none},{name:f.M_.Type.italic,hotkey:c.ci([{modifiers:new Set([y.l.short]),key:"I"}]),initialState:K,featureOnboardingId:l.none},{name:f.M_.Type.underline,hotkey:c.ci([{modifiers:new Set([y.l.short]),key:"U"}]),initialState:K,featureOnboardingId:l.none},"separator",{name:f.M_.Type.header1,hotkey:c.ci([{modifiers:new Set([y.l.short,y.l.alt]),key:"1"}]),initialState:K,featureOnboardingId:l.none},{name:f.M_.Type.header2,hotkey:c.ci([{modifiers:new Set([y.l.short,y.l.alt]),key:"2"}]),initialState:K,featureOnboardingId:l.none},"separator",{name:f.M_.Type.link,hotkey:c.ci([{modifiers:new Set([y.l.short]),key:"K"}]),initialState:K,featureOnboardingId:l.none},"separator",{name:f.M_.Type.orderedList,hotkey:c.ci([{modifiers:new Set([y.l.short,y.l.shift]),key:"7"}]),initialState:K,featureOnboardingId:l.none},{name:f.M_.Type.bulletList,hotkey:c.ci([{modifiers:new Set([y.l.short,y.l.shift]),key:"8"}]),initialState:K,featureOnboardingId:l.none},"separator",{name:"clear",hotkey:c.ci([{modifiers:new Set([y.l.short]),key:"\\"}]),initialState:K,featureOnboardingId:l.none}],m=h.filter((0,u.M4)(M.W.isItem,(e=>e.name!==f.M_.Type.link))),p=n.initHandlers(m),{formattingEvents:_,viewModel:b}=function(e,t,i,s,r,o,a){const l=n.ToolbarViewModel.create(i,s,a,t);return{viewModel:l,formattingEvents:M.W.toMenuEvents(e,l.events).pipe(v.M((([e,t,i])=>{r.rtfMenuEventFire(e,o,i)})))}}(e,s,h,r,o,a,d),[C,S]=k.j(_,(e=>e[0]!==f.M_.Type.link)),E=function(e,t,i,s,r){const o=i(e,r),a=g.Bx.Logging.getLogger("formattingMenuManager"),l=M.W.linkEvents(s,o).pipe(w.W(((e,t)=>(a.error("Error handling formatting event",e),t)))),c=n.ToolbarViewModel.stateManager(t,r),d=l.pipe(x.h(c)).subscribe();return{dispose:()=>{d.unsubscribe()}}}(t,i,p,C,b);return{dispose:()=>{E.dispose()},viewModel:b,linkEvents:S}}var I;!function(e){e.fromToolbar=function(e){return e.pipe(S.T((([,e])=>({range:e,source:"toolbar"}))))},e.fromDenaliEditor=function(e){return e.pipe(S.T((e=>f.M_.LinkPayload.is(e)?l.some({range:e[f.M_.Type.link][0].range,source:"selection"}):l.none)))}}(I||(I={})),function(e){let t;!function(e){e.Mock=class{constructor(){(0,s._)(this,"viewModel",void 0),(0,s._)(this,"linkEvents",new _.B),(0,s._)(this,"changes",new _.B)}}}(t=e.Manager||(e.Manager={}))}(n||(n={}))},26816:(e,t,i)=>{i.d(t,{W:()=>n});var n,s=i(38886),r=i(65390),o=i(84647),a=i(76005),l=i(99010),c=i(7149),d=i(54641),h=i(48779);!function(e){let t,i,m,p;!function(e){e.toBindingProvider=(e,t)=>i=>a=>(0,o.pipe)(i,s.pb(n.isItem),s.cy((i=>(0,o.pipe)(i.hotkey,r.map((s=>s.map((s=>({action:i.name,hotkey:a(s),isActive:t(i.name),bind:l.M((()=>e({event:i.name,source:n.Source.Hotkey})))}))))),r.getOrElse((()=>[]))))))}(t=e.Scheme||(e.Scheme={})),e.isItem=e=>"string"!=typeof e,function(e){e.isViewItem=e=>"string"!=typeof e}(i=e.Item||(e.Item={})),function(e){let t;!function(e){e.is=e=>"isActivated"in e}(t=e.StatefulViewEvent||(e.StatefulViewEvent={})),e.isView=e=>e.source===n.Source.View,e.isHotkey=e=>e.source===n.Source.Hotkey}(m=e.MenuEvent||(e.MenuEvent={})),function(e){e.Hotkey="Hotkey",e.View="View"}(p=e.Source||(e.Source={})),e.toMenuEvents=(e,t)=>t.pipe(c.T((t=>[t.event,a.LN.toTextRange(e()),t.source]))),e.linkEvents=function(e,t){return e.pipe(d.Z((([e,i,n])=>h.br(t[e].call(null,i,n)))))}}(n||(n={}))},91956:(e,t,i)=>{i.d(t,{Qn:()=>s,xK:()=>N});var n,s,r=i(23988),o=i(10334),a=i(17171),l=i(93267),c=i(44869),d=i(65390),h=i(84647),m=i(24819),p=i(84712),u=i(90829),g=i(30595),f=i(61198),y=i(63967),_=i(62597),v=i(19805),b=i(5406),C=i(79937),k=i(34553),S=i(7149),w=i(3016),x=i(42279),E=i(91745),T=i(99010),A=i(87275),M=i(63388),K=i(40884),B=i(44011),I=i(78747);!function(e){let t;!function(e){e.eq=c.OW({isSidebarOpen:l.Eq,isGgoOpen:l.Eq})}(t=e.UIState||(e.UIState={}))}(n||(n={})),function(e){class t extends M.Rv.Mock{constructor(e={},t=!0){super(e),(0,r._)(this,"state",void 0),(0,r._)(this,"alertSwitchChanges",b.w),(0,r._)(this,"premiumButtonData",p.s.create(d.none)),(0,r._)(this,"openOggyLens",h.constVoid),(0,r._)(this,"closeSidebar",h.constVoid),this.state=p.s.create({isSidebarOpen:t,isGgoOpen:!1,navigationSource:y.Kz.sidebar})}}e.Mock=t}(s||(s={}));class N{_switchToLens(e,t){const i=this.activeLensId.get(),n=i===e&&t.actionSource!==y.Kz.api?_.J.SpecialId.AllAlerts:e;i!==n&&this._lensSwitch.next({lensId:n,focusFirst:t.focusFirst,source:t.actionSource})}_listenNavigationEvent(){this._subs.push(this.events.pipe(C.n((e=>{switch(e.type){case"setGoals":return this._telemetry.gnarSpec.setGoalsButtonClick(this._telemetry.pageId),this._modalManager.show(f.ug.setGoals("user"));case"preferences":return this._modalManager.show(I.uF.preferences);case"performance":return this._telemetry.gnarSpec.documentStatisticsButtonClick(this._telemetry.pageId),this._modalManager.show(f.ug.performance);case"switchToLens":if(e.id!==this.activeLensId.get())switch(e.id){case _.J.SpecialId.FreePremiumAlerts:this._telemetry.gnarSpec.freeAdvancedIssuesButtonClick(this._telemetry.pageId,"wiritingAssistant");break;case _.J.SpecialId.Premium:this._telemetry.gnarSpec.advancedIssuesButtonClick(this._telemetry.pageId,"wiritingAssistant");break;default:this._telemetry.gnarSpec.openLensButtonClick((0,g.PT)(e.id),this._telemetry.pageId)}return this._switchToLens(e.id,{focusFirst:e.focusFirst,actionSource:e.actionSource}),b.w;case"toggleSidebar":return this.state.view("isSidebarOpen").get()?this._switchToLens(_.J.SpecialId.Closed,{focusFirst:!0,actionSource:e.actionSource}):this._focusClosestAlert(y.Kz.api),b.w;case"switchToCritical":return this._features.isFree.get()?this._focusClosestAlert(e.actionSource):this._focusClosestAlertByPredicate(y.Fc.isCriticalImpact,e.actionSource),b.w;case"switchToAdvanced":return this._features.isFree.get()?this._switchToLens(_.J.SpecialId.Premium,{focusFirst:!0,actionSource:y.Kz.sidebar}):this._focusClosestAlertByPredicate((0,u.AU)(y.Fc.isCriticalImpact),e.actionSource),b.w;case"switchToAll":return this._switchToLens(_.J.SpecialId.AllAlerts,{actionSource:e.actionSource,focusFirst:e.focusFirst}),b.w;default:return(0,m.xb)(e)}}))).subscribe())}_focusClosestAlert(e){(0,h.pipe)(this._getAlertClosestToCursor(y.Fc.isRegisteredApplicableAlert,"cursor"),d.fold((()=>this._switchToLens(_.J.SpecialId.AllAlerts,{focusFirst:!0,actionSource:e})),(t=>this._alertSwitch.next({alertHighlight:t,source:e}))))}_focusClosestAlertByPredicate(e,t){(0,h.pipe)(this._getAlertClosestToCursor((0,u.M4)(y.Fc.isRegisteredApplicableAlert,e),"cursor"),d.fold((()=>this._focusClosestAlert(t)),(e=>this._alertSwitch.next({alertHighlight:e,source:t}))))}get _premiumButtonData(){const e=this._premiumCount.view("count");return p.s.combine(this._features.isFree,this._uphookAvailable,((t,i)=>t&&i?d.some({id:_.J.SpecialId.Premium,title:"Pro",alerts:e}):d.none))}dispose(){this._subs.dispose()}constructor(e,t,i,n,s,l,c,g,f,b,C){(0,r._)(this,"_telemetry",void 0),(0,r._)(this,"_modalManager",void 0),(0,r._)(this,"_features",void 0),(0,r._)(this,"_getAlertClosestToCursor",void 0),(0,r._)(this,"_documentModel",void 0),(0,r._)(this,"cardVisualMode",void 0),(0,r._)(this,"_isCheetahEnabled",void 0),(0,r._)(this,"_premiumCount",void 0),(0,r._)(this,"_uphookAvailable",void 0),(0,r._)(this,"_plagiarismAvailable",void 0),(0,r._)(this,"_lensSwitch",void 0),(0,r._)(this,"_alertSwitch",void 0),(0,r._)(this,"alertSwitchChanges",void 0),(0,r._)(this,"state",void 0),(0,r._)(this,"events",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"activeLensId",void 0),(0,r._)(this,"a11yContrast",void 0),(0,r._)(this,"documentActions",void 0),(0,r._)(this,"premiumButtonData",void 0),(0,r._)(this,"showMuteControl",void 0),(0,r._)(this,"lensTitleType",void 0),(0,r._)(this,"openOggyLens",void 0),(0,r._)(this,"closeSidebar",void 0),(0,r._)(this,"_handleGenAIButtonClick",void 0),(0,r._)(this,"_handlePlagiarismButtonClick",void 0),this._telemetry=e,this._modalManager=t,this._features=i,this._getAlertClosestToCursor=n,this._documentModel=s,this.cardVisualMode=c,this._isCheetahEnabled=g,this._premiumCount=f,this._uphookAvailable=b,this._plagiarismAvailable=C,this._lensSwitch=new k.B,this._alertSwitch=new k.B,this.alertSwitchChanges=this._alertSwitch.pipe(S.T((({alertHighlight:e,source:t})=>(0,a._)((0,o._)({},e),{source:t})))),this.state=p.s.create({isSidebarOpen:this._features.denali.sidebarOpenedByDefault,isGgoOpen:!1,navigationSource:y.Kz.api}),this.events=new k.B,this._subs=new w.y.Keeper,this.a11yContrast=!0,this.documentActions=p.s.combine(this._features.plagiarism,this._features.proofit,this._documentModel.documentLength.view("full").view((e=>0===e)),this._documentModel.title,this._isCheetahEnabled,this._plagiarismAvailable,((e,t,i,n,s,r)=>({plagiarism:e===K.Fh.enabled?i&&!this._features.isSmartPlagiarismUphookEnabled?M.Rv.plagiarismDisabled(M.GJ.EmptyDocument):r?M.Rv.documentActionAvailable:M.Rv.plagiarismDisabled(M.GJ.NotAvailable):e===K.Fh.upgradeIsNeeded?M.Rv.documentActionAvailable:M.Rv.plagiarismDisabled(M.GJ.NotAvailable),proofit:t===K.Fh.enabled?i?M.Rv.proofitDisabled(M.M7.EmptyDocument):n===B.premiumDemoDocument.title?M.Rv.proofitDisabled(M.M7.DemoDoc):M.Rv.documentActionAvailable:M.Rv.proofitDisabled(M.M7.NotAvailable),cheetah:s?M.Rv.documentActionAvailable:M.Rv.cheetahDisabled(M.py.NotAvailable)}))),this.openOggyLens=(e,t)=>{switch(this.events.next({type:"switchToLens",id:e,focusFirst:e!==_.J.SpecialId.Cheetah,actionSource:t}),e){case _.J.SpecialId.AllAlerts:break;case _.J.SpecialId.Cheetah:this._handleGenAIButtonClick(t);break;case _.J.SpecialId.Plagiarism:this._handlePlagiarismButtonClick();break;default:(0,m.AS)(e)}},this.closeSidebar=()=>{this.state.get().isSidebarOpen&&this.events.next({type:"toggleSidebar",actionSource:y.Kz.sidebar}),this._telemetry.gnarSpec.assistantCloseButtonClick(this._telemetry.pageId,A.Ir.fromLensId(this.activeLensId.get()))},this._handleGenAIButtonClick=e=>{this._telemetry.gnarSpec.genAIButtonClick(this._telemetry.pageId,e===y.Kz.text?"writingMode":"wiritingAssistant")},this._handlePlagiarismButtonClick=()=>{this._telemetry.gnarSpec.plagiarismButtonClick(this._telemetry.pageId,this.state.get().isSidebarOpen?"wiritingAssistant":"writingMode"),this._features.assignSmartPlagiarismUphookExperiment()},this.premiumButtonData=this._premiumButtonData,this._listenNavigationEvent(),this.showMuteControl=(0,h.pipe)(l,d.fold((()=>p.s.create(!1)),(e=>e.mutedCategories.view(v.x.BaseMutedCategories.filter((0,u.AU)(v.x.Category.isSpecial))).view((e=>e.size>0))))),this.lensTitleType=M.Rv.LensTitleType.default;const I=p.s.create(this._features.denali.sidebarOpenedByDefault?_.J.SpecialId.AllAlerts:_.J.SpecialId.Closed);this._subs.push(x.h(this._lensSwitch.pipe(E.p((({lensId:e})=>_.J.isRelevantForOggy(e)))),this._alertSwitch.pipe(S.T((({source:e})=>({lensId:_.J.SpecialId.AllAlerts,source:e}))))).pipe(T.M((({lensId:e,source:t})=>{I.set(e),this.state.modify((i=>(0,a._)((0,o._)({},i),{navigationSource:t,isSidebarOpen:!_.J.isClosedId(e),isGgoOpen:_.J.isCheetah(e)})))}))).subscribe()),this.activeLensId=I.view(),(0,u.hJ)("toggleSidebar",(()=>this.state.modify((e=>(0,a._)((0,o._)({},e),{isSidebarOpen:!e.isSidebarOpen}))))),(0,u.hJ)("activeLensId",(()=>this.activeLensId.get())),(0,u.hJ)("navigationState",(()=>this.state.get()))}}},35382:(e,t,i)=>{i.d(t,{A:()=>o,f:()=>n});var n,s=i(23988),r=i(1224);!function(e){let t;!function(e){e.isVideo=function(e){return"video"in e}}(t=e.Content||(e.Content={}))}(n||(n={}));class o{markSeen(e){return r.Bx.Logging.getLogger("whatsnew").info("News shown",e),this._settings.markNewsItemsAsSeen(e)}constructor(e){(0,s._)(this,"_settings",void 0),this._settings=e}}},68703:(e,t,i)=>{i.d(t,{xJ:()=>V,LT:()=>U,XS:()=>G});var n=i(23988),s=i(10334),r=i(17171),o=i(38886),a=i(66202),l=i(44869),c=i(84647),d=i(84712),h=i(90829),m=i(1224),p=i(65390),u=i(65160),g=i(7432),f=i(34980),y=i(76005),_=i(72106),v=i(14973),b=i(11924),C=i(34553),k=i(7149),S=i(79),w=i(79937),x=i(48779),E=i(42279),T=i(91745),A=i(733),M=i(5406),K=i(83694),B=i(99010),I=i(57836),N=i(82585),$=i(93208),R=i(58655),L=i(31206),F=i(60352),D=i(92832),H=i(95710),P=i(92825),O=i(11864);const Q={backgroundColor:P.jr,backgroundRepeat:"no-repeat",contain:"layout style",$nest:{"@media print":{borderBottom:O.Ks.important("none")}}},W=O.Ks.prefixedStylesheet("search",{mark:[Q]});var V,U,z;!function(e){e.focus="searchFocus",e.next="searchNext",e.previous="searchPrevious"}(V||(V={})),function(e){var t=e.SEARCH_INPUT_NAME="search-input";e.isSearchInput=function(e){return Boolean(e)&&e.name===t},e.Mock=class{select(){throw new Error("Method not implemented.")}constructor(e){(0,n._)(this,"getBindings",(()=>{throw new Error("Method not implemented.")})),(0,n._)(this,"visible",d.s.create(!1)),(0,n._)(this,"term",d.s.create("")),(0,n._)(this,"result",void 0),(0,n._)(this,"hotkeysActions",new C.B),(0,n._)(this,"dispose",c.constVoid),this.result=d.s.create((0,c.pipe)(p.fromNullable(e),p.map((e=>(0,r._)((0,s._)({},e),{next:c.constVoid,prev:c.constVoid})))))}}}(U||(U={}));class j{next(){this._ops._forceSearch(),this._ops._selectedPos.modify((0,c.flow)(p.map((e=>e+1)),p.map((e=>e>this.count-1?0:e)),u.NW(p.some(0)))),this._ops._highlightSelectedRange(1===this.count)}prev(){this._ops._forceSearch(),this._ops._selectedPos.modify((0,c.flow)(p.map((e=>e-1)),p.map((e=>e<0?this.count-1:e)),u.NW(p.some(this.count-1)))),this._ops._highlightSelectedRange()}equals(e){return null!=e&&this.count===e.count&&this.current===e.current&&this._term===e._term}constructor(e,t,i){(0,n._)(this,"_ops",void 0),(0,n._)(this,"_term",void 0),(0,n._)(this,"count",void 0),(0,n._)(this,"current",void 0),this._ops=e,this._term=t,this.count=i.ranges.length,this.current=(0,c.pipe)(i.selected,p.getOrElse((()=>0)))+1,this._ops._highlightSelectedRange()}}!function(e){const t="searchRange";e.create=(e,i)=>g.vY.create(e,i,{type:t}),e.is=function(e){return typeof e.meta.type===t}}(z||(z={}));const q=l.ee(((e,t)=>e.meta.id===t.meta.id));class G{_searchTerm(e,t){let i=-1;const n=[];for(;i=e.indexOf(t,i+1),i>-1;)n.push(z.create(i,i+t.length));return n}_listenOpenEvents(){return v.hJ.activeCount.pipe(k.T((e=>e<1)),S.h(this.visible.pipe(k.T((e=>!e))))).pipe(w.n(x.vh(this.hotkeysActions)),k.T(c.constTrue)).subscribe(x.H9(this.visible))}_listenCloseEvents(){const e=H.F.listen("escape");return E.h(this.visible.pipe(w.n(x.vh(e))),v.hJ.activeCount.pipe(T.p((e=>e>0)))).pipe(k.T(c.constFalse)).subscribe(x.H9(this.visible))}_replaceRanges(e){this._rangesState.modify((t=>(t.ranges.forEach((e=>this._rangeManager.deregisterRange(e.meta.id))),{ranges:e.map((e=>this._rangeManager.registerRange(`search_${this.term.get().replace(/\s*/g,"_")}_${G.searchMarkCount++}`,e))),selected:e.length>0?p.some(0):p.none})))}_ensureMarkInViewport(e){return(0,c.pipe)(e,a.fromOption((()=>new Error("Mark should not be null at this point"))),a.chain((e=>e.getRect())),a.map(f.W.relativeToViewport),a.fold(A.$,(t=>{const{top:i,bottom:n}=this._editorViewport.get();return t.top<i+50||t.top>n-50?this._ded.scrollToMark(u.$v(e).id,{paddingTop:500,animate:y.nA.fast}):M.w})))}constructor(e,t,i){(0,n._)(this,"_ded",void 0),(0,n._)(this,"_rangeManager",void 0),(0,n._)(this,"_editorViewport",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"_forceSearchSubject",void 0),(0,n._)(this,"_rangesState",void 0),(0,n._)(this,"_selectedRange",void 0),(0,n._)(this,"_activeMark",void 0),(0,n._)(this,"visible",void 0),(0,n._)(this,"term",void 0),(0,n._)(this,"result",void 0),(0,n._)(this,"hotkeysActions",void 0),(0,n._)(this,"select",void 0),(0,n._)(this,"dispose",void 0),(0,n._)(this,"_selectedPos",void 0),(0,n._)(this,"_forceSearch",void 0),(0,n._)(this,"_highlightSelectedRange",void 0),(0,n._)(this,"getBindings",void 0),(0,n._)(this,"_bindHotkey",void 0),(0,n._)(this,"_removeRanges",void 0),(0,n._)(this,"_findRanges",void 0),(0,n._)(this,"_changeActiveMark",void 0),(0,n._)(this,"_currentMark",void 0),this._ded=e,this._rangeManager=t,this._editorViewport=i,this._log=m.Bx.Logging.getLogger("SearchViewModel"),this._subs=[],this._forceSearchSubject=new C.B,this._rangesState=d.s.create({ranges:[],selected:p.none}),this._selectedRange=this._rangesState.view((e=>(0,c.pipe)(e.selected,p.chain((t=>o.$I(t,e.ranges)))))),this._activeMark=d.s.create(p.none),this.visible=d.s.create(!1),this.term=d.s.create(""),this.result=d.s.create(p.none),this.hotkeysActions=new C.B,this.select=()=>{this._forceSearch(),this._rangesState.modify((({ranges:e,selected:t})=>({ranges:e,selected:(0,c.pipe)(t,u.NW(p.some(0)),p.filter((()=>(0,h.z2)(e))))}))),this._highlightSelectedRange()},this.dispose=()=>{this.term.set(""),this._subs.forEach((e=>e.unsubscribe())),this._subs=[]},this._selectedPos=this._rangesState.lens("selected"),this._forceSearch=()=>this._forceSearchSubject.next(void 0),this._highlightSelectedRange=(e=!1)=>{const t=this._selectedRange.get();e&&p.getEq(q).equals(this._activeMark.get(),t)&&this._ensureMarkInViewport(this._currentMark).subscribe({error:e=>this._log.error("Cannot scroll to mark",e)}),this._activeMark.set(t)},this.getBindings=e=>{const t=new Set([b.l.short]),i=K.of(!0);return[{action:V.focus,hotkey:e({modifiers:t,key:"f"}),bind:this._bindHotkey,isActive:i},{action:V.next,hotkey:e({modifiers:t,key:"g"}),bind:this._bindHotkey,isActive:i},{action:V.previous,hotkey:e({modifiers:new Set([b.l.short,b.l.shift]),key:"g"}),bind:this._bindHotkey,isActive:i}]},this._bindHotkey=B.M((e=>this.hotkeysActions.next(e))),this._removeRanges=e=>{(0,c.pipe)(this._activeMark.get(),p.filter((t=>e.has(t.meta.id))),p.map((()=>this._activeMark.set(p.none)))),this._rangesState.modify((t=>{const i=t.ranges.filter((({meta:{id:t}})=>!e.has(t)||(this._rangeManager.deregisterRange(t),!1)));return{ranges:i,selected:(0,c.pipe)(t.selected,p.filter((e=>e<i.length)))}}))},this._findRanges=e=>(0,h.z2)(e)?this._searchTerm(this._ded.getText().toLowerCase(),e.toLowerCase()):[],this._changeActiveMark=({prev:e,next:t})=>{this._currentMark=p.none,(0,c.pipe)(e,u.Mi((e=>{this._ded.changeMarks([_.J.Change.getRemoveAction({range:()=>e})(e.meta.id)])}))),(0,c.pipe)(t,u.Mi((e=>{this._currentMark=(0,c.pipe)(this._ded.changeMarks([_.J.Change.getCreateAction({range:()=>e,order:0,classes:[W.mark]})(e.meta.id)]),(t=>t.created.get(e.meta.id)),p.fromNullable,p.chain(p.fromEither)),this._ensureMarkInViewport(this._currentMark).subscribe({error:e=>this._log.error("Cannot scroll to mark",e)})})))},this._subs.push(this._listenOpenEvents(),this._listenCloseEvents(),E.h(this.term.pipe(T.p((e=>e.length<=3)),I.u("")),this.term.pipe(T.p((e=>e.length>3)),N.B(300)),this._forceSearchSubject.pipe($.E(this.term,((e,t)=>t)))).pipe(R.F(),k.T(this._findRanges)).subscribe((e=>{this._activeMark.set(p.none),this._replaceRanges(e)})),this._rangesState.pipe(k.T((e=>(0,c.pipe)(e,p.fromPredicate((e=>(0,o.J_)(e.ranges))),p.map((e=>new j(this,this.term.get(),e))))))).subscribe((e=>this.result.set(e))),this._rangesState.pipe(w.n((({ranges:e})=>(0,o.J_)(e)?this._rangeManager.rangeChanged.pipe(L.E("affected"),T.p(o.J_)):M.w)),k.T((e=>e.filter(z.is))),k.T((e=>new Set(e.map((e=>e.meta.id)))))).subscribe(this._removeRanges),this._activeMark.pipe(F.S((({next:e},t)=>({prev:e,next:t})),{prev:p.none,next:p.none})).subscribe(this._changeActiveMark)),this._subs.push(this._ded.dontFreezeWhen(this.visible,"search"),this.visible.pipe(D.i(1),T.p((e=>!e))).subscribe((()=>{this.term.set("")}))),(0,h.hJ)("searchVM",this)}}(0,n._)(G,"searchMarkCount",0)},45032:(e,t,i)=>{i.d(t,{Q0:()=>n,g5:()=>s,tG:()=>k});var n,s,r=i(23988),o=i(65390),a=i(84647),l=i(84712),c=i(90829),d=i(1224),h=i(18810),m=i(66202),p=i(73328),u=i(63967),g=i(80536),f=i(72400),y=i(62597),_=i(22809),v=i(32102),b=i(3016),C=i(40884);!function(e){e.Mock=class{constructor(){(0,r._)(this,"advancedAlerts",l.s.create(o.none)),(0,r._)(this,"openUpgradeUrl",a.constVoid),(0,r._)(this,"openSignupUrl",a.constVoid),(0,r._)(this,"shouldOpenInSessionCheckout",a.constFalse),(0,r._)(this,"getUpgradeHookFromUrl",(()=>o.none)),(0,r._)(this,"handleUpgradeClick",a.constVoid),(0,r._)(this,"handleInlineSuggestionUpgradeClick",a.constVoid),(0,r._)(this,"fromGbVoxUpHookLens",a.constVoid),(0,r._)(this,"fromGrammarlyGO",a.constVoid),(0,r._)(this,"enableGBVoxHookLens",a.constVoid),(0,r._)(this,"displayValue",(()=>"")),(0,r._)(this,"isEligibleForFreeTrial",void 0),(0,r._)(this,"inProductDiscount",l.s.create({isEligible:!1})),(0,r._)(this,"isEligibleForInProductDiscount",void 0),(0,r._)(this,"upgradeHookVariant",void 0),(0,r._)(this,"checkoutSidebarState",l.s.create(s.Collapsed)),(0,r._)(this,"checkoutModel",l.s.create(m.left("notQualified")))}}}(n||(n={}));class k{_formatLiteAlerts(e){const t=e.slice(0,5),i=e.slice(5).map((e=>e.count)).reduce(c.cz,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i,lensName:"more...",bundleInfo:o.some("more...")}]:t}handleUpgradeClick(e){this.openUpgradeUrl(e)}handleInlineSuggestionUpgradeClick(e){this._environment.actions.openUrl(new h.U(e))}shouldOpenInSessionCheckout(e){return o.isSome(this.getUpgradeHookFromUrl(e))}openUpgradeUrl(e){(0,a.pipe)(p.zb((()=>this._createUpgradeUrl(e))),m.chain(this._environment.actions.openUrl),m.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e))))}openSignupUrl(){(0,a.pipe)(p.zb((()=>this._createSignUpUrl())),m.chain(this._environment.actions.openUrl),m.getOrElse((e=>this._log.fatal("unexpected error on open signup page",e))))}fromGbVoxUpHookLens(){(0,a.pipe)(p.zb((()=>this._upgradeHook.fromGbVoxUpHookLens())),m.chain(this._environment.actions.openPopup),m.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e))))}fromGrammarlyGO(){(0,a.pipe)(p.zb((()=>this._upgradeHook.fromGrammarlyGO())),m.chain(this._environment.actions.openPopup),m.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page for GrammarlyGO",e))))}enableGBVoxHookLens(){(0,a.pipe)(p.zb((()=>new h.U(this._config.account.styleGuide))),m.chain(this._environment.actions.openPopup),m.getOrElse((e=>this._log.fatal("unexpected error on open admin style guide page",e))))}displayValue(e){return(0,a.pipe)(this._uphookFormat,o.map((t=>t===C.SA.layoutGroup?e.lensName:(0,a.pipe)(e.bundleInfo,o.getOrElse((()=>e.categoryHuman))))),o.getOrElse((()=>e.categoryHuman)))}_noRemovedFilter(e){return t=>!u.Fc.isRemoved(t)&&e(t)}_getGroupedLiteAlerts(e){return(0,a.pipe)(this._checkingDomain.state.get(),_.A.reduce([],((t,i)=>(this._noRemovedFilter(e)(i.alert)&&t.push(i.alert.toLiteAlert()),t))),(0,a.pipe)(this._uphookFormat,o.map((e=>e===C.SA.layoutGroup?g.D.groupByGroup:g.D.groupByBundleInfo)),o.getOrElse((()=>g.D.group))))}_getGroupedLensAlerts(e){return(0,a.pipe)(this._checkingDomain.state.get(),_.A.reduce([],((t,i)=>(this._noRemovedFilter(e)(i.alert)&&t.push(i.alert.toLensAlert()),t))),f.N.group)}_getPlagiarismPercent(){return this._lensPreviewVM.getLens(y.J.SpecialId.Plagiarism).view("percentile").view(v.Q.fromRatio)}dispose(){this._subs.dispose()}get isEligibleForFreeTrial(){return this._checkEligibleForFreeTrial()}get upgradeHookVariant(){return this.inProductDiscount.get().isEligible?"discountPro":"pro"}constructor(e,t,i,n,p,g,f,_,v,k,S){(0,r._)(this,"_checkingDomain",void 0),(0,r._)(this,"_lensPreviewVM",void 0),(0,r._)(this,"_docId",void 0),(0,r._)(this,"_environment",void 0),(0,r._)(this,"_upgradeHook",void 0),(0,r._)(this,"_config",void 0),(0,r._)(this,"_uphookFormat",void 0),(0,r._)(this,"_uphookDestination",void 0),(0,r._)(this,"_isSmartPlagiarismUphookEnabled",void 0),(0,r._)(this,"_checkEligibleForFreeTrial",void 0),(0,r._)(this,"inProductDiscount",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"checkoutModel",void 0),(0,r._)(this,"advancedAlerts",void 0),(0,r._)(this,"_createSignUpUrl",void 0),(0,r._)(this,"_createUpgradeUrl",void 0),(0,r._)(this,"checkoutSidebarState",void 0),(0,r._)(this,"getUpgradeHookFromUrl",void 0),this._checkingDomain=e,this._lensPreviewVM=t,this._docId=i,this._environment=n,this._upgradeHook=p,this._config=g,this._uphookFormat=f,this._uphookDestination=_,this._isSmartPlagiarismUphookEnabled=v,this._checkEligibleForFreeTrial=k,this.inProductDiscount=S,this._log=d.Bx.Logging.getLogger("UpgradeViewModel"),this._subs=new b.y.Keeper,this.checkoutModel=l.s.create(m.left("notQualified")),this.advancedAlerts=this._lensPreviewVM.getLens(y.J.SpecialId.Premium).view((({count:e})=>e>0?(0,a.pipe)(o.some({count:e,alerts:()=>this._formatLiteAlerts(this._getGroupedLiteAlerts((e=>u.Fc.isPremium(e))))}),o.filter((({alerts:e})=>(0,c.z2)(e())))):o.none)),this._createSignUpUrl=()=>new h.U(this._config.funnel.signup),this._createUpgradeUrl=e=>{const t=(0,a.pipe)(this.checkoutModel.get(),m.swap,o.fromEither,o.exists((e=>"controlTreatment"===e))),i=this._upgradeHook.fromDenaliDocumentToPlans(e,this._docId,o.fromNullable(this.upgradeHookVariant),this._getGroupedLensAlerts((0,c.AU)(u.Fc.isPlagiarism)),this._isSmartPlagiarismUphookEnabled?this._getPlagiarismPercent():void 0,t);return o.isNone(this._uphookDestination)?i:this._uphookDestination.value===C.fx.plansPage?i.addParams({redirectUphookToUpgradePageExp:"1"}):this.isEligibleForFreeTrial?this._upgradeHook.fromDenaliDocumentToUpgradeTry(e,this._docId,o.fromNullable(this.upgradeHookVariant)):this._upgradeHook.fromDenaliDocumentToUpgrade(e,this._docId,o.fromNullable(this.upgradeHookVariant))},this.checkoutSidebarState=l.s.create(s.Collapsed),this.getUpgradeHookFromUrl=e=>{var t;const i=new URL(e);var n;const[s,r,a,l]=null!==(n=null===(t=i.searchParams.get("utm_campaign"))||void 0===t?void 0:t.split("_"))&&void 0!==n?n:[];return i.origin===this._config.funnel.base&&"/plans"===i.pathname&&"upHook"===i.searchParams.get("utm_source")&&"editor"===s&&["advancedIssues","blurredSuggestion"].includes(r)&&["inlineCard","longFormAssistant"].includes(a)?o.some({upgradeHookName:r,upgradeHookSlot:a,upgradeHookVariant:l}):o.none}}}!function(e){e.Collapsed="Collapsed",e.Expanded="Expanded"}(s||(s={}))},96504:(e,t,i)=>{i.d(t,{cX:()=>F,vF:()=>L,xT:()=>_});var n=i(10334),s=i(17171),r=i(55548),o=i(98205),a=i(12175),l=i(37634),c=i(11864),d=i(13607),h=i(57014),m=i(54610);const p=c.Ks.percent(80),u=c.Ks.rem(20),g=h.$U.maxWidth(m.v.navigationHideWidthThreshold),f={position:"relative",height:c.Ks.percent(100)},y={display:"flex",flexDirection:"column",$nest:{[h.$U.print]:{display:"none"}}},_={base:{width:c.Ks.rem(26),$nest:{"& .header":{height:"auto"},"& .header > div:first-of-type > :not(button)":{display:"none"},"& .header > i":{display:"none"},"& .header button":{margin:`${c.Ks.rem(o.v$)} 0`}}},withoutHeader:{$nest:{"& .header":{display:"none"}}},withoutPlagiarismButton:{$nest:{'& button.action-row-btn[data-label*="plagiarism"]':{display:"none"},'& div:has(+ button.action-row-btn[data-label*="plagiarism"])':{display:"none"}}},withNavigationRoot:{marginRight:c.Ks.rem(d.xS)},$nest:{[h.$U.tiny]:{},[h.$U.xs]:{marginRight:c.Ks.rem(d.wn)},[h.$U.xsLower]:{marginRight:c.Ks.rem(d.wn),width:c.Ks.rem(21)},[g]:{marginRight:0}}},v=(0,n._)({position:"relative",zIndex:d.rE},_.base),b=(0,n._)({},v,_.withoutHeader),C=(0,s._)((0,n._)({},v),{$nest:(0,n._)({},_.base.$nest,_.withoutPlagiarismButton.$nest)}),k={position:"relative",zIndex:d.rE,marginRight:c.Ks.rem(d.xS),width:c.Ks.rem(d.NE),transition:"opacity .2s",$nest:{[h.$U.tiny]:{width:c.Ks.rem(d.rQ)},[h.$U.xs]:{width:c.Ks.rem(d.gx),marginRight:c.Ks.rem(d.wn)},[h.$U.xsLower]:{width:c.Ks.rem(d.gx),marginRight:c.Ks.rem(d.wn-1)},[g]:{width:c.Ks.rem(d.gx),marginRight:0},[h.$U.xss]:{width:c.Ks.rem(d.Bi),$nest:{[`& button[data-name*="${r.A7.ButtonPrev}"], & button[data-name*="${r.A7.ButtonNext}"]`]:{display:"none"}}}}},S={width:u},w={$nest:{"&:before":{position:"absolute",left:c.Ks.rem(-2.5),display:"block",marginTop:c.Ks.rem(-4),paddingTop:c.Ks.rem(4),width:c.Ks.rem(2.5),height:c.Ks.percent(100),background:a.White,content:"''"}}},x={position:"absolute",top:0,right:0,zIndex:c.Ks.important(d.k2)},E={position:"absolute",zIndex:d.yg,opacity:1},T={position:"absolute",opacity:0,transform:`translateX(${p})`},A=(d.yg,c.Ks.keyframes({"0%":{transform:`translateX(${p})`,opacity:0},"100%":{transform:"translateX(0)",opacity:1}})),M={display:"flex",height:c.Ks.percent(100),position:"fixed",animation:A,animationDuration:"0.3s",$nest:{"& > div":{display:"flex",flex:1,height:c.Ks.percent(100)}}},K={position:"absolute",zIndex:d.rE,opacity:0,transform:`translateX(${p})`},B={zIndex:d.do,height:"auto"},I={$nest:{'& [aria-controls*="navbar-right"]':{top:c.Ks.rem(3.75)}}},N={position:"relative",opacity:1},$={$nest:{"&.gds-button":{background:l.Q.Background.Base.Default,border:`1px solid ${l.Q.Border.Base.Subdued}`,width:c.Ks.rem(o.v5),borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"none",position:"absolute",top:c.Ks.rem(o.Jj),left:c.Ks.rem(-o.v5)}}},R={position:"fixed",right:c.Ks.rem(o.v5),top:c.Ks.rem(o.Jj),display:"flex",alignItems:"center",$nest:{[h.$U.small]:{top:c.Ks.rem(o.C2)}}},L=c.Ks.prefixedStylesheet("assistant",{sidebarWrapper:[f,y],wrapper:[k],oggyWrapper:[v],oggyWrapperWithoutHeader:[b],oggyWrapperWithoutPlagiarismButton:[C],iPadWrapper:[k,S],oggyLoaderWrapper:[v,w],hiddenWrapper:[x],sidebarTier:[B],sidebarTierOggy:[I],refreshedOggyOpen:[M],closeButton:[$],toggleWrapper:[R]}),F=c.Ks.stylesheet({sidebarLoaderBase:[N],checkingInStart:[T,N],checkingInEnd:[E,N],checkingOutStart:[{transform:"translateX(0)"},N],checkingOutEnd:[K,N],checkingStart:[{opacity:.99}],checkingEnd:[{opacity:1,transition:"opacity .01s"}],hideStart:[{pointerEvents:"none"}],hideEnd:[{opacity:0,transition:"opacity .01s",pointerEvents:"none"}]})},92468:(e,t,i)=>{i.d(t,{R:()=>A});var n=i(10334),s=i(17171),r=i(85886),o=i(86922),a=i(19967),l=i(14973),c=i(65873),d=i(11864),h=i(27199);const m={width:d.Ks.rem(31)},p={backgroundColor:h.Q1.CoreNeutral0,paddingBottom:0},u={paddingTop:d.Ks.rem(1)},g={display:"grid",gridTemplateColumns:"4fr 2fr 5fr",marginBottom:d.Ks.rem(1)},f={marginBottom:d.Ks.rem(.3)},y={paddingTop:d.Ks.rem(.3)},_={marginRight:d.Ks.rem(.25)},v={fontSize:d.Ks.rem(.75),color:h.Q1.CoreNeutral50,marginBottom:d.Ks.rem(2)},b=d.Ks.stylesheet({wrapper:[m],header:[p],content:[u],offer:[g],plan:[{display:"flex",flexDirection:"column"}],planTitle:[f],arrow:[y],badge:[_],subMonthlyPrice:[v]});var C=i(35198);const k=()=>r.createElement("svg",{"aria-hidden":!0,width:"31",height:"13",viewBox:"0 0 31 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1 6.5H30M30 6.5L24.5 1M30 6.5L24.5 12",stroke:"#0E101A",strokeLinecap:"round"}));var S=i(83683);const w=({current:e})=>r.createElement("div",{className:b.plan},r.createElement(c.H4,{className:b.planTitle},e.title),r.createElement(c.C6,null,r.createElement(S.J9,(0,s._)((0,n._)({},e.regularPriceMoney),{periodInMonths:e.periodMonths})),r.createElement("div",{className:b.subMonthlyPrice},r.createElement(S.Ly,(0,s._)((0,n._)({},e.regularPriceMoney),{periodInMonths:e.periodMonths}))))),x=({offer:e,saved:t})=>{const i=r.useContext(o.S.Context).changePlan;return r.createElement("div",{className:b.plan},r.createElement(c.H4,{className:b.planTitle},e.title),r.createElement(c.C6,null,r.createElement(S.J9,(0,s._)((0,n._)({},e.regularPrice),{periodInMonths:e.periodInMonths})),"",r.createElement(C.E.Regular,{className:b.badge},i.savedBadge(t.percent)),r.createElement("div",{className:b.subMonthlyPrice},r.createElement(S.Ly,(0,s._)((0,n._)({},e.regularPrice),{periodInMonths:e.periodInMonths})))))},E=({current:e,offer:t,saved:i})=>r.createElement("div",{className:b.offer},r.createElement(w,{current:e}),r.createElement("div",{className:b.arrow},r.createElement(k,null)),r.createElement(x,{offer:t,saved:i})),T=e=>{const t=r.useContext(o.S.Context).changePlan,i=r.useContext(l.aF.TitleIdContext);return r.createElement(c.H2,{id:i},t.title(r.createElement(S.J9,(0,s._)((0,n._)({},e.savedPrice.pricePerYear),{periodInMonths:12}))))},A=({changePlanViewModel:{currentPlan:e,offer:t,savedPrice:i,nextPaymentDate:n,changePlan:s,close:d}})=>{const h=r.useContext(o.S.Context).changePlan;return r.createElement(l.aF,{className:b.wrapper},r.createElement(l.aF.Header,{className:b.header},r.createElement(T,{savedPrice:i})),r.createElement(l.aF.Body,{name:"change.plan.body",className:b.content},r.createElement(r.Fragment,null,r.createElement(E,{current:e,offer:t,saved:i}),r.createElement(c.jN,null,h.confirmationDescription(e.title,n,r.createElement(S.X0,t.price),r.createElement(S.X0,t.regularPrice),t.periodInMonths)))),r.createElement(l.aF.Footer,null,r.createElement(a.$n.Ghost,{name:"modal.cancel",onClick:d},h.cancelButton),r.createElement(a.$n.Primary,{name:"confirm.change.to.annual",onClick:s},h.confirmationButton(t.title))))}},83683:(e,t,i)=>{i.d(t,{J9:()=>l,Ly:()=>a,X0:()=>o});var n=i(85886),s=i(30595),r=i(86922);const o=({value:e,currency:t})=>{const i="USD"===t?"$":`${t} `;return n.createElement(n.Fragment,null,i,(0,s.$g)(e))},a=({value:e,currency:t,periodInMonths:i})=>{const s=e/Math.max(1,i),a=n.useContext(r.S.Context).changePlan;return n.createElement(n.Fragment,null,n.createElement(o,{currency:t,value:s}),"/",a.perMonth)},l=({value:e,currency:t,periodInMonths:i})=>{const s=e/Math.max(1,i)*12,a=n.useContext(r.S.Context).changePlan;return n.createElement(n.Fragment,null,n.createElement(o,{currency:t,value:s}),"/",a.perYear)}},24564:(e,t,i)=>{i.d(t,{A:()=>l});var n=i(13607),s=i(11864);const r={position:"relative",display:"flex",minWidth:700,$nest:{"@media print":{display:"block"}}},o={position:"absolute",top:0,zIndex:n.ry,display:"flex",overflow:"hidden",minWidth:`calc(${s.Ks.px(950)} - ${s.Ks.rem(n.o1-.5)})`,width:s.Ks.percent(100),height:"var(--100vh)",pointerEvents:"none",justifyContent:"flex-end"},a={margin:0,padding:`0 ${s.Ks.rem(3.5)}`,maxWidth:s.Ks.rem(46),width:s.Ks.percent(100)},l=s.Ks.prefixedStylesheet("editor-page-main",{firstTier:[r],firstTierLoader:[r,o],editor:[a]})},78747:(e,t,i)=>{i.d(t,{uF:()=>ft,zz:()=>gt,JG:()=>yt});var n=i(23988),s=i(10334),r=i(85886),o=i(38886),a=i(65390),l=i(24819),c=i(40734),d=i(61198),h=i(61790),m=i(7149),p=i(80300),u=i(19813),g=i(26068),f=i(11864);const y=f.Ks.prefixedStylesheet("signup-modal",{modal:[{$nest:{"& .gds-modal-header":{display:"none"},"& .gds-modal-body":{paddingTop:"var(--space-8)"},"& .gds-modal-body-border-top":{borderTop:"none"}}}],spinnerWrapper:[{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}],iframeContainer:[{width:"460px",overflow:"hidden",backgroundColor:"white",borderRadius:"4px",padding:"24px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}],iframe:[{width:"100%",outline:"none",border:0,margin:0,transition:"all 1s"}]}),_=({signupModalViewModel:e})=>{const[t,i]=r.useState(500),[n,s]=r.useState(!1),{onAuthSuccess:o,loginServiceOrigin:a,close:l,signupEmbedUrl:c}=e;return r.useEffect((()=>{const e=e=>{var t,n,r;if(e.origin===a)if("verify"===(null===(t=e.data)||void 0===t?void 0:t.type)){const t=e.source;if(!t||!("postMessage"in t))throw Error("Cannot send initialize request to source");t.postMessage({type:"verified"},a)}else"resize"===(null===(n=e.data)||void 0===n?void 0:n.type)?(s(!0),i(e.data.height)):"authSuccess"===(null===(r=e.data)||void 0===r?void 0:r.type)&&o()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[o,a]),r.createElement(u.aF,{width:"medium",title:"Sign Up",isOpen:!0,onClose:()=>{l()},className:y.modal},r.createElement(u.aF.Body,{className:y.iframeContainer},r.createElement("iframe",{title:"Sign Up",id:"signupFrame",className:y.iframe,style:{opacity:n?1:0,height:t},src:c}),!n&&r.createElement(g.a,{accessibilityLabel:"Loading signup form"},r.createElement(g.a.Circular,{className:y.spinnerWrapper,size:"large"}))))};var v=i(98969),b=i(78450),C=i(18810),k=i(40884);class S{get isBusinessAdmin(){return k.DY.isBusinessAdmin(this._userAccount.features.denaliUserType)}constructor(e,t,i,s){(0,n._)(this,"_userAccount",void 0),(0,n._)(this,"_config",void 0),(0,n._)(this,"_environment",void 0),(0,n._)(this,"_telemetry",void 0),(0,n._)(this,"dismiss",void 0),(0,n._)(this,"updatePayment",void 0),this._userAccount=e,this._config=t,this._environment=i,this._telemetry=s,this.dismiss=()=>{this._userAccount.settings.incrementDunningDismissCount()},this.updatePayment=()=>{this._telemetry.gnarSpec.inProductDunningNoticationUpdatePaymentInformationButtonClick(this._telemetry.pageId),this._environment.actions.openPopup(new C.U(this._config.account.subscription))}}}var w=i(17171),x=i(84712),E=i(89186),T=i(35679),A=i(19805),M=i(29862),K=i(37107);const B=A.x.Category.Id.create(T.xD.SpecialCategory.InQuotes);class I{constructor(e,t,i,r){(0,n._)(this,"_denaliSettings",void 0),(0,n._)(this,"_categoriesModel",void 0),(0,n._)(this,"_features",void 0),(0,n._)(this,"_telemetry",void 0),(0,n._)(this,"_preferencesModel",void 0),(0,n._)(this,"_newPreferences",void 0),(0,n._)(this,"trackOpened",void 0),(0,n._)(this,"trackSuggestionManagementClicked",void 0),(0,n._)(this,"update",void 0),(0,n._)(this,"autoScrollToNextAlert",void 0),(0,n._)(this,"fontSize",void 0),(0,n._)(this,"suggestionsVisualMode",void 0),(0,n._)(this,"muteQuotedAlerts",void 0),this._denaliSettings=e,this._categoriesModel=t,this._features=i,this._telemetry=r,this._preferencesModel=this._denaliSettings.editorPreferences,this._newPreferences=x.s.create(this._denaliSettings.editorPreferences.get()),this.trackOpened=()=>{this._telemetry.gnarSpec.preferencesPopupShow(this._telemetry.pageId)},this.trackSuggestionManagementClicked=()=>{this._telemetry.gnarSpec.deactivatedSuggestionsSuggestionManagementClick(this._telemetry.pageId,"editorSettings",this._telemetry.pageSessionId)},this.update=()=>{const e=this._newPreferences.get(),t=this._categoriesModel.getMutedSpecialCategories().has(B),i=this.muteQuotedAlerts.get(),n=t!==i,s=!K.$u.eq.equals(this._preferencesModel.get(),e)||n;e.suggestionsVisualMode!==this._preferencesModel.get().suggestionsVisualMode&&this._telemetry.gnarSpec.suggestionsVisualModeFeatureToggled(this._telemetry.pageId,e.suggestionsVisualMode,this._telemetry.pageSessionId),s&&(this._denaliSettings.updateEditorPreferences(e),this._telemetry.gnarSpec.preferencesFormSuccess(this.autoScrollToNextAlert.get(),e.fontSize,i,this._telemetry.pageId,e.suggestionsVisualMode)),n&&(t?(this._categoriesModel.unmuteCategories([B]),this._telemetry.gnarSpec.muteQuotedAlertsFeatureToggled(this._telemetry.pageId,"unmuted",this._telemetry.pageSessionId)):(this._categoriesModel.muteCategories([B]),this._telemetry.gnarSpec.muteQuotedAlertsFeatureToggled(this._telemetry.pageId,"muted",this._telemetry.pageSessionId)))},this.autoScrollToNextAlert=this._newPreferences.lens("autoScrollToNextAlert").lens(M.O.unwrap(!this._features.autoJumpSettings.isDisabledByDefault)),this.fontSize=this._newPreferences.lens(E.vt((e=>e.fontSize===K.Z4.Large),((e,t)=>(0,w._)((0,s._)({},t),{fontSize:e?K.Z4.Large:K.Z4.Normal})))),this.suggestionsVisualMode=this._newPreferences.lens(E.vt((e=>e.suggestionsVisualMode===K.pK.Accessible),((e,t)=>(0,w._)((0,s._)({},t),{suggestionsVisualMode:e?K.pK.Accessible:K.pK.Default})))),this.muteQuotedAlerts=x.s.create(this._categoriesModel.getMutedSpecialCategories().has(B))}}var N=i(35382),$=i(66202),R=i(84647),L=i(1224),F=i(63687),D=i(48779),H=i(14553),P=i(79937),O=i(83694),Q=i(93432),W=i(57836),V=i(81753),U=i(30343),z=i(55575),j=i(72911),q=i(88e3);class G{constructor(e,t,i,s){(0,n._)(this,"reportViewModel",void 0),(0,n._)(this,"_documentModel",void 0),(0,n._)(this,"_notificationsManager",void 0),(0,n._)(this,"_modalOperations",void 0),(0,n._)(this,"state",void 0),(0,n._)(this,"onModalClose",void 0),this.reportViewModel=e,this._documentModel=t,this._notificationsManager=i,this._modalOperations=s,this.state=F.v((()=>D.RF((()=>this._documentModel.calculateStats())))).pipe(H.z(this._documentModel.checkingState,((e,t)=>(0,R.pipe)(e,a.filter((()=>"idle"===t))))),P.n(a.fold((()=>O.of({type:q.K.State.Type.LOADING}).pipe(Q.c(150))),$.fold((e=>(L.Bx.Logging.getLogger("editor.toolbar").error("Error on requesting document stats",e),this._notificationsManager.enqueue("statisticsError").pipe(W.u({type:q.K.State.Type.ERROR}),V.j((()=>this.onModalClose()))))),(e=>x.s.combine(this._documentModel.score,this._documentModel.counters,this._documentModel.documentLength.view("trimmed"),((t,i,n)=>(0,R.pipe)(t,a.fold((()=>({type:q.K.State.Type.SHORT_CONTENT})),(t=>({type:q.K.State.Type.READY,documentIsEmpty:0===n,score:t,counters:i,stats:e})))))))))),U.Z({type:q.K.State.Type.EMPTY}),z.H(1),j.B()),this.onModalClose=()=>{this._modalOperations.onClose()}}}var Y,J=i(92802),X=i(41468),Z=i(99010),ee=i(65160),te=i(51770),ie=i(17223),ne=i(1424),se=i(18286);class re{constructor(e,t){(0,n._)(this,"_modalOperations",void 0),(0,n._)(this,"_config",void 0),(0,n._)(this,"close",void 0),(0,n._)(this,"onAuthSuccess",void 0),(0,n._)(this,"loginServiceOrigin",void 0),(0,n._)(this,"signupEmbedUrl",void 0),this._modalOperations=e,this._config=t,this.close=()=>{this._modalOperations.onClose()},this.onAuthSuccess=()=>{window.location.href=this._config.funnel.personalize},this.loginServiceOrigin=this._config.funnel.base,this.signupEmbedUrl=this._config.funnel.signupEmbed}}!function(e){let t,i;!function(e){e[e.SMALL=0]="SMALL",e[e.LARGE=1]="LARGE"}(t=e.Type||(e.Type={})),function(e){e[e.SHOW_ALL=0]="SHOW_ALL",e[e.HIDE_PREV=1]="HIDE_PREV",e[e.HIDE_NEXT=2]="HIDE_NEXT",e[e.HIDE_BOTH=3]="HIDE_BOTH"}(i=e.NavigationControlDisplay||(e.NavigationControlDisplay={}))}(Y||(Y={}));class oe{start(){this._currentStepIndex.set(a.some(0)),this._onStart()}constructor(e,t,i,s,r=R.constVoid){(0,n._)(this,"type",void 0),(0,n._)(this,"_stepMap",void 0),(0,n._)(this,"_settings",void 0),(0,n._)(this,"_modalOperations",void 0),(0,n._)(this,"_onStart",void 0),(0,n._)(this,"_steps",void 0),(0,n._)(this,"_currentStepIndex",void 0),(0,n._)(this,"_abort",void 0),(0,n._)(this,"_getStepForIndex",void 0),(0,n._)(this,"descriptionMeta",void 0),(0,n._)(this,"currentStep",void 0),(0,n._)(this,"goToNext",void 0),(0,n._)(this,"goToPrev",void 0),this.type=e,this._stepMap=t,this._settings=i,this._modalOperations=s,this._onStart=r,this._steps=this.type===k.fO.TourType.migration?oe._migrationTour:oe._welcomeTour,this._currentStepIndex=x.s.create(a.none),this._abort=()=>{this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose(),this._currentStepIndex.set(a.none)},this._getStepForIndex=e=>{const t=this._steps[e],i=this._stepMap[t.stepId];switch(i.type){case Y.Type.LARGE:var n;return{stepId:t.stepId,type:i.type,index:e,content:i.renderContent(),description:i.renderDescription.bind(i),navigationControl:null!==(n=t.navigationControl)&&void 0!==n?n:Y.NavigationControlDisplay.SHOW_ALL};case Y.Type.SMALL:return{stepId:t.stepId,type:i.type,index:e,content:i.renderContent({type:this.type,abort:this._abort,goToNext:this.goToNext,goToPrev:this.goToPrev}),navigationControl:Boolean(t.navigationControl)?t.navigationControl:Y.NavigationControlDisplay.HIDE_BOTH};default:return(0,l.xb)(i)}},this.descriptionMeta=this._currentStepIndex.view(a.map((e=>({index:e,steps:this._steps.length})))).view(a.map((({index:e,steps:t})=>({index:e<1||e>=t-1?e:e-1,totalSteps:t-2})))),this.currentStep=this._currentStepIndex.view(a.map(this._getStepForIndex)),this.goToNext=()=>this._currentStepIndex.modify(a.chain((e=>{const t=e+1;return Boolean(this._steps[t])?a.some(t):(this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose(),a.none)}))),this.goToPrev=()=>this._currentStepIndex.modify(a.map((e=>{const t=e-1;return Boolean(this._steps[t])?t:0})))}}(0,n._)(oe,"_migrationTour",[{stepId:"welcomeOldUser"},{stepId:"fastApply",navigationControl:Y.NavigationControlDisplay.HIDE_PREV},{stepId:"assistant"},{stepId:"checkTypes"},{stepId:"goals"},{stepId:"finalOldUser",navigationControl:Y.NavigationControlDisplay.HIDE_NEXT}]),(0,n._)(oe,"_welcomeTour",[{stepId:"welcomeNewUser"},{stepId:"fastApply",navigationControl:Y.NavigationControlDisplay.HIDE_PREV},{stepId:"assistant"},{stepId:"checkTypes"},{stepId:"goals"},{stepId:"finalNewUser",navigationControl:Y.NavigationControlDisplay.HIDE_NEXT}]);class ae{get showOnboardingTourA11yUpdates(){return this._features.showOnboardingTourA11yUpdates}constructor(e,t,i){(0,n._)(this,"_settings",void 0),(0,n._)(this,"_features",void 0),(0,n._)(this,"_modalOperations",void 0),(0,n._)(this,"close",void 0),this._settings=e,this._features=t,this._modalOperations=i,this.close=()=>{this._settings.denaliWelcomeTourSeen(),this._modalOperations.onClose()}}}var le=i(71828),ce=i(14973),de=i(92468);const he=({changePlanViewModel:e})=>r.createElement(ce.Gd,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.close},r.createElement(de.R,{changePlanViewModel:e}));var me=i(86751),pe=i(686),ue=i(56062),ge=i(53764),fe=i(92824),ye=i(19772),_e=i(35426),ve=i(9225);const be=({modalOperations:e,telemetry:t})=>{const{downloadLogs:i}=r.useContext(_e.k.Context),[n,s]=r.useState(!0);ye.R.useEffectOnDidMount((()=>{t.gnarSpec.downloadLogsPopupShow(t.pageId)}));const o=()=>{s(!1),e.onClose()};return r.createElement(u.aF,{title:i.title,isOpen:n,onClose:o},r.createElement(u.aF.Body,null,r.createElement(pe.s,{direction:"column",gap:4},r.createElement(ue.E,{as:"span",variant:"text-medium"},i.text),r.createElement(ue.E,{as:"span",variant:"text-medium"},i.learnMore," ",r.createElement(ge.N,{variant:"primary",href:"https://www.grammarly.com/privacy-policy",target:"_blank"},i.privacyPolicy)))),r.createElement(u.aF.Footer,null,r.createElement(pe.s,{direction:"row",gap:4},r.createElement(fe.$,{variant:"primary",text:i.yes,onClick:()=>{t.gnarSpec.downloadLogsButtonClick(t.pageId,"popup"),(0,ve.K)(),o()}}),r.createElement(fe.$,{variant:"tertiary",text:i.no,onClick:o}))))};var Ce=i(25093),ke=i(19436),Se=i(57982),we=i(46924),xe=i(62016),Ee=i(82840),Te=i(81738),Ae=i(24934),Me=i(59233),Ke=i(24335),Be=i(10199),Ie=i(83407),Ne=i(83932),$e=i(50983),Re=i(98205),Le=i(21037),Fe=i(37634);const De={width:f.Ks.rem(Re.Hk),height:f.Ks.rem(Re.Hk),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:f.Ks.rem(Re.v$),borderRadius:f.Ks.rem(Le.KY),fontWeight:400,fontSize:f.Ks.rem(.75),lineHeight:f.Ks.rem(1.125),$nest:{"&:hover":{backgroundColor:Fe.Q.Background.Base.Subdued}}},He={backgroundColor:Fe.Q.Background.Brand.Default,color:Fe.Q.Text.Base.Inverse,$nest:{"&:hover":{backgroundColor:Fe.Q.Background.Brand.Default}}},Pe={boxShadow:`0 0 0 2px ${Fe.Q.Border.Brand.Default}`},Oe={width:f.Ks.rem(Re.v5),height:f.Ks.rem(Re.v5)},Qe={height:f.Ks.rem(12),outline:"none"},We=f.Ks.prefixedStylesheet("feedback-form",{scoreButton:[De],scoreButtonSelected:[He],scoreButtonFocused:[Pe],emojiIcon:[Oe],textArea:[Qe]}),Ve=r.createContext(Ne.o.invariantContent("RadioGroupState")),Ue=e=>{const{children:t,label:i}=e,n=(0,Te.Z)(e),{radioGroupProps:o,labelProps:a}=(0,Se.m)((0,w._)((0,s._)({},e),{orientation:"horizontal"}),n);return r.createElement(pe.s,(0,s._)({direction:"column",gap:4},o),r.createElement(we.s,null,r.createElement(Ae.D,(0,s._)({as:"h4"},a),i)),r.createElement(Ve.Provider,{value:n},r.createElement(pe.s,{direction:"row",justify:"space-between",paddingLeft:8,paddingRight:8},t)))},ze=e=>{const t=r.useContext(Ve),i=r.useRef(null),{inputProps:n}=(0,Se.z)((0,w._)((0,s._)({},e),{"aria-label":e.label}),t,i),{focusProps:o,isFocusVisible:a}=(0,xe.og)(),l=t.selectedValue===e.value,c=(0,Ee.Bi)();return r.createElement("label",{className:(0,Ie.Ly)(We.scoreButton,l&&We.scoreButtonSelected,a&&We.scoreButtonFocused)},r.createElement(we.s,null,r.createElement("input",(0,w._)((0,s._)({},(0,Ee.v6)(n,o)),{ref:i,"aria-labelledby":c}))),e.icon,r.createElement(ue.E,{id:c,as:"span",variant:"text-small"},e.label))},je=({onSelectScore:e})=>{const{feedbackForm:t}=r.useContext(_e.k.Context);return r.createElement(Ue,{label:t.label,onChange:e},r.createElement(ze,{value:$e.Gb.Mood.dissatisfied,label:t.dissatisfied,icon:r.createElement(Me.O,{className:We.emojiIcon})}),r.createElement(ze,{value:$e.Gb.Mood.ok,label:t.ok,icon:r.createElement(Ke.k,{className:We.emojiIcon})}),r.createElement(ze,{value:$e.Gb.Mood.satisfied,label:t.satisfied,icon:r.createElement(Be.s,{className:We.emojiIcon})}))},qe=({feedbackViewModel:e,modalOperations:t})=>{const{feedbackForm:i}=r.useContext(_e.k.Context),n=x.s.create(!0);return ye.R.useEffectOnDidMount((()=>{e.modalShown.next();const i=n.pipe(Ce.$((e=>!1===e))).subscribe(t.onClose);return()=>i.unsubscribe()})),r.createElement(ke.cI,{width:"small",isOpen:n,title:i.label,onClose:()=>n.set(!1)},r.createElement(u.aF.Body,null,r.createElement(pe.s,{direction:"column",gap:4,paddingTop:4},r.createElement(je,{onSelectScore:t=>e.currentText.lens("mood").set(t)}),r.createElement(ke.lB,{label:i.inputLabel,className:We.textArea,onChange:t=>{e.currentText.lens("message").set(t)},resizable:"off"}))),r.createElement(u.aF.Footer,null,r.createElement(pe.s,{gap:{column:3},justify:"end",width:"100%"},r.createElement(fe.$,{variant:"tertiary","data-name":"cancel",text:i.cancel,onClick:()=>n.set(!1)}),r.createElement(ke.RQ,{variant:"primary",text:i.submit,"data-name":"submit",isDisabled:e.currentText.view((e=>null==e.mood)),onClick:()=>(n.set(!1),e.sendFeedback())}))))};var Ge=i(90988),Ye=i(24767),Je=i(80843),Xe=i(20408),Ze=i(86922),et=i(19967),tt=i(65873),it=i(27199);const nt=e=>r.createElement(ce.Gd,{positionType:"fixed",animate:!0,onClose:e.modalOperations.onClose},r.createElement(rt,{preferencesViewModel:e.preferencesViewModel,close:e.modalOperations.onClose})),st=()=>{const e=r.useContext(Ze.S.Context),t=r.useContext(ce.aF.TitleIdContext);return r.createElement(tt.H1,{id:t},e.editorSettingsModalHeader)},rt=({preferencesViewModel:e,close:t})=>{const i=r.useContext(Ze.S.Context);return ye.R.useEffectOnDidMount(e.trackOpened),ye.R.useEffectOnWillUnmount(e.update),r.createElement(ce.aF,{className:ut.popupWrapper},r.createElement(ce.aF.Header,{className:ut.popupHeader},r.createElement(st,null)),r.createElement(ce.aF.Body,{name:"preferencesBody",className:ut.popupBody},r.createElement(dt,{value:e.autoScrollToNextAlert,id:"autoScrollSwitcher",title:i.preferences.autoJumpToNextAlert,description:i.preferences.autoJumpToNextAlertDescription}),r.createElement(dt,{value:e.muteQuotedAlerts,id:"muteCitedAlerts",title:i.preferences.muteQuotedAlerts}),r.createElement(dt,{value:e.fontSize,id:"fontSizeIncreasedSwitcher",title:i.preferences.increaseFontSize}),r.createElement(dt,{value:e.suggestionsVisualMode,id:"suggestionsVisualModeSwitcher",title:i.preferences.suggestionsVisualMode.title,description:i.preferences.suggestionsVisualMode.descritionSDUI}),r.createElement(ct,{onClick:e.trackSuggestionManagementClicked})),r.createElement(ce.aF.Footer,null,r.createElement(et.$n.Primary,{name:"pref-done-btn",className:ut.doneButton,onClick:t},i.done)))},ot=({children:e})=>r.createElement(tt.Oc,{className:ut.description},e),at=({children:e,className:t})=>r.createElement("section",(0,Je.Ly)(ut.bodySection,t),e),lt=e=>{const t=r.useContext(Xe._.Context),i=r.useContext(Ze.S.Context).preferences;return r.createElement(pe.s,{marginLeft:-3,justify:"flex-start"},r.createElement(Ge.x,{name:"manage-suggestions",variant:"ghost",href:t.account.suggestions,target:"_blank",onClick:e.onClick,iconEnd:Ye.r,text:i.suggestionManagementLink}))},ct=e=>{const t=r.useContext(Ze.S.Context).preferences;return r.createElement(at,null,r.createElement(lt,{onClick:e.onClick}),r.createElement(ot,null,t.suggestionManagementDescription))},dt=({value:e,id:t,title:i,description:n,className:s})=>r.createElement(at,{className:(0,Ie.Ly)(null!=n?ut.settingWithDescription:ut.setting,s)},r.createElement(ke.pG,{isSelected:e,onChange:t=>e.set(t),className:ut.toggle,"data-name":t,"aria-labelledby":t,label:i,helperMessage:n})),ht=f.Ks.rem(2),mt=f.Ks.rem(1),pt={display:"flex",cursor:"pointer",justifyContent:"space-between",$nest:{"& > .gds-switch":{width:f.Ks.percent(100)}}},ut=f.Ks.prefixedStylesheet("preferencePopup",{popupWrapper:[{display:"flex",flexDirection:"column",width:f.Ks.rem(27),userSelect:"none"}],popupHeader:[{padding:`${f.Ks.rem(3)} ${ht} ${mt}`,backgroundColor:it.Q1.CoreNeutral0}],popupBody:[{padding:`0 ${ht}`}],doneButton:[{padding:f.Ks.important(`0 ${mt}`)}],bodySection:[{padding:`${mt} 0`,borderTop:`1px solid ${it.Q1.CoreNeutral20}`}],description:[{color:it.Q1.CoreNeutral50,marginTop:f.Ks.rem(.5),whiteSpace:"pre-line"}],selectableLabel:[{userSelect:"text",cursor:"text"}],setting:[pt,{$nest:{"& > .gds-switch > label > .gds-flex > .gds-flex":{alignItems:"center"}}}],settingWithDescription:[pt],toggle:[{marginLeft:f.Ks.rem(1.75),marginTop:f.Ks.rem(.125)}]});var gt,ft;!function(e){e.Tour="Tour",e.WhatsNew="WhatsNew",e.Proofit="Proofit",e.Preferences="Preferences",e.Feedback="Feedback",e.ChangePlan="ChangePlan",e.Dunning="Dunning",e.SignOut="SignOut",e.SignUp="SignUp",e.DownloadLogs="DownloadLogs"}(gt||(gt={})),function(e){e.tour={type:gt.Tour},e.news={type:gt.WhatsNew},e.feedback={type:gt.Feedback},e.dunning={type:gt.Dunning},e.preferences={type:gt.Preferences},e.changePlan=e=>({type:gt.ChangePlan,model:e}),e.setGoals=d.ug.setGoals,e.performance=d.ug.performance,e.signOut={type:gt.SignOut},e.signUp={type:gt.SignUp},e.downloadLogs={type:gt.DownloadLogs}}(ft||(ft={}));class yt{load(e){switch(e.type){case gt.ChangePlan:return this._loadChangePlanModal(e.model);case gt.Tour:return this._loadTour();case gt.WhatsNew:return this._loadWhatsNew();case gt.Preferences:return this._loadPreferences();case gt.Feedback:return this._loadFeedback();case gt.Dunning:return this._loadDunning();case d.f_.SetGoals:return this._loadSetGoals(e.source);case d.f_.Performance:return this._loadPerformance();case gt.Proofit:throw new Error(`Failed to load ${e} modal`);case gt.SignOut:return this._loadSignOut();case gt.SignUp:return this._loadAnonymousSignUpGate();case gt.DownloadLogs:return this._downloadLogs();default:return(0,l.xb)(e)}}_loadTour(){return Promise.all([i.e(8250),i.e(1737)]).then(i.bind(i,52698)).then((({WelcomeModal:e})=>t=>{const i=new ae(this._userAccount.settings,this._userAccount.features.denali,t);return{instance:{type:gt.Tour},component:r.createElement(e,{welcomeModalViewModel:i})}}))}_loadWhatsNew(){return Promise.all([i.e(8310).then(i.bind(i,89827)).then((({newsMedia:e,initStaticNewsData:t,ordNews:i})=>{const n=Object.values(t(this._textResources.base)).map((t=>({id:t.id,date:t.date,content:(0,s._)({title:t.title,body:t.body},e[t.id])}))),r=o.di(i)(Object.values(n).filter((e=>this._userAccount.features.denali.newsConfig[e.id].visible())));return r.forEach((e=>{(new Image).src=N.f.Content.isVideo(e.content)?e.content.poster:e.content.image})),r})),i.e(8310).then(i.bind(i,51074))]).then((([e,{WhatsNewPopup:t}])=>i=>({instance:{type:gt.WhatsNew},component:r.createElement(t,{newsVM:new N.A(this._userAccount.settings),content:e,modalOperations:i})})))}_loadSetGoals(e){return Promise.resolve((t=>{const i=function(e,t,i,n,s,r,o,l=R.constVoid,c){return(0,R.pipe)(ie.h(t,function(e,t,i){return{goalsPopupShow:t=>e.gnarSpec.goalsPopupShow(e.pageId,t),getPremiumButtonClick:()=>se.J.create(e.gnarSpec).trackClick({pageId:e.pageId,bannerType:"goPremium",placement:"setGoalsPopup"}),goalsFormSuccess:(n,s)=>{const r=()=>ee.gR("academic")(n.domain)&&t.features.denali.isStudentsOFE;return e.gnarSpec.goalsFormSuccess((0,R.pipe)(n.domain,a.getOrElse((()=>s.domain))),(0,R.pipe)(n.goals,a.map((e=>r()?[]:e)),a.getOrElse((()=>s.goals)),(e=>Array.from(e))),e.pageId,i,(0,R.pipe)(n.outcomeContext,a.filter(r),a.map((0,te.Up)("type")),a.toUndefined),(0,R.pipe)(n.audience,a.filter((0,J.AU)(r)),a.toUndefined),(0,R.pipe)(n.outcomeContext,a.filter(r),a.map((0,te.Up)("citation")),a.toUndefined),(0,R.pipe)(n.style,a.filter((0,J.AU)(r)),a.toUndefined))}}}(n,e,r),s,r,o,{demoMode:e.features.demoMode,isFree:e.features.isFree.get(),isStudentsOFE:e.features.denali.isStudentsOFE,isEligibleForFreeTrial:e.features.freeTrialSpecialOffer.get().isEligible},(()=>i.openUpgradeUrl(ne.Y.Place.DenaliDocument.editorDenaliGoals)),e.settings.enableSetGoalsLoader.get(),l,c),p.n.extendActions(X.F(Z.M((t=>{t.kind===h.b.ActionsKind.close&&e.settings.enableSetGoalsLoader.get()!==t.showOnLoad&&(e.settings.updateSetGoalsLoader(t.showOnLoad),n.gnarSpec.showGoalsNewDocumentFormSuccess(t.showOnLoad,n.pageId,r))})))))}(this._userAccount,this._documentContext,this._upgradeViewModel,this._telemetry,t,e,c.T0.defaultContextFallback,this._setGoalsA11yStatus.change,this._categoriesModel.getMutedCategories);return{instance:{type:d.f_.SetGoals,source:e},component:p.UI.mount(h.b.Modal,i)}}))}_loadPreferences(){const e=new I(this._userAccount.settings,this._categoriesModel,this._userAccount.features.denali,this._telemetry);return Promise.resolve((t=>({instance:{type:gt.Preferences},component:r.createElement(nt,{preferencesViewModel:e,modalOperations:t})})))}_loadFeedback(){return Promise.resolve((e=>({instance:{type:gt.Feedback},component:r.createElement(qe,{feedbackViewModel:this._feedbackViewModel,modalOperations:e})})))}_loadSignOut(){return Promise.all([i.e(2791),i.e(5464)]).then(i.bind(i,25185)).then((({SignOutPopup:e})=>t=>{const i=e.Flow(t,this._telemetry,this._userAccount.settings,this._userAccount.features,this._userAccount.entitlements.view(a.chain(v.b.getBrandingSet)),this._logout);return{instance:{type:gt.SignOut},component:p.UI.mount(e.View,i)}}))}_loadDunning(){return i.e(9234).then(i.bind(i,93710)).then((({DunningPopup:e})=>t=>{const i=new S(this._userAccount,this._config,this._environment,this._telemetry);return{instance:{type:gt.Dunning},component:r.createElement(e,{dunningViewModel:i,modalOperations:t})}}))}_loadPerformance(){return Promise.resolve((e=>{const t=new G(this._reportViewModel,this._documentModel,this._notificationsManager,e),i=p.UI.Knot.make(le.c.ModalView,{downloadButton:p.UI.Node.make((()=>r.createElement(me.n,{reportViewModel:t.reportViewModel,state:t.state})))}),n=p.n.fromSideEffect((t=>{t.action.kind===le.c.ActionsKind.close?e.onClose():(0,l.xb)(t.action.kind)}),t.state.pipe(m.T((e=>({root:e})))));return{instance:{type:d.f_.Performance},component:p.UI.mount(i,n)}}))}_loadChangePlanModal(e){return Promise.resolve((t=>{const i=new b.g(e,t,this._notificationsManager,this._telemetry);return{instance:{type:gt.ChangePlan,model:e},component:r.createElement(he,{changePlanViewModel:i})}}))}_loadAnonymousSignUpGate(){return Promise.resolve((e=>{const t=new re(e,this._config);return{instance:{type:gt.SignUp},component:r.createElement(_,{signupModalViewModel:t})}}))}_downloadLogs(){return Promise.resolve((e=>({instance:{type:gt.Feedback},component:r.createElement(be,{modalOperations:e,telemetry:this._telemetry})})))}constructor(e,t,i,s,r,o,a,l,c,d,h,m,p,u){(0,n._)(this,"_userAccount",void 0),(0,n._)(this,"_textResources",void 0),(0,n._)(this,"_documentContext",void 0),(0,n._)(this,"_upgradeViewModel",void 0),(0,n._)(this,"_config",void 0),(0,n._)(this,"_environment",void 0),(0,n._)(this,"_feedbackViewModel",void 0),(0,n._)(this,"_notificationsManager",void 0),(0,n._)(this,"_documentModel",void 0),(0,n._)(this,"_reportViewModel",void 0),(0,n._)(this,"_telemetry",void 0),(0,n._)(this,"_categoriesModel",void 0),(0,n._)(this,"_logout",void 0),(0,n._)(this,"_setGoalsA11yStatus",void 0),this._userAccount=e,this._textResources=t,this._documentContext=i,this._upgradeViewModel=s,this._config=r,this._environment=o,this._feedbackViewModel=a,this._notificationsManager=l,this._documentModel=c,this._reportViewModel=d,this._telemetry=h,this._categoriesModel=m,this._logout=p,this._setGoalsA11yStatus=u}}},86751:(e,t,i)=>{i.d(t,{H:()=>x,n:()=>w});var n=i(23988),s=i(85886),r=i(65390),o=i(84647),a=i(77205),l=i(70225),c=i(56855),d=i(84712),h=i(86922),m=i(19967),p=i(60280),u=i(7149),g=i(88e3),f=i(63911),y=i(11864);const _={paddingRight:y.Ks.rem(1.6)},v={position:"absolute",top:y.Ks.rem(.25),right:y.Ks.rem(.5)},b={marginRight:y.Ks.rem(1.5)},C={transform:`translateY(${y.Ks.rem(.5)})`,marginRight:y.Ks.rem(.25)},k={wordSpacing:y.Ks.rem(.05),fontSize:y.Ks.rem(.875),lineHeight:y.Ks.rem(1.5)},S=y.Ks.prefixedStylesheet("performance",{preparingForReportLabel:[_],downloadPdfSpinner:[v],loaderContainer:[b],downloadIcon:[C],performanceText:[k]}),w=({reportViewModel:e,state:t})=>s.createElement(c.F.Fragment,null,(0,o.pipe)(e,r.map((e=>t.pipe(u.T((t=>s.createElement(x,{key:"downloadPdfReportButton",statsLoadingState:t.type,reportViewModel:e})))))),r.toNullable));class x extends s.Component{_getButtonState(e,t){const i=this.context.performance;return e?{name:"download-pdf-report-loading",disabled:!0,className:S.preparingForReportLabel,children:s.createElement("span",{key:"stats-load-container",className:S.loaderContainer},i.report.preparingPdfReport,s.createElement(p.y,{size:20,variation:"gray",wrapperClassName:S.downloadPdfSpinner}),s.createElement(f.K,{reportViewModel:this.props.reportViewModel}))}:Object.assign({name:"download-pdf-report",className:"",children:s.createElement("span",{key:"download-button"},s.createElement(a.I,{icon:l._,accessibilityLabel:"",className:S.downloadIcon,variant:"brand"}),i.report.downloadPdfReport)},t===g.K.State.Type.READY?{disabled:!1}:{disabled:!0,title:t===g.K.State.Type.SHORT_CONTENT?i.notEnoughTextToGenerateReport:void 0})}componentWillUnmount(){this.props.reportViewModel.tryToInterrupt()}shouldComponentUpdate(){return!1}UNSAFE_componentWillReceiveProps({statsLoadingState:e}){this._loadingState.set(e)}render(){return s.createElement(m.$n.Caps,{name:this._buttonState.view("name"),title:this._buttonState.view("title"),className:this._buttonState.view("className"),disabled:this._buttonState.view("disabled"),onClick:this.props.reportViewModel.beginDownload},s.createElement(c.F.Fragment,null,this._buttonState.view("children")))}constructor(...e){super(...e),(0,n._)(this,"context",void 0),(0,n._)(this,"_loadingState",d.s.create(this.props.statsLoadingState)),(0,n._)(this,"_buttonState",d.s.combine(this.props.reportViewModel.downloadStarted,this._loadingState,((e,t)=>this._getButtonState(e,t))))}}(0,n._)(x,"contextType",h.S.Context)},11137:(e,t,i)=>{i.d(t,{I:()=>L,N:()=>R});var n=i(23988),s=i(10334),r=i(17171),o=i(85886),a=i(84647),l=i(77205),c=i(74441),d=i(47096),h=i(4473),m=i(17413),p=i(24819),u=i(56855),g=i(80843),f=i(96471),y=i(65390),_=i(65160),v=i(91745),b=i(19436),C=i(68703),k=i(37634),S=i(88480),w=i(13607),x=i(11864);const E={position:"fixed",top:0,right:0,left:0,zIndex:w.ry,pointerEvents:"none"},T=(0,r._)((0,s._)({display:"flex",margin:"0 auto",padding:x.Ks.rem(1),width:x.Ks.rem(24.6525),borderRadius:x.Ks.rem(w.H0),backgroundColor:k.Q.Background.Base.Subdued},S.kT),{pointerEvents:"all",alignItems:"center"}),A={display:"flex",paddingRight:x.Ks.rem(.625),width:x.Ks.rem(14),height:x.Ks.rem(2),backgroundColor:k.Q.Background.Base.Default,alignItems:"center",justifyContent:"space-between"},M={minWidth:0,width:x.Ks.percent(100),height:x.Ks.rem(2),outline:"none",border:"none",backgroundColor:k.Q.Background.Base.Default,color:k.Q.Text.Base.Default,fontSize:x.Ks.rem(1)},K={margin:`0 ${x.Ks.rem(.5)}`},B={color:k.Q.Text.Base.Subdued,fontSize:x.Ks.rem(.8125)},I={marginLeft:x.Ks.rem(1.875),alignSelf:"center"},N={marginLeft:x.Ks.rem(.5),alignSelf:"center"},$=x.Ks.prefixedStylesheet("search-bar",{wrapper:[E],view:[T],searchInputWrapper:[A],searchInput:[M],searchIcon:[K],counter:[B],closeButton:[I],roundButton:[N]});class R extends o.Component{componentDidMount(){this._title&&(this._title.focus(),this._subs.push(this.props.searchViewModel.hotkeysActions.subscribe((e=>{switch(e){case C.xJ.focus:this._title&&(this._title.focus(),this._title.select());break;case C.xJ.next:this._resultFunctionOrSelect((e=>e.next()));break;case C.xJ.previous:this._resultFunctionOrSelect((e=>e.prev()));break;default:(0,p.xb)(e)}})),this.props.searchViewModel.visible.pipe(v.p(Boolean)).subscribe((()=>{requestAnimationFrame((()=>{this._title&&(this._title.focus(),this._title.select())}))}))))}componentWillUnmount(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_resultFunctionOrSelect(e){(0,a.pipe)(this.props.searchViewModel.result.get(),y.fold(this.props.searchViewModel.select,e))}render(){const e=this.props.searchViewModel;return o.createElement("div",{className:$.view},o.createElement(u.F.div,{className:$.searchInputWrapper},o.createElement(l.I,{icon:c.a,accessibilityLabel:"",size:"large",className:$.searchIcon}),o.createElement(u.F.input,(0,r._)((0,s._)({name:C.LT.SEARCH_INPUT_NAME,spellCheck:!1,mount:e=>this._title=e,placeholder:"Find in document",className:$.searchInput,autoFocus:!0},(0,g.oI)({value:e.term})),{onKeyDown:e=>e.keyCode===f.D$.ENTER_CODE&&this._resultFunctionOrSelect((e=>e.next()))})),e.result.view(y.getOrElse((()=>({count:0,current:0})))).view((({count:e,current:t})=>e>0&&o.createElement("span",{className:$.counter,key:"count"},t,"/",e)))),o.createElement(b.ie,{variant:"tertiary",icon:d.n,accessibilityLabel:"Previous",className:$.roundButton,name:"search-prev",disabled:e.result.view(_.Lw((e=>1===e.current))),onClick:()=>this._resultFunctionOrSelect((e=>e.prev()))}),o.createElement(b.ie,{variant:"tertiary",icon:h.e,accessibilityLabel:"Next",className:$.roundButton,name:"search-next",disabled:e.result.view(_.Lw((e=>e.current===e.count))),onClick:()=>this._resultFunctionOrSelect((e=>e.next()))}),o.createElement(b.ie,{variant:"tertiary",icon:m.A,accessibilityLabel:"Close",className:$.closeButton,name:"search-close",onClick:()=>e.visible.set(!1)}))}constructor(...e){super(...e),(0,n._)(this,"_title",void 0),(0,n._)(this,"_subs",[])}}const L=({searchViewModel:e})=>o.createElement(u.F.div,{className:$.wrapper},e.visible.view((t=>t&&o.createElement(R,{searchViewModel:e}))))},57444:(e,t,i)=>{i.d(t,{v:()=>j});var n=i(85886),s=i(56855),r=i(84712),o=i(63967),a=i(55559),l=i(92824),c=i(80843),d=i(86922),h=i(98831),m=i(60280),p=i(81930),u=i(23875),g=i(7149),f=i(98205),y=i(37634),_=i(11864);const v=_.Ks.rem(1.75),b={overflow:"visible",boxSizing:"content-box",width:_.Ks.important(_.Ks.rem(12)),height:_.Ks.important(v),textTransform:"uppercase",letterSpacing:_.Ks.rem(.05),fontWeight:"bold",fontSize:_.Ks.important(_.Ks.rem(.6875)),lineHeight:_.Ks.important(v),borderRadius:_.Ks.important(_.Ks.rem(1))},C={position:"absolute",right:_.Ks.rem(f.sp),width:_.Ks.rem(f.v5),height:_.Ks.rem(f.v5),$nest:{"& circle":{stroke:y.Q.Text.Base.Inverse}}},k=_.Ks.prefixedStylesheet("assistant-button",{full:[b],spinner:[C]}),S=h.rX.size+2,w=(28-S)/2,x=(0,c.yY)(l.$),E=e=>{const t=n.useContext(d.S.Context),i=r.s.combine(e.checking,e.hasErrors,((e,i)=>{const s=e?t.sidebar.checkingLabel:i?t.sidebar.fixErrorsLabel:t.sidebar.openLabel;return n.createElement("div",{key:"label","data-name":s},s)})),o=p.X.fadeOutState(e.checking.pipe(u.j((e=>!1===e)))),a=e.checking.pipe(g.T((e=>e?"inProgress":"end"))).pipe(g.T((e=>"end"!==e?n.createElement(m.y.Svg,{role:"presentation",key:"loading",type:"white",size:S,strokeWidth:5,onTransitionEnd:o.complete,x:164+w,y:w,className:k.spinner}):null)));return n.createElement(x,{variant:"primary","data-name":"assistant",onClick:e.onClick,className:k.full},n.createElement(s.F.Fragment,null,i,a))};var T=i(57014);const A=_.Ks.keyframes({from:{opacity:0},to:{opacity:1}}),M={display:"flex"},K={gap:_.Ks.rem(f.Jj),$nest:{[T.$U.xsLower]:{gap:_.Ks.rem(f.v$)}}},B={flexDirection:"column",alignItems:"flex-start",opacity:0,animation:`${A} .3s forwards .2s`},I={flexDirection:"column",$nest:{[T.$U.xsLower]:{display:"none"}}},N=_.Ks.prefixedStylesheet("oggy-toggler",{wrapper:[M,K,{width:"auto"},B],counters:[M,K,I]});var $=i(24819),R=i(19967),L=i(16117),F=i(82608),D=i(40884),H=i(27199);const P="advancedCounterContent",O="criticalCounterContent",Q={marginRight:_.Ks.rem(.75),fontWeight:"normal",display:"inline-flex",alignItems:"center"},W={fill:H.Q1.CoreNeutral50,$nest:{[`&& .${O}`]:{fill:H.Q1.CoreNeutral0}}},V={fill:H.Q1.CoreYellow20,$nest:{[`&& .${P}`]:{fill:H.Q1.CoreYellow80}}},U=_.Ks.prefixedStylesheet("issue-counters-small",{issuesWrapper:[Q],criticalCounterWrapper:[W],advancedCounterWrapper:[V]}),z=({switchToCritical:e,switchToAdvanced:t,counters:i,features:r})=>{const o=n.useContext(d.S.Context),{pageId:l,gnarSpec:c}=n.useContext(a.Y.Context),h=r.denali.alertGroupNames===D.yK.CRITICAL_ADVANCED?{critical:o.sidebar.critical,advanced:o.sidebar.advanced,criticalLabel:o.sidebar.criticalLabel,advancedLabel:o.sidebar.advancedLabel}:{critical:o.sidebar.free,advanced:o.sidebar.pro,criticalLabel:o.sidebar.freeLabel,advancedLabel:o.sidebar.premiumLabel},m=function(e,t){const i=function(e){switch(e){case D.yK.CRITICAL_ADVANCED:return"critical";case D.yK.FREE_PREMIUM:return"free";default:return(0,$.xb)(e)}}(t.denali.alertGroupNames);return e.view(i)}(i,r),p=function(e,t){const i=function(e){switch(e){case D.yK.CRITICAL_ADVANCED:return"advanced";case D.yK.FREE_PREMIUM:return"paid";default:return(0,$.xb)(e)}}(t.denali.alertGroupNames);return e.view(i)}(i,r);return n.createElement(s.F.div,{className:N.counters},m.view((t=>t>0?n.createElement(R.$n,{key:"critical-issues",name:"critical-issues","aria-label":h.criticalLabel(t),styleType:F.Typography.Type.H3Legacy,className:U.issuesWrapper,onClick:()=>{e(),c.assistantOpenButtonClick(l,"critical")}},n.createElement(L.Q.OutcomeCounter,{theme:{counterWrapper:U.criticalCounterWrapper,counterContent:O},count:t}),n.createElement("span",null,"",h.critical(t))):null)),p.view((e=>e>0?n.createElement(R.$n,{key:"advanced-issues",name:"advanced-issues","aria-label":h.advancedLabel(e),styleType:F.Typography.Type.H3Legacy,className:U.issuesWrapper,onClick:()=>{t(),c.assistantOpenButtonClick(l,"advanced")}},n.createElement(L.Q.OutcomeCounter,{theme:{counterWrapper:U.advancedCounterWrapper,counterContent:P},count:e}),n.createElement("span",null,"",h.advanced(e))):null)))},j=({features:e,documentModel:t,navigationViewModel:i})=>{const{gnarSpec:l,pageId:c}=n.useContext(a.Y.Context);return n.createElement(s.F.section,{className:N.wrapper},n.createElement(E,{checking:t.checkingState.view((e=>"idle"!==e)),hasErrors:r.s.combine(t.counters.view("critical"),t.counters.view("advanced"),((e,t)=>e>0||t>0)),onClick:()=>{i.events.next({type:"toggleSidebar",actionSource:o.Kz.sidebar}),l.assistantOpenButtonClick(c,"default")}}),n.createElement(z,{features:e,switchToCritical:()=>i.events.next({type:"switchToCritical",actionSource:o.Kz.sidebar}),switchToAdvanced:()=>i.events.next({type:"switchToAdvanced",actionSource:o.Kz.sidebar}),counters:t.counters}))}},56548:(e,t,i)=>{i.d(t,{b:()=>_});var n=i(37634),s=i(11864),r=i(13607),o=i(27199);const a=s.Ks.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(359deg)"}}),l={position:"absolute",zIndex:r.k2},c={position:"relative",top:s.Ks.rem(-1.2),left:s.Ks.rem(-1),transition:"transform .3s"},d={animation:`${a} 2s infinite linear`,pointerEvents:"none"},h={position:"absolute",marginLeft:s.Ks.rem(-1),transition:"opacity .1s linear"},m={position:"relative",padding:s.Ks.rem(1),width:s.Ks.rem(25),borderRadius:s.Ks.rem(r.Am),backgroundColor:n.Q.Background.Base.Default,boxShadow:o.eu.Z300},p={padding:`${s.Ks.rem(.875)} ${s.Ks.rem(2.125)} ${s.Ks.rem(.875)} ${s.Ks.rem(1.25)}`,borderRadius:s.Ks.rem(r.Am),backgroundColor:n.Q.Background.Base.Default,boxShadow:o.eu.Z300,whiteSpace:"nowrap",fontSize:s.Ks.rem(.8125)},u={color:n.Q.Text.Base.Subdued},g={margin:`${s.Ks.rem(.5)} 0 0`,padding:0,listStylePosition:"inside"},f={color:n.Q.Text.Base.Subdued,$nest:{"&:not(:first-child)":{marginTop:s.Ks.rem(1.5)}}},y={margin:`${s.Ks.rem(.5)} ${s.Ks.rem(.5)} 0 0`,textTransform:"inherit",letterSpacing:0,fontWeight:"normal",fontSize:s.Ks.rem(1.125),lineHeight:s.Ks.rem(2)},_=s.Ks.prefixedStylesheet("synonyms",{contentWrapper:[l],iconWrapper:[c],synonymsButton:[{position:"relative"}],loader:[d],popupWrapper:[h],wrapper:[m],emptyResultWrapper:[p],activeWord:[{fontWeight:700,fontStyle:"italic"}],title:[u],list:[g],group:[f],groupTitle:[{display:"inline"}],row:[{display:"flex",flexWrap:"wrap"}],item:[y]})},70490:(e,t,i)=>{i.d(t,{F:()=>y,v:()=>f});var n=i(85886),s=i(66202),r=i(84647),o=i(56855),a=i(19967),l=i(65873),c=i(82608),d=i(35426),h=i(58538),m=i(56548),p=i(25299);const u=({word:e,apply:t})=>n.createElement(a.$n.Primary,{name:"accept-synonym",className:m.b.item,onClick:t(e)},e),g=({synonyms:e,apply:t})=>n.createElement("div",{className:m.b.row},e.map(((e,i)=>n.createElement(u,{word:e,key:i,apply:t})))),f=({result:{synonymsOrGroups:e},apply:t})=>{const i=n.useContext(d.k.Context);return n.createElement(o.F.div,{className:m.b.wrapper},n.createElement(l.C6,{className:m.b.title},i.synonyms.title),(0,r.pipe)(e,s.fold((e=>n.createElement(g,{key:"single",synonyms:e,apply:t})),(e=>n.createElement("ol",{className:m.b.list},e.map((({meaning:e,words:i},s)=>n.createElement(c.Typography,{key:s,styleType:c.Typography.Type.Base,nodeType:"li",className:m.b.group},n.createElement(l.C6,{className:m.b.groupTitle},e),n.createElement(g,{key:"single",synonyms:i,apply:t})))))))))},y=({synonymsInfo:e,apply:t})=>h._g.isEmpty(e.synonymsState)?n.createElement(p.c,{activeWord:e.activeWord.meta.value}):n.createElement(f,{key:"synonymsCard",apply:t,result:e.synonymsState.synonyms})},25299:(e,t,i)=>{i.d(t,{c:()=>o});var n=i(85886),s=i(35426),r=i(56548);const o=({activeWord:e})=>{const t=n.useContext(s.k.Context);return n.createElement("div",{className:r.b.emptyResultWrapper},t.synonyms.empty(n.createElement("span",{className:r.b.activeWord},e)))}},78246:(e,t,i)=>{i.d(t,{V4:()=>O});var n=i(85886),s=i(66202),r=i(92802),o=i(84647),a=i(53764),l=i(56062),c=i(92824),d=i(83407),h=i(95779),m=i(24819),p=i(56855),u=i(1224),g=i(51770),f=i(86922),y=i(35098),_=i(35300),v=i(98530),b=i(7149),C=i(84872),k=i(30343),S=i(19436),w=i(1404),x=i(10334),E=i(17171),T=i(37634),A=i(88480),M=i(98205),K=i(12175),B=i(13607),I=i(11864),N=i(57014);const $={position:"absolute",zIndex:B.do},R=(0,E._)((0,x._)({display:"flex",alignItems:"center",marginTop:5,padding:I.Ks.rem(.5),borderRadius:I.Ks.rem(B.Am),backgroundColor:T.Q.Background.Base.Default},A.kT),{pointerEvents:"all",gap:I.Ks.rem(M.v$),$nest:{[N.$U.tiny]:{padding:I.Ks.rem(.4)}}}),L={width:I.Ks.important(I.Ks.rem(16)),$nest:{[N.$U.tiny]:{width:I.Ks.important(I.Ks.rem(14))}}},F={maxWidth:I.Ks.rem(16),marginInlineStart:I.Ks.rem(.5),color:I.Ks.important(K.Blue60),textDecorationColor:I.Ks.important(K.Blue60),$nest:{[N.$U.tiny]:{maxWidth:I.Ks.rem(10)}}},D={display:"inline-block",width:1,height:I.Ks.rem(2),backgroundColor:T.Q.Background.Base.Subdued,verticalAlign:"middle"},H=I.Ks.prefixedStylesheet("formatting-link",{positionedWrapper:[$],wrapper:[R],editorToViewportContainer:[{position:"absolute",pointerEvents:"none"}],urlInput:[L],urlText:[(0,N.sg)(),F],delimiter:[D]});class P extends m.eo{}const O=({vm:e})=>{const t=n.useContext(y.L.Context).pipe(b.T((0,g.Up)("rect")));return n.createElement(p.F.div,{className:H.positionedWrapper},C.z(t,e.visualState).pipe(b.T((([e,t])=>(0,o.pipe)(t,s.fromOption((()=>new P("Viewport state is O.none"))),s.chain((t=>(0,o.pipe)(t.rect.getRect(),s.map((({clientRects:[t,...i],rootClientRect:n})=>({viewportLikeRect:(0,d._5)(e,n),rect:(0,o.pipe)(d.rw.join(t,...i),s.getOrElse((()=>d.rw.empty)))}))),s.map((({viewportLikeRect:e,rect:i})=>n.createElement(p.F.div,{className:H.editorToViewportContainer,style:{top:e.top,left:e.left}},n.createElement(v.P.ByAbsoluteRect,{rect:i,align:d.rw.Axis.vertical,selector:V},n.createElement(_.Q,{hide:t.close},n.createElement("div",{className:H.wrapper},t.visualState===w.W.VisualState.EditingMode?n.createElement(Q,{inputContent:t.inputContent,apply:t.apply,isValid:t.isValid}):n.createElement(W,{url:t.url,change:t.change,remove:t.remove})))))))))),s.fold((e=>(e instanceof P||u.Bx.Logging.getLogger("FormattingLink").error("Cannot render links popup",e),null)),o.identity)))),k.Z(null)))},Q=({apply:e,inputContent:t,isValid:i})=>{const s=n.useContext(f.S.Context),a=n.useRef(null);return(({inputRef:e,delay:t=0})=>{(0,n.useEffect)((()=>{const i=setTimeout((()=>{var t;null===(t=e.current)||void 0===t||t.focus()}),t);return()=>clearTimeout(i)}),[e,t])})({inputRef:a,delay:50}),n.createElement(n.Fragment,null,n.createElement(S.ce,{mount:a,label:"Edit link URL",placeholder:s.toolbar.formatting.links.placeholder,className:H.urlInput,value:t,onChange:e=>t.set(e),labelDisplay:"hidden","data-name":"rtfLinks-urlInput"}),n.createElement(S.RQ,{variant:"ghost",text:s.toolbar.formatting.links.apply,"data-name":"rtfLinks-apply",onClick:()=>{e()},disabled:i.view((0,r.AU)(o.identity))}))},W=({url:e,change:t,remove:i})=>{const s=n.useContext(f.S.Context);return n.createElement(n.Fragment,null,n.createElement(a.N,{href:e,target:"_blank",rel:"noopener noreferrer",className:H.urlText},n.createElement(l.E,{as:"span",variant:"text-small"},e)),n.createElement(c.$,{variant:"ghost","data-name":"rtfLinks-change",onClick:t},s.toolbar.formatting.links.change),n.createElement("span",{className:H.delimiter}),n.createElement(c.$,{variant:"ghost","data-name":"rtfLinks-remove",onClick:i},s.toolbar.formatting.links.remove))},V=e=>{const t="bottom",i=h.w.Selector.Placement.left,n=h.w.Selector.takeBy(t,i)(e);return(({point:e})=>-1===Math.sign(e.x)||-1===Math.sign(e.y))(n.point)?h.w.Selector.preferBy(t,i)(e):n}},54610:(e,t,i)=>{i.d(t,{v:()=>n});var n,s=i(85886),r=i(31206),o=i(7149),a=i(35098);!function(e){var t=e.navigationHideWidthThreshold=850;e.useCollapsibleNavbarThreshold=(e=t)=>s.useContext(a.L.Context).pipe(r.E("rect","width"),o.T((t=>t<=e)))}(n||(n={}))},41933:(e,t,i)=>{i.d(t,{M:()=>L});var n=i(10334),s=i(17171),r=i(85886),o=i(36458),a=i(26692),l=i(22928),c=i(66202),d=i(84647),h=i(56855),m=i(80843),p=i(7149),u=i(65160),g=i(65390),f=i(35300),y=i(92141),_=i(12175),v=i(37634),b=i(11864);const C={width:b.Ks.rem(1.5),position:"absolute",alignItems:"end",overflow:"visible"},k={background:"white",zIndex:99999,display:"flex",flexDirection:"column",width:b.Ks.rem(40),borderRadius:b.Ks.rem(.5),border:"0.5px solid #CDD1DC",position:"absolute",padding:`0 ${b.Ks.rem(.875)} ${b.Ks.rem(.875)} ${b.Ks.rem(.875)}`,boxShadow:`0px 1px ${b.Ks.rem(.5)} 0.5px rgba(135, 141, 162, 0.5);`},S=(0,s._)((0,n._)({},k),{padding:"0"}),w={display:"flex",minHeight:b.Ks.rem(2.5),alignItems:"center"},x={marginRight:b.Ks.rem(.5)},E={fontSize:b.Ks.rem(.875),lineHeight:b.Ks.rem(1),padding:b.Ks.rem(.25),color:"#646B81",flex:6},T={flex:1,minWidth:b.Ks.rem(4)},A={position:"absolute",right:b.Ks.rem(1.125),top:b.Ks.rem(.875),cursor:"pointer",background:"white"},M={fontSize:b.Ks.rem(.875),lineHeight:b.Ks.rem(1.3125)},K=(0,s._)((0,n._)({},M),{paddingBottom:b.Ks.rem(.625)}),B=(0,s._)((0,n._)({},M),{background:"white",color:"#027E6F",border:"#027E6F solid 1px",marginRight:b.Ks.rem(.5),padding:`${b.Ks.rem(.25)} ${b.Ks.rem(.5)}`}),I=(0,s._)((0,n._)({},M),{background:"white",color:"#646B81",padding:`${b.Ks.rem(.25)} ${b.Ks.rem(.5)}`}),N={marginLeft:b.Ks.rem(.25),marginRight:b.Ks.rem(.25),$nest:{svg:{verticalAlign:"middle"}}},$={backgroundColor:_.Green60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:_.Green80},path:{stroke:v.Q.Icon.Base.Inverse}}},R=b.Ks.stylesheet({vbarWrapper:[C],vbarInlineCard:[k],vbarInlineCardSDUI:[S],vbarInlineCardTitle:[w],vbarInlineCardTitleIcon:[x],vbarInlineCardTitleText:[E],vbarInlineCardTitleClose:[A],vbarInlineCardAlert:[K],vbarInlineCardToolbar:[{display:"flex",justifyContent:"space-between"}],vbarInlineCardReplaceBtn:[B],vbarInlineCardDismissBtn:[I],feedbackIcon:[N],feedbackButton:[$],insertedTextBold:[{fontWeight:"bold"}],retainedText:[{textDecoration:"none"}],vbarBetaLabel:[T]}),L=(e,t,i)=>n=>{const s=t.getInlineItemForAlert(n.alert.id),a=e=>{t.handleSDUIAction(e),e.actions.forEach((e=>{switch(e.type){case"applyAlerts":case"removeAlerts":case"removeRoot":case"closeCard":return void n.close();case"nativeOpenUserSatisfactionFeedback":return void n.giveFeedback();case"copyToClipboard":return void i(e.text);default:return}}))};return r.createElement(f.Q,{hide:()=>n.close()},r.createElement(h.F.Fragment,null,(0,d.pipe)(s,p.T(c.fold((()=>null),(t=>r.createElement(F,{item:t,maxWidth:e,position:n.position,designSystem:o.J,onSDUIAction:a})))))))},F=({item:e,position:t,maxWidth:i,onSDUIAction:o,designSystem:c})=>(r.useEffect((()=>{(0,d.pipe)(a.cK.findFirst(e.content,"inlineCard"),u.Mi((t=>{o({type:y.X9.Type.sduiCardAction,sourceId:t.id,cardId:e.id,actions:t.onFocus,scope:{alertRefs:[]}})})))})),r.createElement(h.F.div,(0,s._)((0,n._)({},(0,m.Ly)(R.vbarInlineCardSDUI)),{style:(0,s._)((0,n._)({},t),{maxWidth:i})}),r.createElement(l.R,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:c,notify:(t,i,n)=>{o({type:y.X9.Type.sduiCardAction,sourceId:t,cardId:e.id,actions:i,scope:n})},transitions:[],prevContent:g.none,onAnimationEnd:d.constVoid,onMount:d.constVoid})))},82874:(e,t,i)=>{i.d(t,{g:()=>I});var n,s,r,o=i(23988),a=i(84647),l=i(66202),c=i(65390),d=i(65716),h=i.n(d),m=i(77752),p=i(80614),u=i(44757),g=i(32112),f=i(83407),y=i(90829),_=i(30595),v=i(1224),b=i(51770),C=i(76005),k=i(34553),S=i(78590),w=i(10334),x=i(17171),E=i(4102),T=i(63082),A=i(24819),M=i(72297);!function(e){let t;!function(e){e.startsWithWhiteSpace=/^\s/,e.containsWhiteSpace=/\s/g,e.endsWithWhiteSpace=/\s$/g,e.startsWithMultipleWhiteSpaces=/^\s+/,e.endsWithMultipleWhiteSpaces=/\s+$/,e.notASpaceOrNbsp=/[^\u00a0 ]/g,e.notNbsp=/[^\u00a0]/g,e.containsLineBreakFollowedByReturn=/\r\n/g,e.startsWithLineBreak=/^\n/,e.endsWithLineBreak=/\n$/,e.isLineBreaks=/^\n+$/,e.containsLineBreakFollowedByOptionalWhiteSpaces=/\n\s*/g,e.containsOptionalWhiteSpacesFollowedByLineBreak=/\s+\n/g,e.containsRepeatedWhiteSpaces=/\s\s+/g,e.containsOnlySpaces=/^\s+$/}(t||(t={}));var i=e.normalizeSpacesInDelta=e=>e.reduce(((e,i)=>e.push(g.E.isInsert(i)&&"string"==typeof i.insert?(0,x._)((0,w._)({},i),{insert:i.insert.replace(t.containsWhiteSpace,(e=>"\n"===e||"\r"===e||"\t"===e?e:" "))}):i)),new M.R);function s(e,t){let i="";for(let n=e.ops.length-1;n>=0&&i.length<t.length;--n){const t=e.ops[n];if("string"!=typeof t.insert)break;i=t.insert+i}return i.slice(-1*t.length)===t}let o,d;e.sanitizeContent=e=>(0,a.pipe)((0,_.aj)(e,{addTags:["o:p","del"],allowedAttrs:["href","style","class",r.TrailingSpaces.dataPreserveSpaces],forbidTags:["script","style","meta","img","video","embed","frame","iframe","area","source","track","template","canvas","audio"],allowDataAttrs:!1,returnHTML:!0}),(e=>(0,a.pipe)((0,f.B4)(e,(e=>f.h5.isHTMLElement(e)||f.h5.isDocumentFragment(e)),(0,a.flow)(r.normalizeBold,r.TrailingSpaces.decodeTrailingSpaces,r.cleanupStyles(["whiteSpace","fontWeight","fontStyle","white-space","font-weight","font-style","mso-list"]))),l.fold((e=>(v.Bx.Logging.getLogger("HTML2Delta").warn("Cannot normalize html on paste",e),c.none)),(e=>c.some(e)))))),e.normalizeDelta=e=>(0,a.flow)(c.map(e),c.map(i)),e.trimTrailingNewLine=function(e,t={}){return n.deltaEndsWith(e,"\n")&&(null==e.ops[e.ops.length-1].attributes||t.table)?e.compose((new(h())).retain(e.length()-1).delete(1)):e},e.deltaEndsWith=s,function(e){let t;!function(e){e.and=(...e)=>t=>e.every((e=>e(t))),e.or=(...e)=>t=>e.some((e=>e(t))),e.includes=e=>t=>t.includes(e)}(t=e.Test||(e.Test={})),e.checks=[{name:C.j1.MSOutlook,test:t.and(t.includes('xmlns:w="urn:schemas-microsoft-com:office:word'),t.includes("span.EmailStyle15"))},{name:C.j1.MSWord,test:t.includes('xmlns:w="urn:schemas-microsoft-com:office:word')},{name:C.j1.MSExcel,test:t.includes('xmlns:x="urn:schemas-microsoft-com:office:excel')},{name:C.j1.MSOffice,test:t.includes('xmlns:o="urn:schemas-microsoft-com:office:office')},{name:C.j1.MSWordOnline,test:t.and(t.includes('xml:lang="EN-US"'),t.includes("TextRun"),t.includes("SCX"))},{name:C.j1.GDocs,test:t.includes('id="docs-internal-guid-')},{name:C.j1.GSheets,test:t.includes('<meta name="generator" content="Sheets"/>')},{name:C.j1.DropboxPaper,test:t.includes('class=" author-d-')},{name:C.j1.CocoaHTMLWriter,test:t.includes('<meta name="Generator" content="Cocoa HTML Writer">')},{name:C.j1.ProbablyMSOutlookOnline,test:t.or(t.includes("color: rgb(0, 0, 0); font-family: Calibri, Helvetica, sans-serif;"),t.includes("color: rgb(0, 0, 0); font-family: Calibri,Helvetica,sans-serif;"))},{name:C.j1.ProbablyGMail,test:t.or(t.includes("color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif;"),t.includes("color: rgb(34, 34, 34); direction: ltr; font-family: Arial,Helvetica,sans-serif;"))}],e.detectSource=(e,t)=>{const i=t.find((t=>t.test(e)));return i?i.name:C.j1.Unknown}}(o=e.SourceDetector||(e.SourceDetector={})),function(e){let i;function o(e,t){return f.h5.isP(e)&&"MsoNormal"===e.className&&1===e.childNodes.length&&e.firstChild&&e.firstChild.textContent===r.nbsp?(new M.R).insert("\n"):t}function c(e,t){let i=(new M.R).compose(t);if(0===t.ops.length)return l.right(i);const n=i.ops[0];if(!f.h5.isHTMLElement(e))return l.left(new Error("Cannot parse non-html element"));if(!g.E.isInsertString(n))return l.left(new Error("The first operation is not a string insert"));const s=n.insert.match(/^\s*?(\.||o|||)\s+/),r=n.insert.match(/^\s*?(\d+|[a-zA-Z]+)?[\.\)][\ \t\u202F\u00A0]+/);if(null===s&&null===r||r&&n.insert.length-1===r[0].length&&1===i.ops.length)return l.right(i);const o=null!==s?"bullet":"ordered",a=null!==s?s:r;i=(new M.R).insert(n.insert.substring(a[0].length,n.insert.length),n.attributes).concat(new M.R(i.ops.slice(1)));const c=i.ops[i.ops.length-1];var d;null!=c&&g.E.isInsertString(c)&&(i=new M.R(i.ops.slice(0,-1)).push({insert:c.insert.substring(0,c.insert.length-1),attributes:c.attributes}));const h=(null!==(d=e.getAttribute("style"))&&void 0!==d?d:"").replace(/\n+/g,"").match(/level(\d+)/),m=h?Number(h[1])-1:0;return i.push({insert:"\n",attributes:{list:o,indent:m}}),l.right(i)}!function(e){function i(e,t){return e.nodeType===Node.TEXT_NODE?null!=e.parentElement&&!l(e.parentElement,t)&&i(e.parentElement,t):null!=e.previousElementSibling&&null!=e.nextElementSibling&&!l(e.previousElementSibling,t)&&!l(e.nextElementSibling,t)}function n(e,t){return e.nodeType===Node.TEXT_NODE&&null!=e.parentElement&&!l(e.parentElement,t)}e.matchNewline=[Node.TEXT_NODE,(e,t,i)=>{var n;if(!s(t,"\n")&&Boolean(null===(n=e.nodeValue)||void 0===n?void 0:n.trim())){if(l(e,i)&&"TD"!==e.tagName&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert("\n");if(t.length()>0&&e.nextSibling){let n=e.nextSibling;for(;null!=n;){if(l(n,i)&&"TD"!==e.tagName)return t.insert("\n");const s=i.query(n);if(s&&s.prototype instanceof T.zo)return t.insert("\n");n=n.firstChild}}}return t}],e.matchText=[Node.TEXT_NODE,(e,s,r)=>{var c,d;let h=e.data;if("O:P"===(null===(c=e.parentElement)||void 0===c?void 0:c.tagName))return s.insert(h.trim());if("DEL"===(null===(d=e.parentElement)||void 0===d?void 0:d.tagName))return s;if(!o(e)){if(t.isLineBreaks.test(h)&&!function(e,t){var i;return n(e,t)&&(null===(i=e.parentElement)||void 0===i?void 0:i.innerHTML)===e.textContent}(e,r)&&!i(e,r))return s;const o=(e,i)=>{const n=e?t.notASpaceOrNbsp:t.notNbsp,s=i.replace(n,"");return s.length<1&&e?" ":s};h=h.replace(t.containsLineBreakFollowedByReturn," "),h.trim().length>0&&(function(e,i){var s,r;const o=null!==(r=e.previousSibling)&&void 0!==r?r:null===(s=e.parentElement)||void 0===s?void 0:s.previousSibling;var c;return n(e,i)&&null!=o&&(a(o)||!l(o,i)&&t.endsWithWhiteSpace.test(null!==(c=o.textContent)&&void 0!==c?c:""))}(e,r)&&(h=h.replace(t.startsWithLineBreak,"")),h=h.replace(t.startsWithMultipleWhiteSpaces," "),function(e,i){var s,r;const o=null!==(r=e.nextSibling)&&void 0!==r?r:null===(s=e.parentElement)||void 0===s?void 0:s.nextSibling;var c;return n(e,i)&&null!=o&&(a(o)||!l(o,i)&&t.startsWithWhiteSpace.test(null!==(c=o.textContent)&&void 0!==c?c:""))}(e,r)&&(h=h.replace(t.endsWithLineBreak,""))),t.containsOnlySpaces.test(h)||(h=h.replace(t.containsOptionalWhiteSpacesFollowedByLineBreak," ")),h=h.replace(t.containsLineBreakFollowedByOptionalWhiteSpaces," "),h=h.replace(t.containsRepeatedWhiteSpaces,o.bind(o,!0)),(null==e.previousSibling&&null!=e.parentElement&&l(e.parentElement,r)||e.previousSibling instanceof Element&&l(e.previousSibling,r))&&(h=h.replace(t.startsWithMultipleWhiteSpaces,o.bind(o,!1))),(null==e.nextSibling&&null!=e.parentElement&&l(e.parentElement,r)||e.nextSibling instanceof Element&&l(e.nextSibling,r))&&(h=h.replace(t.endsWithMultipleWhiteSpaces,o.bind(o,!1)))}return s.insert(h)}];const r=new WeakMap;function o(e){return null!=e&&(r.has(e)||("PRE"===e.tagName?r.set(e,!0):r.set(e,o(e.parentNode))),r.get(e))}function a(e){return e.nodeType===Node.ELEMENT_NODE&&"br"===e.tagName.toLowerCase()}function l(e,t){if(!(e instanceof Element))return!1;const i=t.query(e);return!(i&&i.prototype instanceof E.EmbedBlot)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}}(i=e.Text||(e.Text={})),e.fancyTable=[["td",(e,t)=>{const i=Number(e.getAttribute("colspan"))||1;return e.nextSibling?n.trimTrailingNewLine(t).insert("\t".repeat(i)):t}]],e.matchOutlookEmptyLine=o,e.outlookEmptyLine=["p.MsoNormal",o],e.matchMsWordList=c;const d=e=>(t,i)=>(0,a.pipe)(c(t,i),l.fold((t=>(e.info("Cannot parse MS Word List",t),i)),a.identity));e.getMSWordList=e=>{const t=d(e.getLogger("MSWordListMatcher"));return[["p.MsoListParagraph",t],["p.MsoListParagraphCxSpFirst",t],["p.MsoListParagraphCxSpMiddle",t],["p.MsoListParagraphCxSpLast",t],['h1[style*="mso-list"]',t],['h2[style*="mso-list"]',t],['h3[style*="mso-list"]',t],['h4[style*="mso-list"]',t],['h5[style*="mso-list"]',t],['h6[style*="mso-list"]',t],['p[style*="mso-list"]',t]]}}(d=e.Matchers||(e.Matchers={}))}(n||(n={})),function(e){const t="color: #4a6ee0;",i=(e,t)=>{e.setAttribute("style",t.join("; "))};e.prepareHTML=(e,n)=>{const s=[`color: ${window.getComputedStyle(e).color};`,"background: transparent;","margin-top:0pt;","margin-bottom:0pt;"].join(" ");return(0,a.flow)(r.TrailingSpaces.normalizeTrailingSpaces,l.chain((e=>(0,f.B4)(e,f.h5.isHTMLElement,(e=>(f.h5.isSPAN(e)?i(e,[s,e.parentNode&&f.h5.isLink(e.parentNode)?t:""]):f.h5.isBR(e)||(f.h5.isLink(e)?i(e,[s,t]):f.h5.isH1(e)||f.h5.isH2(e)?i(e,[s,"font-weight: normal;"]):f.h5.isLI(e)&&e.parentNode?f.h5.isOL(e.parentNode)?i(e,[s,`list-style-type:${n(e)[1]};`]):f.h5.isUL(e.parentNode)&&i(e,[s,"list-style-type:disc"]):f.h5.isHTMLElement(e)&&i(e,[s])),e))))))}}(s||(s={})),function(e){e.removeAllSpans=e=>(0,a.pipe)((0,f.B4)(e,f.h5.isHTMLElement,(e=>{if(f.h5.isSPAN(e)){const t=(0,f.qx)(document.createDocumentFragment(),e);return t.normalize(),t}return e})),l.map((e=>(e.normalize(),e))));var t=e.space=" ",i=e.nbsp="";const n=e=>{if(0===e.length)return"";if(1===e.length)return e;const n=e.length-1,s=(n-n%2)/2;return`${i}${`${t}${i}`.repeat(s)}${2*s===n?"":i}`};let s;!function(e){var t=e.dataPreserveSpaces="data-preserver-spaces";const i=/mso-spacerun:\s*yes/;e.decodeTrailingSpaces=e=>{var n;return f.h5.isSPAN(e)&&(e.hasAttribute(t)||i.test(null!==(n=e.getAttribute("style"))&&void 0!==n?n:""))&&e.setAttribute("style","white-space: pre-wrap"),e},e.normalizeTrailingSpaces=e=>(0,f.B4)(e,(e=>f.h5.isHTMLElement(e)),(e=>{if(e.nodeType!==Node.TEXT_NODE||null==e.textContent||e.parentNode&&f.h5.isSPAN(e.parentNode)&&e.parentNode.hasAttribute(t))return e;{const i=e.textContent.match(/^( *)(.*?)( *)$/);if(i){const e=document.createElement("span");return e.appendChild(document.createTextNode(`${n(i[1])}${i[2]}${n(i[3])}`)),e.setAttribute(t,"true"),e}throw new A.zU("Cannot parse textContent")}}))}(s=e.TrailingSpaces||(e.TrailingSpaces={})),e.normalizeBold=e=>!f.h5.isHTMLElement(e)||"B"!==e.nodeName&&"STRONG"!==e.nodeName||"normal"!==e.style.fontWeight?e:(0,f.qx)(document.createElement("span"),e),e.cleanupStyles=e=>t=>{if(!f.h5.isHTMLElement(t))return t;var i;const n=(null!==(i=t.getAttribute("style"))&&void 0!==i?i:"").split(";").map((e=>e.split(":"))).filter((([t])=>e.includes(t.trim()))).map((([e,t])=>`${e}:${t}`)).join(";");return t.setAttribute("style",n),t}}(r||(r={}));const K=(0,y.Bj)((()=>v.Bx.Logging.getLogger("DEd.Clipboard")));class B extends u.Ay{get rtfSupport(){return!1}get plainTextSources(){return[]}onCapturePaste(e){try{var t,i;if(this.clipboardShortcutUsed.next(),e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(null==n)return void K().warn("Paste event handler aborted because selection is empty");const s=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/html"),r=null===(i=e.clipboardData)||void 0===i?void 0:i.getData("text/plain");this.onPaste(n,{html:s,text:r})}catch(e){K().error("Paste event handler failed",e)}}onPaste(e,{text:t,html:i,source:s}){this.rtfSupport?i&&i.length>0?(s=n.SourceDetector.detectSource(i,[...this._sourceChecks,...n.SourceDetector.checks]),this.plainTextSources.some((e=>e===s))&&(i=void 0)):s=C.j1.PlainText:(s=null!=s?s:C.j1.Unknown,i=void 0);const r=this.quill.getFormat(e.index),o=this.convert({text:t,html:i},r),a=g.E.calcAmountLength((0,S.y1)(o)),l=this.quill.getLength()-e.length+a,c=(new(h())).retain(e.index).delete(e.length).concat(o),d=this.quill.getText(),p=d.length-1,u=d.trim().length;if(l>this._maxAllowedTextLength)this._lengthExceededCallback();else{this._flushHistory((()=>{this._options.flush(),this.quill.updateContents(c,m.Ay.sources.USER),this._options.flush()})),this.quill.setSelection(c.length()-e.length,m.Ay.sources.SILENT),this.quill.scrollSelectionIntoView();const t=this._fetchTagsAmount((0,S.y1)(c)),i=0===u?"initial":e.length===p?"reset":"partial";this.textChangedAfterPaste.next({type:i,source:s,len:a,tags:t}),0===a&&K().warn("onPaste: pasted length is 0",{source:s,rtfSupport:this.rtfSupport,formats:r,pastedDeltaLength:a,lenAfterPaste:l,textLength:p,trimmedTextLength:u,type:i})}}onCaptureCopy(e,t=!1){var i;this.clipboardShortcutUsed.next(),super.onCaptureCopy(e,t),""===(null===(i=e.clipboardData)||void 0===i?void 0:i.getData("text/html"))&&e.clipboardData.clearData("text/html")}onCopy(e,t){const{html:i,text:n}=super.onCopy(e,t);if(!this.rtfSupport||!this._rangeHasFormatting(e))return{html:"",text:this.quill.getText(e.index,e.length)};let r;if(this.rtfSupport){const e=(0,_.aj)(i,{forbidTags:["span"],allowedAttrs:["class","href","style","target"],allowDataAttrs:!1,returnHTML:!0});r=(0,a.pipe)(e,s.prepareHTML(this.quill.root,B.getOrderedListLevel),l.getOrElse((()=>e)),(e=>{const t=document.createElement("div");return t.appendChild(e),t.innerHTML}))}else r=i;return{html:`<meta name='uuid' content='uuid${this._uuid}'>${r}`,text:n}}_rangeHasFormatting(e){return(e=>(0,S.y1)(this.quill.getContents(e.index,e.length)).ops.some((e=>c.isSome(g.E.getAttr(e,S.pR.QuillFormatNames.is)))))(e)||(e=>this.quill.scroll.path(e.index+e.length).some((([e])=>f.h5.isLI(e.domNode)||f.h5.isH1(e.domNode)||f.h5.isH2(e.domNode))))(e)}_flushHistory(e){this.quill.history.cutoff(),e(),this.quill.history.cutoff()}convert({html:e,text:t},i={}){if(!e)return(new(h())).insert(t||"",i);const s=(0,a.pipe)(n.sanitizeContent(e),c.chain((0,a.flow)((0,b.Up)("childNodes"),c.fromPredicate((e=>e.length>0)))),c.map((e=>{const t=document.createElement("body");for(let i=0;i<e.length;i++)t.appendChild(e[i].cloneNode(!0));return t})),c.map((e=>{const t=new WeakMap,[i,n]=this.prepareMatching(e,t);return(0,u.hV)(this.quill.scroll,e,i,n,t)})),c.getOrElse((()=>(new(h())).insert(t||"",i))));return n.trimTrailingNewLine(s,i)}dangerouslyPasteHTML(){throw new Error("dangerouslyPasteHTML is not implemented")}constructor(e,t){var i,s;super(e,{matchers:[...n.Matchers.fancyTable,...n.Matchers.getMSWordList(K()),n.Matchers.outlookEmptyLine]}),(0,o._)(this,"quill",void 0),(0,o._)(this,"_options",void 0),(0,o._)(this,"_uuid",void 0),(0,o._)(this,"_sourceChecks",void 0),(0,o._)(this,"textChangedAfterPaste",void 0),(0,o._)(this,"clipboardShortcutUsed",void 0),(0,o._)(this,"_maxAllowedTextLength",void 0),(0,o._)(this,"_lengthExceededCallback",void 0),(0,o._)(this,"syntheticPaste",void 0),(0,o._)(this,"_fetchTagsAmount",void 0),this.quill=e,this._options=t,this._uuid=(0,_.G7)(12),this._sourceChecks=[{name:C.j1.DenaliSameDocSession,test:n.SourceDetector.Test.includes(this._uuid)},{name:C.j1.DenaliOtherDocSession,test:n.SourceDetector.Test.includes("<meta name='uuid' content='uuid")}],this.textChangedAfterPaste=new k.B,this.clipboardShortcutUsed=new k.B,this.syntheticPaste=e=>{try{this.onPaste(new p.Q(0),{text:e,source:C.j1.Synthetic})}catch(e){K().error("Synthetic paste event handler failed",e)}},this._fetchTagsAmount=e=>Array.from(e.reduce(((e,t)=>(g.E.match((t=>Object.keys(t.attributes||{}).forEach((t=>e.add(t)))),a.constVoid,(t=>Object.keys(t.attributes||{}).forEach((t=>e.add(t)))))(t),e)),new Set)),this.matchers=[n.Matchers.Text.matchText,n.Matchers.Text.matchNewline].concat(this.matchers.filter((e=>e[0]!==Node.TEXT_NODE))),this._maxAllowedTextLength=null!==(i=t.maxAllowedTextLength)&&void 0!==i?i:1e5,this._lengthExceededCallback=null!==(s=t.lengthExceededCallback)&&void 0!==s?s:a.constVoid}}(0,o._)(B,"getOrderedListLevel",(e=>{let t=0,i=e.parentElement;for(;i&&!0!==i.isContentEditable;)"OL"===i.tagName&&t++,i=i.parentElement;return[t,t%3==0?"lower-roman":t%2==0?"lower-alpha":"decimal"]}));const I=(e,t)=>class extends B{get rtfSupport(){return e}get plainTextSources(){return t}}},40857:(e,t,i)=>{i.d(t,{U:()=>y});var n=i(23988),s=i(10334),r=i(17171),o=i(65390),a=i(84647),l=i(77752),c=i(45968),d=i(32112),h=i(90829),m=i(1224),p=i(72297),u=i(3016),g=i(21644),f=i(78590);class y extends c.A{commit(e){this.cutoff(),e(),this.cutoff()}redo(){try{this._log.info("History action: redo"),this.change("redo","undo")}catch(e){this._log.error("History action: redo error",e)}}canRedo(){return this.stack.redo.length>0}canUndo(){return this.stack.undo.length>0}undo(){try{this._log.info("History action: undo"),this.change("undo","redo")}catch(e){this._log.error("History action: undo error",e)}}getAnonymizedOperationsHistory(){return this._anonymizedOperationsCache.toArray()}dispose(){this._subs.dispose()}record(e,t){super.record(_(e),_(t))}transform(e){super.transform(_(e))}constructor(e,t){super(e,t),(0,n._)(this,"quill",void 0),(0,n._)(this,"_options",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_anonymizedOperationsCache",void 0),this.quill=e,this._options=t,this._subs=new u.y.Keeper,this._log=m.Bx.Logging.getLogger("DEd.History"),this._anonymizedOperationsCache=new m.N6(20,!0);const i=(0,f.U3)(this.quill).pipe(g.u());this._subs.push(i.subscribe((e=>{e.name===l.Ay.events.TEXT_CHANGE&&this._anonymizedOperationsCache.push({ops:d.E.anonymizeTextAndStringAttrs(e.delta).ops,source:e.source})}))),(0,h.hJ)("dedOpsHistory",(()=>this._anonymizedOperationsCache.toArray())),delete e.keyboard.bindings.Z,delete e.keyboard.bindings.z,delete e.keyboard.bindings.y}}function _(e){return(0,a.pipe)(d.E.getOps(e),o.fold((()=>new p.R(e.ops)),(t=>{const i=e.reduce(((e,t)=>d.E.match((t=>e.insert(t.insert,t.attributes&&b(t.attributes))),(t=>e.delete(t.delete)),(t=>e.retain(t.retain,t.attributes&&b(t.attributes))))(t)),new p.R),n=i.ops[0];return Boolean(i.ops)&&1===i.ops.length&&d.E.isRetain(n)&&!n.attributes?new p.R:new p.R(i.ops)})))}const v=new RegExp(`^${f.rd}_`);function b(e){return Object.keys(e).reduce(((t,i)=>v.test(i)?t:(0,r._)((0,s._)({},t),{[i]:e[i]})),{})}},3656:(e,t,i)=>{i.d(t,{TV:()=>f});var n=i(23988),s=i(10334),r=i(17171),o=i(84647),a=i(77752),l=i(51823),c=i(83407),d=i(72297),h=i(78590);const m=l.Ay.DEFAULTS.bindings;class p extends l.Ay{}function u(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:o.constVoid}}const g={key:" ",collapsed:!0,shiftKey:!1,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*)$/,handler(e,t){const i=t.prefix.length,[n,s]=this.quill.getLine(e.index);if(s>i)return!0;const[r,o]=(e=>{switch(e){case"-":return["dashed",/^\s*?-/];case"*":return["bullet",/^\s*?\*/];default:return["ordered",/^\s*?\d+\./]}})(t.prefix.trim());if(n&&n.prev&&!c.h5.isUL(n.prev.domNode)&&!c.h5.isOL(n.prev.domNode)&&Boolean(n.prev.domNode.textContent)&&o.test(n.prev.domNode.textContent))return!0;this.quill.insertText(e.index," ",a.Ay.sources.USER),this.quill.history.cutoff();const l=(new d.R).retain(e.index-s).delete(i+1).retain(n.length()-2-s).retain(1,{list:r});return this.quill.updateContents((0,h.po)(l),a.Ay.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-i,0,a.Ay.sources.SILENT),!1}};var f;!function(e){let t;!function(e){e.plainTextBindings={indent:m.indent,outdent:m.outdent,"outdent backspace":m["outdent backspace"],tab:m.tab,"remove tab":m["remove tab"],bold:u("bold"),italic:u("italic"),underline:u("underline")},e.rtfBindings={indent:m.indent,outdent:m.outdent,"outdent backspace":m["outdent backspace"],tab:m.tab,"remove tab":m["remove tab"],"list empty enter":m["list empty enter"],"list autofill":g,"list autofill with shift":(0,r._)((0,s._)({},g),{shiftKey:!0}),"header enter":m["header enter"]}}(t=e.Bindings||(e.Bindings={})),e.getKeyboardWithBindings=e=>{class t extends p{}return(0,n._)(t,"DEFAULTS",{bindings:e}),t}}(f||(f={}))},17559:(e,t,i)=>{i.d(t,{O:()=>Q});var n,s=i(23988),r=i(38886),o=i(65390),a=i(84647),l=i(77752),c=i(9721),d=i(32112),h=i(24819),m=i(1224),p=i(66202),u=i(13110),g=i(73328),f=i(9744),y=i(55340),_=i(7432),v=i(72106),b=i(83694),C=i(99339),k=i(7149),S=i(48779),w=i(25093),x=i(33011),E=i(34553),T=i(21644),A=i(91745),M=i(58655),K=i(84872),B=i(42279),I=i(79937),N=i(57836),$=i(58277),R=i(93432),L=i(78590);!function(e){e.rangeMismatch="range_mismatch",e.partialRemoveMismatch="partial_update_mismatch",e.noMarkInDom="no_mark_in_dom"}(n||(n={}));class F{toString(){return`${this.type} on action '${this.action}', expected: ${this.expected}, got: ${this.got}`}constructor(e,t,i){(0,s._)(this,"action",void 0),(0,s._)(this,"got",void 0),(0,s._)(this,"expected",void 0),(0,s._)(this,"type",void 0),this.action=e,this.got=t,this.expected=i,this.type=n.rangeMismatch}}class D{toString(){return`${this.type} on action '${this.action}', expected: ${this.expected}, got: ${this.got}`}constructor(e,t,i){(0,s._)(this,"action",void 0),(0,s._)(this,"got",void 0),(0,s._)(this,"expected",void 0),(0,s._)(this,"type",void 0),this.action=e,this.got=t,this.expected=i,this.type=n.partialRemoveMismatch}}class H{toString(){return`${this.type} on action '${this.action}' for range: ${this.got}`}constructor(e,t){(0,s._)(this,"action",void 0),(0,s._)(this,"got",void 0),(0,s._)(this,"type",void 0),this.action=e,this.got=t,this.type=n.noMarkInDom}}function P(e,t){var i;return null===(i=e.getAttribute("data-mark-id"))||void 0===i?void 0:i.startsWith(t.split("|")[0])}class O{fromMarkEvent(e){return(0,a.pipe)(this._getCachedDomNodes(),p.chain(o.fold((()=>p.left(new y.C.CollapsedMarkError("cannot animate collapsed mark"))),(([e])=>p.right(e)))),p.fold((e=>b.of(p.left(e))),(t=>C.R(t,e).pipe(k.T((()=>p.right(void 0)))))))}get range(){return this._getPosition(this.id)}getRect(){return(0,a.pipe)(this._getCachedDomNodes(),p.chain(o.fold((()=>p.left(new y.C.CollapsedMarkError("Cannot get rect for collapsed mark"))),(([e,t])=>(0,a.pipe)(u.ci(e===t?Array.from(e.getClientRects()):[...Array.from(e.getClientRects()),...Array.from(t.getClientRects())]),o.fold((()=>p.left(new Error("getClientRects returned nothing "))),(e=>p.right({rootClientRect:this._getParentRect(),clientRects:e}))))))))}_getCachedDomNodes(){return(0,a.pipe)(this.range(),p.fold((()=>p.right(o.none)),(e=>{const t=_.vY.size(e);return null!==this._cachedNodes&&null!==this._cachedNodes[0].parentElement&&null!==this._cachedNodes[1].parentElement&&this._cachedMarkLength===t&&P(this._cachedNodes[0],this.id)&&P(this._cachedNodes[1],this.id)?p.right(o.some(this._cachedNodes)):(0,a.pipe)(this._getUnderlines(),p.map(o.map((([e,i])=>(this._cachedNodes=[e.domNode,i.domNode],this._cachedMarkLength=t,this._cachedNodes)))))})))}_getUnderlines(){return(0,a.pipe)(this.range(),p.fold((()=>p.right(o.none)),(e=>g.zb((()=>{const{start:t,end:i}=e,n=this._getNodeAt(t+1)[0],s=this._getNodeAt(i)[0],r=L.gl.findUnderlineUp(n),a=L.gl.findUnderlineUp(s);return(0,h.V1)(null!==r&&null!==a,"Cannot find corresponding Marker. Looks like we are trying to show/hide non-existing alert/underline",(()=>`id=${this.id}; first=${r}; firstNode=${n}; last=${a}; lastNode=${s}, getContents=${this._getQuillContents(e,20)}`)),o.some([r,a])})))))}_getQuillContents(e,t){const{start:i,end:n}=e,s=i-t,r=this._getContents(s<0?0:s,n+t),o=d.E.anonymizeTextAndStringAttrs(r);return JSON.stringify(o)}constructor(e,t,i,n,r){(0,s._)(this,"id",void 0),(0,s._)(this,"_getParentRect",void 0),(0,s._)(this,"_getPosition",void 0),(0,s._)(this,"_getNodeAt",void 0),(0,s._)(this,"_getContents",void 0),(0,s._)(this,"_cachedMarkLength",void 0),(0,s._)(this,"_cachedNodes",void 0),this.id=e,this._getParentRect=t,this._getPosition=i,this._getNodeAt=n,this._getContents=r,this._cachedMarkLength=_.vY.size(p.getOrElse((()=>_.vY.empty))(this.range())),this._cachedNodes=null}}class Q extends c.A{_getMarksByBlot(e){return(0,a.pipe)(o.fromNullable(L.gl.getMarksIdsByBlot(e)),o.filterMap((0,a.flow)(r.x1((0,a.flow)((e=>this._marks.get(e)),o.fromNullable)),u.ci)))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_marksValidation(e,t,i){const n=e.filter((e=>!(e.action!==y.C.Change.ActionType.remove&&e.action!==y.C.Change.ActionType.update||_.IL.is(e.meta.range())||(0,L.Vc)(e.id)))).map((e=>({id:e.id,action:e.action,range:_.vY.copy(e.meta.range())})));n.length>0&&S._F.inRic(b.of(void 0),2e3).pipe(k.T((()=>function(e,t){return(0,a.pipe)((i=e,g.zb((()=>{const{deltaMarks:e}=i.ops.reduce((({deltaMarks:e,deltaLength:t},i)=>{if(!d.E.isInsert(i))throw new Error(`Quill marks: insert delta expected ${i}`);const n=d.E.getInsertLength(i),s=i.attributes||{},r=Object.keys(s);return 0===r.length||r.filter(L.Z5).forEach((i=>{const r=_.vY.create(t,t+n,s[i]);if(e.has(i)){const t=e.get(i);if(t.start>r.end+1)throw new Error(`Corrupted partial range. End part1: ${r.end}, start part2: ${t.start}`);e.set(i,_.vY.join(r,t))}else e.set(i,r)})),{deltaMarks:e,deltaLength:t+n}}),{deltaMarks:new Map,deltaLength:0});return e}))),p.map((e=>(0,a.pipe)(t.map((t=>(0,a.pipe)(o.fromNullable(e.get((0,L.VL)(t.id))),(e=>function(e,t){return(0,a.pipe)(t,o.fold((()=>_.vY.isEmpty(e.range)?o.none:o.some(p.right(new H(e.action,e.range)))),(t=>e.action===y.C.Change.ActionType.remove&&e.removeType===v.J.Change.RemoveType.partial?_.vY.contains(e.range,t)?o.none:o.some(p.left(new D(e.action,e.range,t))):_.vY.ord.equals(t,e.range)?o.none:o.some(_.vY.contains(t,e.range)?p.right(new F(e.action,e.range,t)):p.left(new F(e.action,e.range,t))))))}(t,e))))),r.YO.sequence(o.option),o.getOrElse((()=>[]))))));var i}(t,n))),w.$()).subscribe({next:p.fold((e=>this._log.warn("Cannot collect marks to validate",e)),(e=>e.forEach(p.fold((e=>{this._log.warn("Got invalid marks",{error:e,opsHistory:i})}),(e=>this._log.info("Range does not match with mark",{rangeMismatch:e,opsHistory:i}))))))})}_createMarkModel(e){const t=new O(e.id,(()=>this.quill.container.getBoundingClientRect()),(()=>()=>{const t=e.meta.range();return _.vY.isEmpty(t)?p.left(t):p.right(t)}),(e=>this.quill.getLeaf(e)),((e,t)=>(0,L.y1)(this.quill.getContents(e,t))));return this._marks.set(t.id,t),(0,L.is)(t.id),t}_getMarksModels(e){return e.reduce(((e,t)=>{switch(t.action){case y.C.Change.ActionType.create:const i=this._createMarkModel(t);e.created.set(i.id,p.right(i));break;case y.C.Change.ActionType.update:this._marks.has(t.id)?e.created.set(t.id,p.right(this._marks.get(t.id))):e.updated.set(t.id,p.left(new h.zU("Cannot update unknown mark")));break;case y.C.Change.ActionType.remove:if(!this._marks.has(t.id))throw e.removed.set(t.id,p.left(new h.zU("Cannot remove unknown mark"))),new h.zU("Cannot remove unknown mark");this._marks.delete(t.id),this._ensureActive(t.id),e.removed.set(t.id,p.right(void 0));break;default:(0,h.xb)(t)}return e}),y.C.Change.Result.getEmpty())}_getMarkAttributes(e){const t=(0,L.VL)(e.id);switch(e.action){case y.C.Change.ActionType.create:return{[t]:{action:y.C.Change.ActionType.create,id:e.id,classes:e.meta.classes,order:e.meta.order}};case y.C.Change.ActionType.update:return{[t]:{action:y.C.Change.ActionType.update,id:e.id,classes:e.meta.classes,order:e.meta.order}};case y.C.Change.ActionType.remove:return{[t]:!1};default:return(0,h.xb)(e)}}_ensureActive(e){(0,a.pipe)(this.activeMarks.getValue(),o.filter((t=>t.some((t=>t.id===e)))),o.map((()=>{this.activeMarks.next(o.none)}))),(0,a.pipe)(this.hoveredMarks.getValue(),o.filter((t=>t.some((t=>t.id===e)))),o.map((()=>this.hoveredMarks.next(o.none))))}_findInsertsToUnwrap(e,t){return this.quill.scroll.path(e+1).reduce(((i,[n,s])=>n instanceof L.z2?((1===s&&!L.gl.hasSameIdSibling(n,L.gl.LOOKUP_DIRECTION.left)||s+t-1===n.length()&&!L.gl.hasSameIdSibling(n,L.gl.LOOKUP_DIRECTION.right))&&i.push(v.J.Change.getRemoveAction({range:()=>_.vY.create(e,e+t)},v.J.Change.RemoveType.partial)(n.markId)),i):i),[])}_unwrapMarkExtension(e){const{toRemove:t}=e.reduce((({start:e,toRemove:t},i)=>((0,L.eB)(i)&&t.push(...this._findInsertsToUnwrap(e,d.E.getInsertLength(i))),{start:e+(0,L.wq)(i),toRemove:t})),{start:0,toRemove:[]});t.length&&this.quill.updateContents((0,L.po)((0,L.QW)(t,this._getMarkAttributes)),l.Ay.sources.API)}constructor(e,t){super(e,t),(0,s._)(this,"quill",void 0),(0,s._)(this,"options",void 0),(0,s._)(this,"_subs",void 0),(0,s._)(this,"_marks",void 0),(0,s._)(this,"_log",void 0),(0,s._)(this,"activeMarks",void 0),(0,s._)(this,"hoveredMarks",void 0),(0,s._)(this,"markChangeApplied",void 0),(0,s._)(this,"getMarkById",void 0),(0,s._)(this,"changeMarks",void 0),this.quill=e,this.options=t,this._subs=[],this._marks=new Map,this._log=m.Bx.Logging.getLogger("MarksManager",m.y7.$.DEBUG),this.activeMarks=new x.t(o.none),this.hoveredMarks=new x.t(o.none),this.markChangeApplied=new E.B,this.getMarkById=e=>(0,a.pipe)(this._marks.get(e),p.fromNullable(new Error(`Cannot find mark by id: ${e}`))),this.changeMarks=e=>{if(0===e.length)return y.C.Change.Result.getEmpty();const t=this._getMarksModels(e);return this._marksValidation(e,(0,L.y1)(this.quill.editor.delta),this.options.getOpsHistory()),this.quill.updateContents((0,L.po)((0,L.QW)(e,this._getMarkAttributes)),l.Ay.sources.API),e.forEach((e=>e.action===y.C.Change.ActionType.remove&&(0,L.p0)(e.id))),this.markChangeApplied.next(e.map((e=>e.id))),t};const i=(0,L.U3)(this.quill).pipe(T.u());this._subs.push(i.pipe(A.p(L.wM)).subscribe((({delta:e})=>{this._unwrapMarkExtension(e.ops)})),i.pipe(A.p(L.vi),A.p((({range:e})=>Boolean(e)&&0===e.length)),M.F(((e,t)=>e.range.index===t.range.index&&e.range.length===t.range.length)),k.T((({range:e,source:t})=>t===l.Ay.sources.USER?(0,a.pipe)(o.fromNullable(e),o.chain((e=>{const t=this.quill.getLeaf(e.index)[0],i=this.quill.getLeaf(e.index+1)[0];if(null===t)return o.none;if(i!==t&&i){const e=(0,a.pipe)(this._getMarksByBlot(t),o.fold((()=>[]),a.identity)),n=(0,a.pipe)(this._getMarksByBlot(i),o.fold((()=>[]),a.identity));return f.FM(e.concat(n))}return this._getMarksByBlot(t)}))):o.none))).subscribe(this.activeMarks),K.z([B.h(C.R(this.quill.root,"mouseenter").pipe(k.T(a.constTrue)),C.R(this.quill.root,"mouseleave").pipe(k.T(a.constFalse))).pipe(M.F()),this.options.ongoingSelection]).pipe(I.n((([e,i])=>i?b.of(o.none):e?B.h(t.contentUpdated.pipe(N.u(o.none)),t.scrollPositionChanged.pipe(N.u(o.none)),C.R(this.quill.root,"mousemove",{passive:!0}).pipe($.Z(50),k.T((e=>{const t=document.elementFromPoint(e.clientX,e.clientY);try{const e=l.Ay.find(t,!0);return!Boolean(e)||e instanceof l.Ay?o.none:this._getMarksByBlot(e)}catch(e){return o.none}})))):b.of(o.none).pipe(R.c(200)))),M.F(o.getEq({equals:(e,t)=>e.length===t.length&&e.every(((e,i)=>t[i]===e))}).equals)).subscribe(this.hoveredMarks))}}(0,s._)(Q,"DEFAULTS",{})},91177:(e,t,i)=>{i.d(t,{H:()=>b,_:()=>v});var n=i(23988),s=i(10334),r=i(17171),o=i(85886),a=i(56855),l=i(80843),c=i(35098),d=i(7149),h=i(19772),m=i(4444),p=i(25093),u=i(99010),g=i(31967),f=i(58655),y=i(30343),_=i(48779);class v extends o.Component{componentDidMount(){this.props.onMount&&this.props.onMount(this._editorWrapEl)}shouldComponentUpdate(){return!1}render(){const{theme:e,children:t,onMouseDown:i}=this.props;return o.createElement(a.F.div,{className:e.pipe(d.T((e=>e.editorContentWrap))),onMouseDown:i},o.createElement(a.F.div,(0,r._)((0,s._)({},(0,l.Ly)(e.pipe(d.T((e=>e.editorContent))))),{mount:e=>e&&(this._editorWrapEl=e)}),t))}constructor(...e){super(...e),(0,n._)(this,"_editorWrapEl",void 0)}}const b=e=>{const t=o.useContext(c.L.Context),{ref:i,onMount:n}=h.R.useElWatcher();return h.R.useSubscriptionTo(i.pipe(m.Kc((i=>e.scrollEl.pipe(m.oE,p.$(),u.M((n=>e.denaliEditor.attach(i,n,t.pipe(d.T((e=>e.rect))))))))))),h.R.useSubscriptionTo(i.pipe(m.Kc((t=>g.sc(t).pipe(d.T((e=>e.height)),f.F(),y.Z(t.getBoundingClientRect().height),u.M(_.H9(e.editorHeight))))))),o.useEffect((()=>()=>e.denaliEditor.dispose())),o.createElement(v,{theme:e.theme,onMount:n},e.children)}},94808:(e,t,i)=>{i.d(t,{W:()=>Ke,H:()=>Be.H});var n=i(23988),s=i(10334),r=i(17171),o=i(38886),a=i(44869),l=i(84647),c=i(77752),d=i(82498),h=i(63404),m=i(77821),p=i(91597),u=i(71301),g=i(32112),f=i(83407),y=i(24819),_=i(84712),v=i(90829),b=i(1224),C=i(65390),k=i(66202),S=i(65160),w=i(73328),x=i(64422),E=i(72297),T=i(76005),A=i(7432),M=i(72106),K=i(34980),B=i(15114),I=i(58655),N=i(57836),$=i(48779),R=i(92832),L=i(99339),F=i(91745),D=i(52418),H=i(60553),P=i(99010),O=i(79937),Q=i(47456),W=i(5406),V=i(7149),U=i(20096),z=i(4444),j=i(84872),q=i(82585),G=i(83694),Y=i(42279),J=i(93208),X=i(81753),Z=i(733),ee=i(43696),te=i(3016),ie=i(61112),ne=i(33011),se=i(34553),re=i(21948),oe=i(31206),ae=i(93432),le=i(60191),ce=i(81930),de=i(21644),he=i(14553),me=i(30343),pe=i(58260),ue=i(58277),ge=i(25093),fe=i(89439),ye=i(98814),_e=i(78590),ve=i(36644),be=i(29145),Ce=i(82874),ke=i(40857),Se=i(3656),we=i(17559),xe=i(88195);const Ee=(e,t)=>{const i=Boolean(c.Ay.imports[e])?c.Ay.import(e):null;return c.Ay.register(e,t,!0),()=>{c.Ay.imports[e]===i&&(Boolean(i)?c.Ay.register(e,i,!0):delete c.Ay.imports[e])}};var Te,Ae,Me;!function(e){var t,i,n,s,r=e.withDefaultThemeClasses=(e={})=>({editor:(0,f.Ly)(xe.n.editor,e.editor),containerClass:null!==(t=e.containerClass)&&void 0!==t?t:"",scrollWrap:null!==(i=e.scrollWrap)&&void 0!==i?i:"",markExtraClass:null!==(n=e.markExtraClass)&&void 0!==n?n:"",markClassesTheme:null!==(s=e.markClassesTheme)&&void 0!==s?s:(0,B.TM)()});e.getDefaultThemeClasses=()=>r({})}(Te||(Te={})),function(e){e.api="api",e.dox="dox",e.user="user"}(Ae||(Ae={})),(Ae||(Ae={})).toQuillSources=e=>{switch(e){case Ae.dox:case Ae.user:return c.Ay.sources.USER;case Ae.api:return c.Ay.sources.API;default:return(0,y.xb)(e)}},function(e){e.isLocalDelta=e=>"dox"!==e.source&&x.lY.isDelta(e.change)}(Me||(Me={}));class Ke{_initQuill(e,t){const i=[...Object.entries(t.modules).map((([e,t])=>Ee(`modules/${e}`,t))),...t.formats.map((e=>Ee(`formats/${e.blotName}`,e)))],n=(0,r._)((0,s._)({},Object.keys(t.modules).reduce(((e,t)=>(e[t]=!0,e)),{})),{keyboard:!0,clipboard:{maxAllowedTextLength:1e5,lengthExceededCallback:()=>alert("Oops, Document size exceeded!"),flush:this._flush,deltaFilter:this._deltaFilter},history:{userOnly:!0,delay:1e3,maxStack:100,flush:this._flush},marks:{scrollPositionChanged:this.scrollPosition.pipe(I.F(),N.u($.q6),R.i(1)),contentUpdated:this.contentUpdated,scrollContainer:this._scrollEl,ongoingSelection:this.ongoingSelection.pipe(I.F()),getOpsHistory:()=>this._history.getAnonymizedOperationsHistory()}}),o=new c.Ay(this._editorEl,{modules:n});o.root.setAttribute("spellcheck","false");const a=o.container.className,l=o.root.className;return this._subs.push(e.subscribe((e=>{o.root.className=(0,f.Ly)(e.editor,l),o.container.className=(0,f.Ly)(e.containerClass,a)}))),i.forEach((e=>e())),o}_pushDelta(e){void 0===this._outgoingChanges?this._outgoingChanges=x.lY.delta(this._deltaFilter(e),this._textLength):this._outgoingChanges.delta=this._outgoingChanges.delta.compose(this._deltaFilter(e)),this._shouldFlushSynchronously(e)?this._applyingExternalChanges||this.flushChanges():(void 0!==this._changesSyncTimer&&clearTimeout(this._changesSyncTimer),this._changesSyncTimer=setTimeout(this.flushChanges,1500))}_shouldFlushSynchronously(e){var t;if(null===(t=this._outgoingChanges)||void 0===t?void 0:t.isEmpty)return!1;const i=g.E.calcAmountLength(e);return Boolean(i>100||this._textLength-i<=1||void 0!==e.ops.find((e=>(0,_e.h)(e)||(0,_e.eB)(e)))||C.isSome(this.activeMarks.getValue())||i>1&&e.ops.find((e=>g.E.isDelete(e))))}_setTextLength(e,t){const i=this._textLength-e;this._textLength=e;const n="api"===t?T.LN.Meta.Source.api:T.LN.Meta.Source.user,s="api"===t?{}:this.getFormatting(A.vY.create(e-1,0)),{index:r,length:o}=this.getCursor();r+o>=e&&this.selection.next({index:r,length:o-i,meta:{source:n,formatting:s}})}_handleFreezeFocus(){const e=(e,t)=>e===t||this._allowNavigationTo(e),t=L.R(document,"click").pipe(F.p((t=>!e(t.target,this.quill.root))),D.Q(H.$),F.p((()=>!e(document.activeElement,this.quill.root))),P.M((()=>this._restoreFocus("navigatedFromQuill"))));return this._freezeFocus.state.pipe(O.n($._F.rafScheduler),P.M((e=>e?this._restoreFocus("focusFreeze"):this.quill.blur())),O.n($.vh(t)),Q.W((e=>(this._log.warn("unexpected exception in freezeFocus",e),W.w)))).subscribe()}attach(e,t,i){if(Boolean(this._wrapper))throw new Error("Editor already attached");this._wrapper=e,this._scrollEl.next(C.some(t)),this._viewportRect=i,e.appendChild(this._editorEl),this._textLength?k.getOrElse((e=>this._log.error(`Failed to reset cursor on ded attach ${e}`)))(this.setCursor(0,0)):this.quill.root.focus(),(0,v.hJ)("dedBlockFlush",(()=>this._isFlushBlocked=!0)),(0,v.hJ)("dedAllowFlush",(()=>this._isFlushBlocked=!1)),(0,v.hJ)("dedForceFlush",(()=>this.flushChanges())),(0,v.hJ)("dedGetText",this.getText),(0,v.hJ)("dedSetCursor",((e,t)=>k.getOrElse((e=>this._log.error(e)))(this.setCursor(e,t,c.Ay.sources.USER)))),(0,v.hJ)("dedGetCursor",(()=>this.getCursor())),(0,v.hJ)("dedType",(e=>{this.flushChanges(),this._pushChanges(x.lY.ins(this.getCursor().index,e,this.getText().length),Ae.user)})),(0,v.hJ)("dedQuill",this.quill),(0,v.hJ)("ded",this),(0,v.hJ)("getPossibleCursorPosition",((e,t,i)=>this.getPossibleCursorPosition("string"==typeof e?k.left(e):k.right(e),"string"==typeof t?k.left(t):k.right(t),i))),this._subs.push(this._handleFreezeFocus(),L.R(this.quill.root,"mouseup").pipe(V.T((e=>({clicks:e.detail,range:C.fromNullable(this.quill.getSelection())}))),V.T((({clicks:e,range:t})=>(0,l.pipe)(t,C.chain((e=>(0,_e.a3)(this.quill.getText(),e.index))),C.filter((e=>""!==e.meta.value)),C.map(A.h0.create(e)))))).subscribe(this.clickedWord),this._scrollTo.pipe(U.w()).subscribe(this._setScroll),this._scrollEl.pipe(z.oE,O.n((e=>L.R(e,"scroll").pipe(V.T(this._getScroll))))).subscribe(this.scrollPosition),j.z(this._contentChange.pipe(F.p((({source:e})=>e===c.Ay.sources.USER))),this._viewportRect).subscribe((([,e])=>{requestAnimationFrame((()=>{(0,l.pipe)(this._getCursorRect(),k.fold((e=>(this._log.warn("Typing enhancer: Cannot get cursor rect",e),C.none)),l.identity),S.Mi((t=>{const i=Math.ceil(t.top+t.height),n=Math.ceil(.7*Math.max(e.top+e.height));i>n&&this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+Math.round(i-n),animate:T.nA.initial},this._getScroll()))})))}))})),j.z([this._scrollEl.pipe(z.oE),this._historyChanged]).subscribe((([e])=>requestAnimationFrame((()=>{(0,l.pipe)(this._getCursorRect(),k.fold((e=>(this._log.warn("Undo/Redo: Cannot get cursor rect",e),C.none)),l.identity),S.Mi((t=>{const i=e.getBoundingClientRect();(t.top<i.top||t.top>i.bottom)&&this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+Math.round(t.top-i.top-i.height/2),animate:T.nA.none},this._getScroll()))})))})))),j.z(this._viewportRect,this.scrollPosition.pipe(q.B(150))).pipe(V.T(o.d5),z.Kc((0,l.flow)(this._calculateViewport,G.of))).subscribe(this.viewport),Y.h(L.R(this.quill.root,"blur").pipe(N.u(!1)),L.R(this.quill.root,"focus").pipe(N.u(!0))).subscribe(this.isEditorFocused),this._execCommandAfterFocus.pipe(J.E(this.isEditorFocused)).subscribe((([e,t])=>{t||this._restoreFocus("Restore focus after copy/cut"),document.execCommand(e)})))}dispose(){this._subs.dispose(),this._marker.dispose(),this._history.dispose(),this.quill.emitter.removeAllListeners()}setContents(e,t=Ae.api){const i=(0,_e.H6)(e),n=void 0!==this._outgoingChanges,s=e.delta.compose(i.delta),r=g.E.calcDiffLength(s),o=this._deltaFilter(s),a=g.E.calcDiffLength(o);this._log.debug("reset content",{shouldNormalizeCRLF:!i.isEmpty,hasOutgoingChanges:n,deltaLength:r,deltaWithoutAttrsLength:a,deltaLengthMismatch:r!==a}),this.quill.setContents((0,_e.po)(o),"api"),this._setTextLength(r,t),t!==Ae.dox||i.isEmpty||(this._log.warn("Received Reset from DOX without trailing linebreak. Pushing linebreak delta to DOX",i),this._doxSync.pushChanges(i)),"api"!==t?this._changes.next({change:x.lY.unsafeRes(s),source:t}):i.isEmpty||this._changes.next({change:i,source:t})}getCursor(){const e=this.selection.getValue();return(0,r._)((0,s._)({},e),{meta:(0,r._)((0,s._)({},e.meta),{formatting:this.getFormatting(T.LN.toTextRange(e))})})}getLastPossibleCursorPosition(){return this._textLength-1}getSelectionRect(e){return(0,l.pipe)(this._getDocumentRange(e||this.getCursor()),k.map((e=>new _e.Yc(e,(()=>this.quill.container.getBoundingClientRect())))))}changeMarks(e){this.flushChanges(),this._log.debug("change marks",e.map(M.J.Change.addRange));const t=this._marker.changeMarks(e);return this.isEditorFocused.getValue()&&this._restoreFocus("changeMarks",!0),t}_scrollToPosition(e){const t=this._getScroll(),i=this._normalizeScrollOffset(e.scrollTop-this._getScrollTop());this._scrollTo.next(this._getAnimation({scrollTop:t+i,animate:e.animate},t).pipe(X.j((()=>{const e=this._getScroll();this._scrollTo.next(this._getAnimation({scrollTop:e,animate:T.nA.none},e))}))))}get contentRect(){return(0,l.pipe)(C.fromNullable(this._wrapper),C.map((e=>e.getBoundingClientRect())))}getMarkRect(e){return(0,l.pipe)(this._marker.getMarkById(e),k.chain((e=>e.getRect())))}getMarkById(e){return this._marker.getMarkById(e)}scrollToMark(e,t={animate:T.nA.none,paddingTop:0}){return(0,l.pipe)(this._marker.getMarkById(e),k.chain((e=>this._getMarkRect(e))),k.fold((e=>(this._log.error("Cannot scroll to given mark",e),Z.$(e))),(e=>{const i=t.animate||T.nA.none,n=this._getScrollTop(),s=this._normalizeScrollOffset(e.top-(t.paddingTop?t.paddingTop:n));return new ee.c((e=>(e.next(void 0),this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll()+s,animate:i},this._getScroll()).pipe(X.j((()=>{e.complete()})))),()=>{this._scrollTo.next(this._getAnimation({scrollTop:this._getScroll(),animate:T.nA.none},this._getScroll()))})))})))}undo(e="user"){this._history.undo(),this._historyChanged.next({source:e})}canUndo(){return this._history.canUndo()}clearHistory(){this._history.clear()}redo(e="user"){this._history.redo(),this._historyChanged.next({source:e})}canRedo(){return this._history.canRedo()}cut(){this._execCommandAfterFocus.next("cut")}copy(){this._execCommandAfterFocus.next("copy")}dontFreezeWhen(e,t){return!0===this._options.freezeFocusFeature?this._freezeFocus.watch($.B8(e),t):te.y.EMPTY}_getScrollTop(){return(0,l.pipe)(this._getScrollRect(),C.fold((()=>0),(e=>e.top)))}_getMarkRect(e){return(0,l.pipe)(e.getRect(),k.map(K.W.relativeToViewport),k.map((e=>({top:e.top,bottom:e.bottom}))))}_getCursorRect(){return k.tryCatch((()=>(0,l.pipe)(C.fromNullable(this.quill.getSelection()),C.filter((e=>0===e.length)),C.chain((e=>C.fromNullable(this.quill.getBounds(e.index,1)))),C.map((e=>{const t=this.quill.container.getBoundingClientRect();return{bottom:e.bottom+t.top,height:e.height,left:e.left+t.left,right:e.right+t.left,top:e.top+t.top,width:e.width}})))),(e=>e))}_ensureSelection(e){const t=this.quill.getSelection();e(),t&&t.length>0&&this._clearSelection((()=>{this.quill.setSelection(t.index,t.length,c.Ay.sources.API)}))}_clearSelection(e){const t=Boolean(window.getSelection)?window.getSelection():document.selection;Boolean(t)&&(Boolean(t.removeAllRanges)?t.removeAllRanges():Boolean(t.empty)&&t.empty()),e&&requestAnimationFrame(e)}_addFormatting(e,t,i){t===T.M_.Type.link?this._applyFormatting(T.M_.Type.link,e,i):this._applyFormatting(t,e)}_removeFormatting(e,t){t===T.M_.Type.link?this._applyFormatting(T.M_.Type.link,e,!1):this._applyFormatting(t,e,!1)}_clearFormatting(e){A.vY.isEmpty(e)&&(T.M_.asList.forEach((e=>{const{key:t}=_e.pR.mapEditorFormatToQuill(e);this.quill.format(t,!1,"user")})),this._contentUpdatedInternal.next({type:T.D_.Type.onlyFormatting,source:"user",delta:new E.R})),this.quill.removeFormat(e.start,A.vY.size(e),c.Ay.sources.USER)}_applyFormatting(e,t,i){const{key:n,value:s}=_e.pR.mapEditorFormatToQuill(e),r=void 0!==i?i:s;if(A.vY.isEmpty(t)){if(e===T.M_.Type.link)return;this.quill.format(n,r,"user"),this._contentUpdatedInternal.next({type:T.D_.Type.onlyFormatting,source:"user",delta:new E.R})}else this._getFormattingFn(e)(t.start,A.vY.size(t),n,r,"user")}getFormatting(e){return _e.pR.mapQuillFormatsToDenali(this.quill,e)}constructor(e,t,i,s,r){(0,n._)(this,"_doxSync",void 0),(0,n._)(this,"_allowedAttrs",void 0),(0,n._)(this,"_allowedEmbeds",void 0),(0,n._)(this,"_options",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_freezeFocus",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"_editorEl",void 0),(0,n._)(this,"_scrollEl",void 0),(0,n._)(this,"_viewportRect",void 0),(0,n._)(this,"_wrapper",void 0),(0,n._)(this,"_quillEditorChange",void 0),(0,n._)(this,"_scrollTo",void 0),(0,n._)(this,"_textLength",void 0),(0,n._)(this,"_outgoingChanges",void 0),(0,n._)(this,"_changesSyncTimer",void 0),(0,n._)(this,"_marker",void 0),(0,n._)(this,"_history",void 0),(0,n._)(this,"_historyChanged",void 0),(0,n._)(this,"_allowNavigationTo",void 0),(0,n._)(this,"_clipboard",void 0),(0,n._)(this,"_contentChange",void 0),(0,n._)(this,"_isFlushBlocked",void 0),(0,n._)(this,"quill",void 0),(0,n._)(this,"textChangedAfterPaste",void 0),(0,n._)(this,"shortcutUsed",void 0),(0,n._)(this,"_deltaFilter",void 0),(0,n._)(this,"_userClasses",void 0),(0,n._)(this,"flushChanges",void 0),(0,n._)(this,"_flush",void 0),(0,n._)(this,"_changes",void 0),(0,n._)(this,"changes",void 0),(0,n._)(this,"_contentUpdatedInternal",void 0),(0,n._)(this,"contentUpdated",void 0),(0,n._)(this,"selection",void 0),(0,n._)(this,"selectedFormatting",void 0),(0,n._)(this,"clickedWord",void 0),(0,n._)(this,"scrollPosition",void 0),(0,n._)(this,"activeMarks",void 0),(0,n._)(this,"hoveredMarks",void 0),(0,n._)(this,"markChangeApplied",void 0),(0,n._)(this,"scrollPercentage",void 0),(0,n._)(this,"ongoingSelection",void 0),(0,n._)(this,"viewport",void 0),(0,n._)(this,"viewportRange",void 0),(0,n._)(this,"isEditorFocused",void 0),(0,n._)(this,"_execCommandAfterFocus",void 0),(0,n._)(this,"_validateSelection",void 0),(0,n._)(this,"_documentRangeCache",void 0),(0,n._)(this,"_getDocumentRange",void 0),(0,n._)(this,"_setNativeSelection",void 0),(0,n._)(this,"_restoreFocus",void 0),(0,n._)(this,"_scrollToCursor",void 0),(0,n._)(this,"restoreFocus",void 0),(0,n._)(this,"_getAnimation",void 0),(0,n._)(this,"_applyingExternalChanges",void 0),(0,n._)(this,"_pushChanges",void 0),(0,n._)(this,"pushChanges",void 0),(0,n._)(this,"_text",void 0),(0,n._)(this,"getText",void 0),(0,n._)(this,"getHTML",void 0),(0,n._)(this,"getTextLength",void 0),(0,n._)(this,"getContents",void 0),(0,n._)(this,"setCursor",void 0),(0,n._)(this,"scrollToTitle",void 0),(0,n._)(this,"_getScrollRect",void 0),(0,n._)(this,"_getScroll",void 0),(0,n._)(this,"_normalizeScrollOffset",void 0),(0,n._)(this,"_setScroll",void 0),(0,n._)(this,"_calculateViewport",void 0),(0,n._)(this,"containsElement",void 0),(0,n._)(this,"getPossibleCursorPosition",void 0),(0,n._)(this,"setFormatting",void 0),(0,n._)(this,"_getFormattingFn",void 0),this._doxSync=t,this._allowedAttrs=i,this._allowedEmbeds=s,this._options=r,this._log=b.Bx.Logging.getLogger("DEd",b.y7.$.DEBUG,b.y7.I.Model.getColor("DEd")),this._freezeFocus=new ie.p.Impl("freezeFocus",this._log,!0===this._options.freezeFocusFeature?ie.p.everyTrue:()=>!1),this._subs=new te.y.Keeper,this._editorEl=document.createElement("div"),this._scrollEl=new ne.t(C.none),this._scrollTo=new se.B,this._textLength=0,this._outgoingChanges=void 0,this._historyChanged=new se.B,this._isFlushBlocked=!1,this.shortcutUsed=new se.B,this._deltaFilter=g.E.cleanDelta(this._allowedEmbeds,this._allowedAttrs),this._userClasses=this._options.classes?this._options.classes.view(Te.withDefaultThemeClasses):_.s.create(Te.getDefaultThemeClasses()),this.flushChanges=(e=Ae.api)=>{if(!this._isFlushBlocked&&void 0!==this._outgoingChanges){this._log.trace("flushChanges");const t=this._outgoingChanges;this._outgoingChanges=void 0,void 0!==this._changesSyncTimer&&(clearTimeout(this._changesSyncTimer),this._changesSyncTimer=void 0),Boolean(t.isEmpty)||(this._log.debug("emit changes",{textLength:this.getTextLength(),deltaLength:t.length,deltaAmount:t.amount,deltaTargetLen:t.prevLen}),this._changes.next({change:t,source:e}))}},this._flush=()=>{this.flushChanges(),this._changes.next({change:x.lY.flush(),source:Ae.api})},this._changes=new re.m,this.changes=this._changes.pipe(oe.E("change")),this._contentUpdatedInternal=new se.B,this.contentUpdated=this._contentUpdatedInternal.pipe(ae.c(1)),this.selection=new ne.t(T.LN.empty),this.selectedFormatting=Y.h(this._contentUpdatedInternal.pipe(F.p((e=>e.type===T.D_.Type.onlyFormatting)),J.E(this.selection,((e,t)=>t))),this.selection).pipe(V.T((e=>this.getFormatting(T.LN.toTextRange(e)))),le.tl({bufferSize:1,refCount:!0})),this.clickedWord=new se.B,this.scrollPosition=new ne.t(0),this.ongoingSelection=new ne.t(!1),this.viewport=new ne.t({text:f.rw.empty,wrapper:f.rw.empty}),this.isEditorFocused=new ne.t(!0),this._execCommandAfterFocus=new se.B,this._validateSelection=({index:e,length:t})=>w.zb((()=>((0,y.V1)(e+t>=0,"Selection is less than zero",(()=>`index: ${e}, length: ${t}`)),(0,y.V1)(e+t<this._textLength,"Selection is greater than text length",(()=>`index: ${e}, length: ${t}, text length: ${this._textLength}`)),{index:e,length:t}))),this._documentRangeCache=ye.l.createCache(5),this._getDocumentRange=(0,l.flow)(this._validateSelection,k.chain((e=>(0,l.pipe)(this._documentRangeCache.get(e),C.fold((()=>(0,l.pipe)(e,ye.l.BoundaryPoint.getPoints((t=>{const i=this.quill.getLeaf(t);return(0,y.V1)(null!==i[0],"Failed to get boundary point",(()=>JSON.stringify({quillTextLength:this.quill.getLength(),path:this.quill.scroll.path(t).map((([e,t])=>[e.statics.blotName,t])),dedTextLength:this._textLength,position:t,selection:e}))),(0,_e.RU)(i)})),k.chain(ye.l.BoundaryPoint.toNativeRange))),k.right),k.map((t=>(this._documentRangeCache.set(e,t),t))))))),this._setNativeSelection=e=>t=>(0,l.pipe)(this._getDocumentRange(t),k.map((t=>{const i=window.getSelection()||document.selection;i.removeAllRanges(),i.addRange(t),this.quill.focus({preventScroll:e})}))),this._restoreFocus=(e,t)=>(0,l.pipe)(this.getCursor(),this._setNativeSelection(t),k.getOrElse((t=>this._log.error("Cannot reset focus",t,e)))),this._scrollToCursor=()=>(0,l.pipe)(this._getCursorRect(),k.getOrElse((e=>(this._log.warn("Scroll to cursor: Cannot get cursor rect",e),C.none))),C.chain((e=>(0,l.pipe)(this._getScrollRect(),C.map((t=>({cursorRect:e,wrapperRect:t})))))),S.Mi((({cursorRect:e,wrapperRect:t})=>this._scrollToPosition({scrollTop:Math.round(e.top-t.top-t.height/2),animate:T.nA.initial})))),this.restoreFocus=e=>{this._restoreFocus(e),this._scrollToCursor()},this._getAnimation=(e,t)=>{switch(e.animate){case T.nA.none:return G.of(e.scrollTop);case T.nA.fast:return ce.X.createAnimationObservable(t,e.scrollTop,100);case T.nA.initial:return ce.X.createAnimationObservable(t,e.scrollTop,200);case T.nA.fake:return function(e,t,i){return ee.c.create((n=>{const s=Math.abs(e-t)<250?0:e-t>0?Math.min(e-t,250):Math.max(e-t,-250);i.style.transform=`translateY(${s}px)`,i.style.transition="",n.next(e);const r=requestAnimationFrame((()=>{i.style.transition="transform 150ms linear",i.style.transform=""}));return()=>{cancelAnimationFrame(r),i.style.transition="",i.style.transform=""}}))}(e.scrollTop,t,this._wrapper);default:return(0,y.xb)(e.animate)}},this._applyingExternalChanges=!1,this._pushChanges=(e,t)=>{this._log.trace("pushChanges",e),x.lY.isFlush(e)?this.flushChanges(t):x.lY.isReset(e)?(this._log.debug("get reset",{source:t,textLength:this.getTextLength(),deltaLength:e.length}),this._outgoingChanges=void 0,this.setContents(e,t)):(this._log.debug("get changes",{source:t,textLength:this.getTextLength(),deltaLength:e.length,deltaAmount:e.amount,deltaTargetLen:e.prevLen,change:e}),(0,y.V1)(void 0===this._outgoingChanges,"There should be no outgoing changes in the editor when pushChanges() is called. Use flush()"),e.prevLen!==this._textLength&&this._log.error("Incoming change for a wrong text len",{expected:this._textLength,incoming:e.prevLen}),this._ensureSelection((()=>{this._history.commit((()=>{this._applyingExternalChanges=!0,g.E.splitToDeleteThenInsert(e.delta).filter(g.E.nonEmpty).forEach((e=>{this.quill.updateContents((0,_e.po)(e),Ae.toQuillSources(t))})),this._applyingExternalChanges=!1,this.flushChanges(t)}))})))},this.pushChanges=(e,t)=>{this._pushChanges(e,"api"===t?Ae.api:Ae.user)},this._text=null,this.getText=()=>(null===this._text&&(this._text=this.quill.getText()),this._text),this.getHTML=()=>(this.flushChanges(),this._editorEl.outerHTML),this.getTextLength=()=>this._textLength,this.getContents=(e,t)=>x.lY.unsafeRes(this._deltaFilter((0,_e.y1)(this.quill.getContents(e,t)))),this.setCursor=(e,t=0,i="api")=>(0,l.pipe)(this._setNativeSelection("silent"===i)({index:e,length:t,meta:{source:"api"===i?T.LN.Meta.Source.api:T.LN.Meta.Source.user,formatting:this.getFormatting(A.vY.create(e,t))}}),k.map((()=>{this.quill.setSelection(e,t,i)}))),this.scrollToTitle=()=>{this._scrollTo.next(this._getAnimation({scrollTop:0,animate:T.nA.initial},this._getScroll()))},this._getScrollRect=()=>(0,l.pipe)(this._scrollEl.getValue(),C.map((e=>e.getBoundingClientRect()))),this._getScroll=()=>((0,y.V1)(C.isSome(this._scrollEl.getValue()),"DEd should be attached"),S.$v(this._scrollEl.getValue()).scrollTop),this._normalizeScrollOffset=e=>{(0,y.V1)(C.isSome(this._scrollEl.getValue()),"DEd should be attached");const t=S.$v(this._scrollEl.getValue()),i=t.scrollTop,n=t.scrollHeight-t.offsetHeight;return e+i<n?e+i>0?e:-i:n-i},this._setScroll=e=>((0,y.V1)(C.isSome(this._scrollEl.getValue()),"DEd should be attached"),S.$v(this._scrollEl.getValue()).scrollTop=e),this._calculateViewport=e=>{const t=this.quill.root.getBoundingClientRect();return{text:(0,l.pipe)(f.rw.intersection(e,t),C.getOrElse((()=>t))),wrapper:e}},this.containsElement=e=>(0,f.pu)(this.quill.root,e),this.getPossibleCursorPosition=(e,t,i=!1)=>{const n=this.viewport.value.text,s=(0,l.pipe)(e,k.fold(T.Yd.X.toViewport(n),l.identity)),r=(0,l.pipe)(t,k.fold(T.Yd.Y.toViewport(n),l.identity));return(0,l.pipe)(_e.pi.getNativeCursorByPosition(s,r,n,this.quill.root,this._log.isEnabled(b.y7.$.TRACE)||i),k.map(_e.pi.getPositionByNativeCursor(this.quill.root)))},this.setFormatting=e=>{const t=Array.from(Object.entries(e.meta.formatting));if(0===t.length)return;const i=T.LN.toTextRange(e);t.length===T.M_.asList.length&&t.every((([e,t])=>!1===t||void 0===t))?this._clearFormatting(i):(0,l.pipe)(t,o.jB((([e,t])=>t)),(({left:e,right:t})=>{e.forEach((([e])=>this._removeFormatting(i,e))),t.forEach((([e])=>this._addFormatting(i,e)))}))},this._getFormattingFn=e=>(_e.pR.isBlockFormat(e)?this.quill.formatLine:this.quill.formatText).bind(this.quill),this._allowNavigationTo=r.allowNavigationTo||(()=>!1),this.quill=this._initQuill(this._userClasses,e),this._marker=this.quill.getModule("marks"),this._history=this.quill.getModule("history"),this._clipboard=this.quill.getModule("clipboard"),this.textChangedAfterPaste=this._clipboard.textChangedAfterPaste,this.activeMarks=this._marker.activeMarks,this.hoveredMarks=this._marker.hoveredMarks,this.markChangeApplied=this._marker.markChangeApplied,this._quillEditorChange=(0,_e.U3)(this.quill).pipe(de.u()),this._contentChange=this._quillEditorChange.pipe(F.p((0,_e.oF)(this._allowedAttrs)),de.u()),this._log.isEnabled(b.y7.$.DEBUG)&&function(e,t,i,n=C.some){const s=e[t].bind(e);e[t]=(...e)=>((0,l.pipe)(n(...e),S.Mi((e=>i.debug(`trace call of ${t}`,{args:e,stack:(new Error).stack})))),s(...e))}(this.quill,"updateContents",this._log.getLogger("quill.core"),((e,t)=>"user"!==t&&g.E.calcDiffLength(e)<0?C.some({delta:g.E.anonymizeTextAndStringAttrs(e),source:t}):C.none)),this.scrollPercentage=this.scrollPosition.pipe(he.z(this._scrollEl.pipe(he.z(Y.h(L.R(window,"resize"),this._contentChange).pipe(q.B(500),me.Z($.q6)),(e=>e)),V.T((e=>(0,l.pipe)(e,C.chain((e=>{const t=e.scrollHeight-e.clientHeight;return t>0?C.some(t):C.none}))))),I.F(C.getEq(a.US).equals))),V.T((([e,t])=>(0,l.pipe)(t,C.map((t=>e/t))))),I.F(C.getEq(a.US).equals),le.tl({bufferSize:1,refCount:!0}));const d=this._quillEditorChange.pipe(F.p(_e.vi),F.p((e=>Boolean(e)&&Boolean(e.range))));this._subs.push(this._contentChange.subscribe((({delta:e,source:t})=>{void 0!==e.ops&&(this._text=null,t===c.Ay.sources.USER?this._pushDelta(e):this._log.debug("skip emit",{source:t,textLength:this.getTextLength(),deltaLength:g.E.calcDiffLength(e),delta:g.E.anonymizeTextAndStringAttrs(e)}),this._setTextLength(this._textLength+g.E.calcDiffLength(e),t))})),this._contentChange.pipe(pe.s(1)).subscribe((()=>(0,ve.TE)("dedChangeContent"))),Y.h([this._historyChanged.pipe(F.p((({source:e})=>"keyboard"===e))),this._clipboard.clipboardShortcutUsed]).pipe(N.u(void 0)).subscribe(this.shortcutUsed),this._contentChange.pipe(V.T((e=>({type:e.delta.ops.some((e=>!g.E.isRetain(e)))?T.D_.Type.textMaybeWithFormatting:T.D_.Type.onlyFormatting,source:e.source,delta:e.delta})))).subscribe(this._contentUpdatedInternal),d.pipe(V.T((({range:{index:e,length:t},source:i})=>({index:e,length:t,meta:{source:Boolean(i)?i:T.LN.Meta.Source.user,formatting:this.getFormatting(A.vY.create(e,e+t))}}))),I.F(T.LN.eq.equals)).subscribe(this.selection),Y.h(L.R(this.quill.root,"mousedown",{passive:!0}).pipe(N.u(!0)),L.R(document,"mouseup",{passive:!0}).pipe(N.u(!1)),L.R(document,"dragend",{passive:!0}).pipe(N.u(!1)),L.R(document,"click",{passive:!0}).pipe(N.u(!1))).pipe(O.n((0,v.Sw)(L.R(document,"mousemove",{passive:!0}).pipe(ue.Z(50),F.p((()=>!window.getSelection().isCollapsed)),ge.$(),N.u(!0)),G.of(!1)))).subscribe(this.ongoingSelection),t.changes.subscribe((e=>this._pushChanges(e,Ae.dox))),this._changes.pipe(F.p(Me.isLocalDelta),oe.E("change")).subscribe(t.pushChanges),this.changes.pipe(V.T((()=>this._textLength)),I.F(),fe.c(5*u.mZ)).subscribe((e=>b.Bx.TimeSeries.rootFemetrics.getTimer("text_length").recordTime(e)))),this.viewportRange=j.z([this.viewport.pipe(I.F()),this.scrollPosition,this.isEditorFocused.pipe(F.p(Boolean))]).pipe((300,e=>{const t=e.pipe(de.u());return Y.h(t.pipe(fe.c(300)),t.pipe(q.B(300))).pipe(I.F())}),V.T((([{text:e}])=>(0,l.pipe)((0,l.tuple)((0,l.pipe)(_e.pi.getNativeCursorByPosition(e.left,e.top,this.viewport.value.text,this.quill.root),k.map(_e.pi.getPositionByNativeCursor(this.quill.root))),(0,l.pipe)(_e.pi.getNativeCursorByPosition(e.right,e.bottom,this.viewport.value.text,this.quill.root),k.map(_e.pi.getPositionByNativeCursor(this.quill.root)))),w.fP(A.vY.create),k.mapLeft((e=>e instanceof _e.pi.CaretNotSetError?this._log.debug("Cannot calculate viewportRange",e):this._log.error("Cannot calculate viewportRange",e))),C.fromEither))),le.fY(C.getEq(A.vY.eq)),le.tl({bufferSize:1,refCount:!0}))}}!function(e){class t extends Ke{fakeAttach(){this.attach(document.createElement("div"),document.createElement("div"),G.of(f.rw.empty))}get mutationObserverPeriod(){return Boolean(MutationObserver._period)?MutationObserver._period:t.defaultMutationObserverPeriod}get container(){return this.quill.root}setContents(e,t=Ae.api){super.setContents(e,t)}getCursor(){return this._envSupportsSelection?super.getCursor():T.LN.empty}static create({modules:e,allowedAttrs:i,allowedEmbeds:n,options:s,dox:r}){return new t(e,i,n,s,r?be.N.Mock(r):void 0)}constructor(e=t.DEFAULT_MODULES,i=g.E.skipAny,s=g.E.skipAny,r={},o=be.N.Mock()){(0,_e.gw)(),super(e,o,i,s,r),(0,n._)(this,"markChangeApplied",void 0),(0,n._)(this,"selectedFormatting",void 0),(0,n._)(this,"_envSupportsSelection",void 0),this.markChangeApplied=this._marker.markChangeApplied,this.selectedFormatting=new se.B,this._envSupportsSelection=Boolean(window.getSelection),this._envSupportsSelection||Object.assign(this.quill,{setSelection:(e,t)=>{if(null===e)return;const i="object"==typeof e?e.index:e;(0,y.V1)(i>=0,"range selection can not accept negative values")}})}}(0,n._)(t,"defaultMutationObserverPeriod",100),(0,n._)(t,"DEFAULT_MODULES",{modules:{history:ke.U,clipboard:(0,Ce.g)(!1,[]),keyboard:Se.TV.getKeyboardWithBindings(Se.TV.Bindings.plainTextBindings),marks:we.O},formats:[d.A,m.A,p.A,h.A]}),e.Mock=t}(Ke||(Ke={}));var Be=i(91177)},88195:(e,t,i)=>{i.d(t,{n:()=>o});var n=i(37634),s=i(11864);const r={position:"absolute",background:n.Q.Border.Base.Subdued,pointerEvents:"none"},o=s.Ks.prefixedStylesheet("denali-editor",{editor:[{minWidth:250,minHeight:100,outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word",wordBreak:"break-word"}],graySelection:[r]})},61098:(e,t,i)=>{i.d(t,{z:()=>n});var n,s=i(23988),r=i(10334),o=i(17171),a=i(85886),l=i(66202),c=i(65390),d=i(83407),h=i(84712),m=i(56855),p=i(96471),u=i(83932),g=i(1224),f=i(3016),y=i(79937),_=i(5406),v=i(42279),b=i(99339),C=i(7149),k=i(91745),S=i(57836),w=i(99010);!function(e){e.getSelectionHOCs=e=>({withNeutralForSelection:t=>function(e,t){return class extends a.Component{componentDidMount(){this._subs.push(this._neutralForSelection(),...this._preventOnMouseMove())}componentWillUnmount(){this._subs.dispose()}render(){return a.createElement(e,(0,o._)((0,r._)({},this.props),{onMount:this._onMount}))}constructor(...e){super(...e),(0,s._)(this,"_el",h.s.create(c.none)),(0,s._)(this,"_subs",new f.y.Keeper),(0,s._)(this,"_onMount",(e=>{this._el.set(c.fromNullable(e)),this.props.onMount&&e&&this.props.onMount(e)})),(0,s._)(this,"_neutralForSelection",(()=>this._el.pipe(y.n(c.fold((()=>_.w),(e=>v.h(b.R(document,"mousedown").pipe(C.T((e=>e.target)),k.p((t=>!(t===e||(0,d.pu)(e,t)))),S.u(!0)),b.R(document,"mouseup").pipe(S.u(!1))).pipe(w.M((t=>{e.style.pointerEvents=t?"none":"auto"}))))))).subscribe())),(0,s._)(this,"_preventOnMouseMove",(()=>{const e=h.s.create(!1);return[t.dontFreezeWhen(e,"prevent-focus"),this._el.pipe(y.n(c.fold((()=>_.w),(e=>v.h(b.R(e,"mousedown").pipe(S.u(!0)),b.R(e,"mouseup").pipe(S.u(!1)))))),w.M((t=>e.set(t)))).subscribe()]}))}}}(t,e),withSelectionEffect:(t,n)=>i.withSelectionEffect(t,e,n)});const t=e=>t=>a.createElement(e,t);let i;e.getPassThrough=()=>({withNeutralForSelection:t,withSelectionEffect:t}),e.Context=a.createContext(u.o.invariantContent("DenaliEditorSelection")),function(e){e.PlainContainer=({children:e,onMouseDown:t,onMount:i,className:n})=>a.createElement(m.F.div,{className:n,onMouseDown:t,mount:i},e),e.withSelectionEffect=function(e,t,i){return class extends a.Component{_onMouseDown(e){p.Cm.isLeftMouseButtom(e)&&i(t,e)}render(){return a.createElement(e,(0,o._)((0,r._)({},this.props),{onMouseDown:this._onMouseDown}))}}},e.collapse=e=>{const t=e.getCursor().index;l.getOrElse((e=>g.Bx.Logging.getLogger("Selection").error("Failed to set cursor on selection collapse",e,{index:t})))(e.setCursor(t+e.getCursor().length,0,"silent"))},e.resetAsap=(e,t)=>{setTimeout((()=>{const{index:t,length:i}=e.getCursor();l.getOrElse((e=>g.Bx.Logging.getLogger("Selection").error("Failed to set cursor on selection reset.",e,{index:t,length:i})))(e.setCursor(t,i))}),0),t.stopPropagation()},e.prevent=(e,t)=>{t.stopPropagation()}}(i=e.Effect||(e.Effect={}))}(n||(n={}))},44011:(e,t,i)=>{i.r(t),i.d(t,{annotatorEmptyDocument:()=>l,bulkAcceptDemoText:()=>o,fullSentenceDemoText:()=>s,listTransformDemoText:()=>a,mutedAlertsDemoText:()=>r,premiumDemoDocument:()=>n});const n={title:"Welcome to Grammarly Premium!",text:""},s={title:"",text:"As many people in the Lima region wait with much hopeful anticipation for all of the impact Rhodes State College will have on our downtown area, many others have concerns due to the lack of activity after the demolition of most of the buildings downtown earlier this year.\n\nAs a business man with local interests, I have always tried to be as supportive as it is possible for me to be of our entire community. I can become passionte about all of the positive opportunities that arise. I could also become frustrated with all of the negative comments and roadblocks that stand in the way of the progress of our community.\n\nI feel it is time the public realizes and supports the impact this facility would have on the community and the reason the project has been slowed down.\n\nThe vision of the doctor and board to build a new medical school in the heart of our county and city is a model of community spirit and partnership for the betterment of so many aspects of our region. The 500 to 700 students and faculty that will be in our Town Square on a daily basis will bring foot traffic and youth, talent and opportunity. Many of the young people will fill many job openings and remain in our community for many years to come.\n\nAs a community full of positive thinkers and optimists, lets not just be passive and ask ourselves five years from now what could we have done! Let us all gather together and demand answers, demand progress and let our voices ring through city hall."},r={title:"",text:"Regarding our vaction policy, a decision was made to give everyone an extra day off. The decision was based on the fact that lots people are extra stressed now and not taking time off. We really hope that this will give everyone a good rest. If you have any comments or questions please send them to us promptly. The feedback has always been appreciated.\nAdditionally, please review the latest changes in our work from home police that have been updated this month. The new page was added to our Wiki. It includes a number of new recommendations on how to stay productive remotely."},o={title:"",text:"Spelling, punctuation, and grammar\nMispellings and grammatical errors can effect your credibility. The same goes for misused commas, and other types of punctuation . Not only will Grammarly underline these issues, but it will also show you how to correctly write the sentence.\n\nClarity, tone, and more\nWhen your text does not have clarity, you'll get suggestions to make that text more easy to understand. It goes without saying that overly wordy writing can be difficult to follow.\n\nIt might sound silly, but Grammarly can even help you strike the right tone. A confident tone can go a long way when writing for an audience of businessmen, salesmen, or professorsas can choosing language that's inclusive and accurate to your meaning.\n\nWhen you're looking for ways to liven up your text, Grammarly examines your vocabulary carefully so you don't have to analyze your writing too much.\n\nSo what's next?\nSign up for a Grammarly account.\nStart writing and discover even more features as you go!\n"},a={title:"",text:"The last few day have been full of a lot of thinking about what our goals should be for the development of great new features for our users. While there is a ton we could be doing, there's a few areas where I see us helping our users next year: making sure their message is clear and is able to get through to their readers, helping them sound friendlier and develop stronger and more authentic connections with their coworkers, appearing reputable with correct grammar and proper formatting, and feeling more confident about their writing. I hope you're all as excited by these opportunity as I am. The workmanship in our products will be evident to all of our users.  Send me your thoughts and any additional ideas by October 1st."},l={title:"",text:""}},57014:(e,t,i)=>{i.d(t,{$U:()=>n,YF:()=>o,sM:()=>a,sg:()=>r});var n,s=i(12175);!function(e){const t=e=>`@media ${e}`;e.screenXS=t("only screen"),e.screenS=t("only screen and (min-width: 600px)"),e.screenM=t("only screen and (min-width: 800px)"),e.screenL=t("only screen and (min-width: 1270px)"),e.screenXL=t("only screen and (min-width: 1360px)"),e.screenHD=t("only screen and (min-width: 1430px)"),e.threeColumnsMax=t("only screen and (max-width: 1100px)"),e.fourColumnsMax=t("only screen and (max-width: 1250px)"),e.xss=t("(max-width: 700px)"),e.xssUpper=t("(max-width: 780px)"),e.xsLower=t("(max-width: 960px)"),e.xs=t("(max-width: 1024px)"),e.tiny=t("(max-width: 1279px)"),e.small=t("(max-width: 1359px)"),e.normal=t("(min-width: 1360px) and (max-width: 1599px)"),e.big=t("(min-width: 1600px)"),e.bigUpper=t("(min-width: 1920px)"),e.retina=t("(min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)"),e.smallHeight=t("(max-height: 760px)"),e.xssHeight=t("(max-height: 520px)"),e.print=t("print");var i=e.collapsedSidebarQuery="((min-width: 1600px) and (max-height: 750px)), ((min-width: 1360px) and (max-width: 1599px) and (max-height: 680px)), ((max-width: 1359px) and (max-height: 590px))",n=e.compactSidebarQuery="((min-width: 1600px) and (max-height: 900px)), ((min-width: 1360px) and (max-width: 1599px) and (max-height: 800px)), ((max-width: 1359px) and (max-height: 710px))";e.compactSidebar=t(n),e.collapsedSidebar=t(i),e.normalLower=t("(min-width: 1360px) and (max-width: 1471px)"),e.bigHigher=t("(min-width: 1600px) and (max-width: 1647px)"),e.maxWidth=e=>t(`(max-width: ${e}px)`),e.minWidth=e=>t(`(min-width: ${e}px)`),e.maxHeight=e=>t(`(max-height: ${e}px)`),e.minHeight=e=>t(`(min-height: ${e}px)`)}(n||(n={}));const r=()=>({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),o=()=>({isolation:"isolate",transform:"translateZ(0)"}),a=(s.White,s.Blue40,{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0,0,0,0)",whiteSpace:"nowrap",border:0})},92935:(e,t,i)=>{e.exports=i.p+"files/85c9adfbbe6c323245d2/mutedAlerts.mp4"},76387:(e,t,i)=>{e.exports=i.p+"files/eb5b3b9bc627c8b7bf87/mutedAlerts.png"}}]);